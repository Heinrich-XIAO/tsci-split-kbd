import { GraphicsObject } from 'graphics-debug';

type Fr = `${number}fr`;
type Px = `${number}px`;
type Percent = `${number}%`;
type Keyword = "auto" | "min-content" | "max-content";
type TrackSize = Fr | Px | Percent | Keyword;
/** A single track definition (string) or a repeat/minmax helper */
type Track = TrackSize | `minmax(${TrackSize}, ${TrackSize})` | `repeat(${number}, ${TrackSize})`;
/** A full template as string (CSS‑like) or structured array  */
type GridTemplate = string | Track[];
interface GridItem {
    /** Stable identifier – never a DOM node */
    key: string;
    row?: number | string;
    column?: number | string;
    rowSpan?: number | string;
    columnSpan?: number | string;
    rowStart?: number | string;
    columnStart?: number | string;
    rowEnd?: number | string;
    columnEnd?: number | string;
    contentWidth?: number | string;
    contentHeight?: number | string;
    /** Named area (alternative to numeric placement) */
    area?: string;
    order?: number | string;
    /** Any extra data your engine wants to carry along */
    payload?: unknown;
}
interface CssGridOptions {
    /** All grid items (order irrelevant unless you want it) */
    children: GridItem[];
    gridTemplateRows?: GridTemplate;
    gridTemplateColumns?: GridTemplate;
    gap?: number | [number, number];
    justifyItems?: "start" | "end" | "center" | "stretch";
    alignItems?: "start" | "end" | "center" | "stretch";
    containerWidth?: number;
    containerHeight?: number;
}

/** Final position of a single grid item (1-based like CSS Grid) */
interface GridCell {
    key: string;
    row: number;
    column: number;
    rowSpan: number;
    columnSpan: number;
    x: number;
    y: number;
    width: number;
    height: number;
}
declare class CssGrid {
    readonly opts: CssGridOptions;
    constructor(opts: CssGridOptions);
    /** Returns the computed layout matrix, ready for rendering elsewhere */
    layout(): {
        cells: GridCell[];
        rowSizes: number[];
        columnSizes: number[];
        rowGap: number;
        columnGap: number;
        itemCoordinates: Record<string, {
            x: number;
            y: number;
            width: number;
            height: number;
        }>;
    };
    convertToHtml(): string;
    visualize(): GraphicsObject;
}

export { CssGrid, type GridCell };
