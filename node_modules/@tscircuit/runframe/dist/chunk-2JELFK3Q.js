// lib/components/ui/tabs.tsx
import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs";

// lib/utils/index.ts
import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";

// lib/utils/posthog.ts
import posthog from "posthog-js";
if (!window.location.hostname.includes("localhost") && !window.location.hostname.includes("127.0.0.1")) {
  if (!posthog.__loaded) {
    posthog.init("phc_htd8AQjSfVEsFCLQMAiUooG4Q0DKBCjqYuQglc9V3Wo", {
      api_host: "https://postpig.tscircuit.com",
      person_profiles: "always"
    });
  }
}

// lib/utils/bytesToBase64.ts
function bytesToBase64(bytes) {
  const binString = String.fromCodePoint(...bytes);
  return btoa(binString);
}

// lib/utils/encodeFsMapToUrlHash.ts
import { gzipSync, strToU8 } from "fflate";
function encodeFsMapToUrlHash(fsMap, snippet_type) {
  const text = JSON.stringify(fsMap);
  const compressedData = gzipSync(strToU8(text));
  const base64Data = bytesToBase64(compressedData);
  const typeParam = snippet_type ? `&snippet_type=${snippet_type}` : "";
  return `https://tscircuit.com/editor?${typeParam}#data:application/gzip;base64,${base64Data}`;
}

// lib/utils/index.ts
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
var capitalizeFirstLetters = (str) => {
  return str.replace(/_/g, " ").replace(/\b\w/g, (char) => char.toUpperCase());
};

// lib/components/ui/tabs.tsx
import { jsx } from "react/jsx-runtime";
var Tabs = TabsPrimitive.Root;
var TabsList = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.List,
  {
    ref,
    className: cn(
      "rf-inline-flex rf-h-9 rf-items-center rf-justify-center rf-rounded-lg rf-bg-zinc-100 rf-p-1 rf-text-zinc-500 dark:rf-bg-zinc-800 dark:rf-text-zinc-400",
      className
    ),
    ...props
  }
));
TabsList.displayName = TabsPrimitive.List.displayName;
var TabsTrigger = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.Trigger,
  {
    ref,
    className: cn(
      "rf-inline-flex rf-items-center rf-justify-center rf-whitespace-nowrap rf-rounded-md rf-px-3 rf-py-1 rf-text-sm rf-font-medium rf-ring-offset-white rf-transition-all focus-visible:rf-outline-none focus-visible:rf-ring-2 focus-visible:rf-ring-zinc-950 focus-visible:rf-ring-offset-2 disabled:rf-pointer-events-none disabled:rf-opacity-50 data-[state=active]:rf-bg-white data-[state=active]:rf-text-zinc-950 data-[state=active]:rf-shadow dark:rf-ring-offset-zinc-950 dark:focus-visible:rf-ring-zinc-300 dark:data-[state=active]:rf-bg-zinc-950 dark:data-[state=active]:rf-text-zinc-50",
      className
    ),
    ...props
  }
));
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName;
var TabsContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.Content,
  {
    ref,
    className: cn(
      "rf-h-full rf-mt-2 rf-ring-offset-white focus-visible:rf-outline-none focus-visible:rf-ring-2 focus-visible:rf-ring-zinc-950 focus-visible:rf-ring-offset-2 dark:rf-ring-offset-zinc-950 dark:focus-visible:rf-ring-zinc-300",
      className
    ),
    ...props
  }
));
TabsContent.displayName = TabsPrimitive.Content.displayName;

// lib/components/CircuitJsonPreview/CircuitJsonPreview.tsx
import { CadViewer } from "@tscircuit/3d-viewer";
import { useCallback as useCallback9, useEffect as useEffect14, useState as useState20, useMemo as useMemo9 } from "react";

// lib/components/ErrorFallback.tsx
import "react";
import { jsx as jsx2, jsxs } from "react/jsx-runtime";
var ErrorFallback = ({ error }) => {
  return /* @__PURE__ */ jsx2(
    "div",
    {
      "data-testid": "error-container",
      className: "rf-error-container rf-mt-4 rf-bg-red-50 rf-rounded-md rf-border rf-border-red-200",
      children: /* @__PURE__ */ jsxs("div", { className: "rf-p-4", children: [
        /* @__PURE__ */ jsx2("h2", { className: "rf-text-lg rf-font-semibold rf-text-red-800 rf-mb-3", children: "Error Loading 3D Viewer" }),
        /* @__PURE__ */ jsx2("p", { className: "rf-text-xs rf-font-mono rf-whitespace-pre-wrap rf-text-red-700", children: error.message }),
        /* @__PURE__ */ jsx2(
          "details",
          {
            style: { whiteSpace: "pre-wrap" },
            className: "rf-text-xs rf-font-mono rf-text-red-600 rf-mt-2",
            children: error.stack
          }
        )
      ] })
    }
  );
};

// lib/components/CircuitJsonPreview/CircuitJsonPreview.tsx
import { ErrorBoundary } from "react-error-boundary";

// lib/components/ErrorTabContent/ErrorTabContent.tsx
import { GitHubLogoIcon } from "@radix-ui/react-icons";
import {
  ClipboardIcon,
  ChevronRight as ChevronRight2,
  ChevronDown,
  XCircle,
  AlertCircle
} from "lucide-react";

// lib/components/ui/button.tsx
import * as React3 from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva } from "class-variance-authority";
import { jsx as jsx3 } from "react/jsx-runtime";
var buttonVariants = cva(
  "rf-inline-flex rf-items-center rf-justify-center rf-gap-2 rf-whitespace-nowrap rf-rounded-md rf-text-sm rf-font-medium rf-transition-colors focus-visible:rf-outline-none focus-visible:rf-ring-1 focus-visible:rf-ring-zinc-950 disabled:rf-pointer-events-none disabled:rf-opacity-50 [&_svg]:rf-pointer-events-none [&_svg]:rf-size-4 [&_svg]:rf-shrink-0 dark:focus-visible:rf-ring-zinc-300",
  {
    variants: {
      variant: {
        default: "rf-bg-zinc-900 rf-text-zinc-50 rf-shadow hover:rf-bg-zinc-900/90 dark:rf-bg-zinc-50 dark:rf-text-zinc-900 dark:hover:rf-bg-zinc-50/90",
        destructive: "rf-bg-red-500 rf-text-zinc-50 rf-shadow-sm hover:rf-bg-red-500/90 dark:rf-bg-red-900 dark:rf-text-zinc-50 dark:hover:rf-bg-red-900/90",
        outline: "rf-border rf-border-zinc-200 rf-bg-white rf-shadow-sm hover:rf-bg-zinc-100 hover:rf-text-zinc-900 dark:rf-border-zinc-800 dark:rf-bg-zinc-950 dark:hover:rf-bg-zinc-800 dark:hover:rf-text-zinc-50",
        secondary: "rf-bg-zinc-100 rf-text-zinc-900 rf-shadow-sm hover:rf-bg-zinc-100/80 dark:rf-bg-zinc-800 dark:rf-text-zinc-50 dark:hover:rf-bg-zinc-800/80",
        ghost: "hover:rf-bg-zinc-100 hover:rf-text-zinc-900 dark:hover:rf-bg-zinc-800 dark:hover:rf-text-zinc-50",
        link: "rf-text-zinc-900 rf-underline-offset-4 hover:rf-underline dark:rf-text-zinc-50"
      },
      size: {
        default: "rf-h-9 rf-px-4 rf-py-2",
        sm: "rf-h-8 rf-rounded-md rf-px-3 rf-text-xs",
        lg: "rf-h-10 rf-rounded-md rf-px-8",
        icon: "rf-h-9 rf-w-9"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
var Button = React3.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return /* @__PURE__ */ jsx3(
      Comp,
      {
        className: cn(buttonVariants({ variant, size, className })),
        ref,
        ...props
      }
    );
  }
);
Button.displayName = "Button";

// lib/components/ErrorTabContent/ErrorTabContent.tsx
import { createSnippetUrl } from "@tscircuit/create-snippet-url";

// lib/components/ErrorTabContent/AutoroutingLogOptions.tsx
import { CircuitBoardIcon, DownloadIcon, UploadIcon } from "lucide-react";

// lib/components/ui/dropdown-menu.tsx
import * as React4 from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu";
import { Check, ChevronRight, Circle } from "lucide-react";
import { jsx as jsx4, jsxs as jsxs2 } from "react/jsx-runtime";
var DropdownMenu = DropdownMenuPrimitive.Root;
var DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;
var DropdownMenuPortal = DropdownMenuPrimitive.Portal;
var DropdownMenuSub = DropdownMenuPrimitive.Sub;
var DropdownMenuSubTrigger = React4.forwardRef(({ className, inset, children, ...props }, ref) => /* @__PURE__ */ jsxs2(
  DropdownMenuPrimitive.SubTrigger,
  {
    ref,
    className: cn(
      "rf-flex rf-cursor-default rf-gap-2 rf-select-none rf-items-center rf-rounded-sm rf-px-2 rf-py-1.5 rf-text-sm rf-outline-none focus:rf-bg-zinc-100 data-[state=open]:rf-bg-zinc-100 [&_svg]:rf-pointer-events-none [&_svg]:rf-size-4 [&_svg]:rf-shrink-0 dark:focus:rf-bg-zinc-800 dark:data-[state=open]:rf-bg-zinc-800",
      inset && "rf-pl-8",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx4(ChevronRight, { className: "rf-ml-auto" })
    ]
  }
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;
var DropdownMenuSubContent = React4.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx4(
  DropdownMenuPrimitive.SubContent,
  {
    ref,
    className: cn(
      "rf-z-50 rf-min-w-[8rem] rf-overflow-hidden rf-rounded-md rf-border rf-border-zinc-200 rf-bg-white rf-p-1 rf-text-zinc-950 rf-shadow-lg data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0 data-[state=closed]:rf-zoom-out-95 data-[state=open]:rf-zoom-in-95 data-[side=bottom]:rf-slide-in-from-top-2 data-[side=left]:rf-slide-in-from-right-2 data-[side=right]:rf-slide-in-from-left-2 data-[side=top]:rf-slide-in-from-bottom-2 dark:rf-border-zinc-800 dark:rf-bg-zinc-950 dark:rf-text-zinc-50",
      className
    ),
    ...props
  }
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;
var DropdownMenuContent = React4.forwardRef(({ className, sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsx4(DropdownMenuPrimitive.Portal, { children: /* @__PURE__ */ jsx4(
  DropdownMenuPrimitive.Content,
  {
    ref,
    sideOffset,
    className: cn(
      "rf-z-50 rf-min-w-[8rem] rf-overflow-hidden rf-rounded-md rf-border rf-border-zinc-200 rf-bg-white rf-p-1 rf-text-zinc-950 rf-shadow-md dark:rf-border-zinc-800 dark:rf-bg-zinc-950 dark:rf-text-zinc-50",
      "data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0 data-[state=closed]:rf-zoom-out-95 data-[state=open]:rf-zoom-in-95 data-[side=bottom]:rf-slide-in-from-top-2 data-[side=left]:rf-slide-in-from-right-2 data-[side=right]:rf-slide-in-from-left-2 data-[side=top]:rf-slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;
var DropdownMenuItem = React4.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx4(
  DropdownMenuPrimitive.Item,
  {
    ref,
    className: cn(
      "rf-relative rf-flex rf-cursor-default rf-select-none rf-items-center rf-gap-2 rf-rounded-sm rf-px-2 rf-py-1.5 rf-text-sm rf-outline-none rf-transition-colors focus:rf-bg-zinc-100 focus:rf-text-zinc-900 data-[disabled]:rf-pointer-events-none data-[disabled]:rf-opacity-50 [&>svg]:rf-size-4 [&>svg]:rf-shrink-0 dark:focus:rf-bg-zinc-800 dark:focus:rf-text-zinc-50",
      inset && "rf-pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;
var DropdownMenuCheckboxItem = React4.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxs2(
  DropdownMenuPrimitive.CheckboxItem,
  {
    ref,
    className: cn(
      "rf-relative rf-flex rf-cursor-default rf-select-none rf-items-center rf-rounded-sm rf-py-1.5 rf-pl-8 rf-pr-2 rf-text-sm rf-outline-none rf-transition-colors focus:rf-bg-zinc-100 focus:rf-text-zinc-900 data-[disabled]:rf-pointer-events-none data-[disabled]:rf-opacity-50 dark:focus:rf-bg-zinc-800 dark:focus:rf-text-zinc-50",
      className
    ),
    checked,
    ...props,
    children: [
      /* @__PURE__ */ jsx4("span", { className: "rf-absolute rf-left-2 rf-flex rf-h-3.5 rf-w-3.5 rf-items-center rf-justify-center", children: /* @__PURE__ */ jsx4(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx4(Check, { className: "rf-h-4 rf-w-4" }) }) }),
      children
    ]
  }
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;
var DropdownMenuRadioItem = React4.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs2(
  DropdownMenuPrimitive.RadioItem,
  {
    ref,
    className: cn(
      "rf-relative rf-flex rf-cursor-default rf-select-none rf-items-center rf-rounded-sm rf-py-1.5 rf-pl-8 rf-pr-2 rf-text-sm rf-outline-none rf-transition-colors focus:rf-bg-zinc-100 focus:rf-text-zinc-900 data-[disabled]:rf-pointer-events-none data-[disabled]:rf-opacity-50 dark:focus:rf-bg-zinc-800 dark:focus:rf-text-zinc-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx4("span", { className: "rf-absolute rf-left-2 rf-flex rf-h-3.5 rf-w-3.5 rf-items-center rf-justify-center", children: /* @__PURE__ */ jsx4(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx4(Circle, { className: "rf-h-2 rf-w-2 rf-fill-current" }) }) }),
      children
    ]
  }
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;
var DropdownMenuLabel = React4.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx4(
  DropdownMenuPrimitive.Label,
  {
    ref,
    className: cn(
      "rf-px-2 rf-py-1.5 rf-text-sm rf-font-semibold",
      inset && "rf-pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;
var DropdownMenuSeparator = React4.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx4(
  DropdownMenuPrimitive.Separator,
  {
    ref,
    className: cn(
      "rf--mx-1 rf-my-1 rf-h-px rf-bg-zinc-100 dark:rf-bg-zinc-800",
      className
    ),
    ...props
  }
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;
var DropdownMenuShortcut = ({
  className,
  ...props
}) => {
  return /* @__PURE__ */ jsx4(
    "span",
    {
      className: cn(
        "rf-ml-auto rf-text-xs rf-tracking-widest rf-opacity-60",
        className
      ),
      ...props
    }
  );
};
DropdownMenuShortcut.displayName = "DropdownMenuShortcut";

// lib/components/ErrorTabContent/AutoroutingLogOptions.tsx
import { Fragment, jsx as jsx5, jsxs as jsxs3 } from "react/jsx-runtime";
var AutoroutingLogOptions = ({
  autoroutingLog,
  onReportAutoroutingLog
}) => /* @__PURE__ */ jsx5(Fragment, { children: Object.keys(autoroutingLog ?? {}).length > 0 && /* @__PURE__ */ jsxs3(DropdownMenu, { children: [
  /* @__PURE__ */ jsx5(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs3(Button, { variant: "outline", children: [
    /* @__PURE__ */ jsx5(CircuitBoardIcon, { className: "rf-w-4 rf-h-4 rf-mr-2" }),
    "Open Autorouting Log"
  ] }) }),
  /* @__PURE__ */ jsx5(DropdownMenuContent, { className: "rf-w-96", children: Object.entries(autoroutingLog ?? {}).map(
    ([key, { simpleRouteJson }]) => /* @__PURE__ */ jsxs3(
      DropdownMenuItem,
      {
        className: "rf-flex rf-justify-between rf-items-center",
        children: [
          /* @__PURE__ */ jsx5("span", { className: "rf-truncate rf-text-xs rf-mr-2", children: key }),
          /* @__PURE__ */ jsxs3("div", { className: "rf-flex rf-gap-2", children: [
            /* @__PURE__ */ jsxs3(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: (e) => {
                  e.stopPropagation();
                  const blob = new Blob(
                    [JSON.stringify(simpleRouteJson, null, 2)],
                    { type: "application/json" }
                  );
                  const url = URL.createObjectURL(blob);
                  const a = document.createElement("a");
                  a.href = url;
                  a.download = `${key}-autorouting.json`;
                  a.click();
                  URL.revokeObjectURL(url);
                },
                children: [
                  /* @__PURE__ */ jsx5(DownloadIcon, { className: "rf-w-3 rf-h-3" }),
                  "Download"
                ]
              }
            ),
            onReportAutoroutingLog && /* @__PURE__ */ jsxs3(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: (e) => {
                  e.stopPropagation();
                  if (onReportAutoroutingLog) {
                    onReportAutoroutingLog(key, { simpleRouteJson });
                  }
                },
                children: [
                  /* @__PURE__ */ jsx5(UploadIcon, { className: "rf-w-3 rf-h-3" }),
                  "Report Bug"
                ]
              }
            )
          ] })
        ]
      },
      key
    )
  ) })
] }) });

// lib/components/ErrorTabContent/ErrorTabContent.tsx
import { useState, useMemo, useEffect } from "react";

// lib/utils/toast.ts
import { toast } from "react-hot-toast";

// lib/components/ErrorTabContent/ErrorTabContent.tsx
import { Fragment as Fragment2, jsx as jsx6, jsxs as jsxs4 } from "react/jsx-runtime";
var ErrorTabContent = ({
  code,
  fsMap,
  autoroutingLog,
  circuitJsonErrors,
  circuitJsonWarnings,
  onReportAutoroutingLog,
  errorMessage,
  errorStack,
  circuitJson,
  evalVersion
}) => {
  const unifiedErrors = useMemo(() => {
    const errors = [];
    if (errorMessage) {
      errors.push({
        type: "Execution Error",
        message: errorMessage,
        stack: errorStack || void 0,
        source: "execution"
      });
    }
    if (circuitJsonErrors && circuitJsonErrors.length > 0) {
      for (const error of circuitJsonErrors) {
        errors.push({
          type: error.type || "Circuit JSON Error",
          message: error.message || "No error message available",
          stack: error.stack || "",
          source: "circuitJson"
        });
      }
    }
    return errors;
  }, [errorMessage, errorStack, circuitJsonErrors]);
  const softwareUsedString = useMemo(() => {
    if (!circuitJson || !Array.isArray(circuitJson)) return void 0;
    const metadata = circuitJson.find(
      (el) => el.type === "source_project_metadata"
    );
    return metadata?.software_used_string;
  }, [circuitJson]);
  const unifiedWarnings = useMemo(() => {
    const warnings = [];
    if (circuitJsonWarnings && circuitJsonWarnings.length > 0) {
      for (const warning of circuitJsonWarnings) {
        warnings.push({
          type: warning.type || "Circuit JSON Warning",
          message: warning.message || "No warning message available",
          stack: warning.stack || "",
          source: "circuitJson"
        });
      }
    }
    return warnings;
  }, [circuitJsonWarnings]);
  const packageUrl = () => {
    if (fsMap) {
      try {
        return encodeFsMapToUrlHash(
          fsMap instanceof Map ? Object.fromEntries(fsMap.entries()) : fsMap
        );
      } catch {
      }
    }
    return createSnippetUrl(code ?? "");
  };
  const openIssue = (title, body) => {
    const issueUrl = `https://github.com/tscircuit/tscircuit.com/issues/new?title=${encodeURIComponent(
      title
    )}&body=${encodeURIComponent(body)}`;
    window.open(issueUrl, "_blank");
  };
  if (unifiedErrors.length === 0 && unifiedWarnings.length === 0) {
    return /* @__PURE__ */ jsxs4("div", { className: "px-2", children: [
      /* @__PURE__ */ jsx6("div", { className: "rf-mt-4 rf-bg-green-50 rf-rounded-md rf-border rf-border-green-200", children: /* @__PURE__ */ jsxs4("div", { className: "rf-p-4", children: [
        /* @__PURE__ */ jsx6("h3", { className: "rf-text-lg rf-font-semibold rf-text-green-800 rf-mb-3", children: "No errors or warnings!" }),
        /* @__PURE__ */ jsx6("p", { className: "rf-text-sm rf-text-green-700", children: "Your code is running without any errors or warnings." })
      ] }) }),
      /* @__PURE__ */ jsxs4("div", { className: "rf-flex rf-gap-2 rf-mt-4 rf-justify-end", children: [
        /* @__PURE__ */ jsx6(
          AutoroutingLogOptions,
          {
            autoroutingLog,
            onReportAutoroutingLog
          }
        ),
        /* @__PURE__ */ jsxs4(
          Button,
          {
            variant: "outline",
            className: "rf-p-1",
            onClick: () => {
              const url = packageUrl();
              openIssue("Issue Report", `[Package code to reproduce](${url})`);
            },
            children: [
              /* @__PURE__ */ jsx6(GitHubLogoIcon, { className: "rf-w-4 rf-h-4" }),
              "Report Issue"
            ]
          }
        )
      ] })
    ] });
  }
  useEffect(() => {
    if (errorMessage) {
      let errorText = errorMessage;
      if (errorStack) {
        errorText += `

${errorStack}`;
      }
      if (typeof window !== "undefined") {
        window.__TSCIRCUIT_LAST_EXECUTION_ERROR = errorText;
      }
    }
  }, [errorMessage, errorStack]);
  const [expandedErrors, setExpandedErrors] = useState(() => {
    const allIndexes = /* @__PURE__ */ new Set();
    unifiedErrors.forEach((_, i) => allIndexes.add(i));
    return allIndexes;
  });
  const [expandedWarnings, setExpandedWarnings] = useState(() => {
    const allIndexes = /* @__PURE__ */ new Set();
    unifiedWarnings.forEach((_, i) => allIndexes.add(i));
    return allIndexes;
  });
  const [errorsCollapsed, setErrorsCollapsed] = useState(false);
  const [warningsCollapsed, setWarningsCollapsed] = useState(false);
  const toggleError = (index) => {
    setExpandedErrors((prev) => {
      const next = new Set(prev);
      if (next.has(index)) {
        next.delete(index);
      } else {
        next.add(index);
      }
      return next;
    });
  };
  const toggleWarning = (index) => {
    setExpandedWarnings((prev) => {
      const next = new Set(prev);
      if (next.has(index)) {
        next.delete(index);
      } else {
        next.add(index);
      }
      return next;
    });
  };
  return /* @__PURE__ */ jsx6(Fragment2, { children: /* @__PURE__ */ jsxs4("div", { className: "rf-w-full rf-flex rf-flex-col rf-h-full", children: [
    /* @__PURE__ */ jsxs4("div", { className: "rf-overflow-y-auto rf-min-h-0", children: [
      unifiedErrors.length > 0 && /* @__PURE__ */ jsxs4("div", { className: "rf-mt-2", children: [
        /* @__PURE__ */ jsxs4(
          "div",
          {
            className: "rf-text-xs rf-text-red-700 rf-font-semibold rf-px-2 rf-py-1 rf-bg-red-50 rf-border-b rf-border-red-200 rf-flex rf-items-center rf-gap-2 rf-cursor-pointer hover:rf-bg-red-100",
            onClick: () => setErrorsCollapsed(!errorsCollapsed),
            children: [
              errorsCollapsed ? /* @__PURE__ */ jsx6(ChevronRight2, { className: "rf-h-3 rf-w-3 rf-text-red-700" }) : /* @__PURE__ */ jsx6(ChevronDown, { className: "rf-h-3 rf-w-3 rf-text-red-700" }),
              /* @__PURE__ */ jsxs4("span", { children: [
                unifiedErrors.length,
                " ",
                unifiedErrors.length === 1 ? "error" : "errors"
              ] })
            ]
          }
        ),
        !errorsCollapsed && unifiedErrors.map((error, index) => {
          const isExpanded = expandedErrors.has(index);
          const previewMessage = error.message;
          const hasDetails = error.stack || evalVersion || softwareUsedString;
          return /* @__PURE__ */ jsxs4(
            "div",
            {
              className: "rf-bg-white hover:rf-bg-red-100",
              children: [
                /* @__PURE__ */ jsxs4(
                  "div",
                  {
                    className: "rf-flex rf-items-start rf-gap-1 rf-px-2 rf-pt-1 rf-pb-1 rf-cursor-pointer rf-bg-red-50/50",
                    onClick: () => hasDetails && toggleError(index),
                    children: [
                      /* @__PURE__ */ jsxs4(
                        "div",
                        {
                          className: "rf-flex rf-items-center rf-gap-2",
                          style: { marginTop: "2px" },
                          children: [
                            /* @__PURE__ */ jsx6(XCircle, { className: "rf-h-4 rf-w-4 rf-text-red-500 rf-flex-shrink-0" }),
                            hasDetails && /* @__PURE__ */ jsx6(
                              ChevronRight2,
                              {
                                className: `rf-h-3 rf-w-3 rf-text-red-500 rf-flex-shrink-0 rf-transition-transform ${isExpanded ? "rf-rotate-90" : ""}`
                              }
                            )
                          ]
                        }
                      ),
                      /* @__PURE__ */ jsxs4("div", { className: "rf-flex-1 rf-min-w-0 rf-leading-[1rem]", children: [
                        /* @__PURE__ */ jsxs4("span", { className: "rf-text-xs rf-font-mono rf-text-red-700 rf-leading-[0.95rem]", children: [
                          error.type,
                          ":"
                        ] }),
                        /* @__PURE__ */ jsx6("span", { className: "rf-text-xs rf-font-mono rf-text-red-600 rf-ml-1 rf-leading-[0.95rem]", children: error.message })
                      ] })
                    ]
                  }
                ),
                isExpanded && hasDetails && /* @__PURE__ */ jsxs4("div", { className: "rf-bg-red-50/50 rf-pl-12", children: [
                  error.stack?.split("\n").filter((line) => line.trim()).slice(1).map((line, i) => /* @__PURE__ */ jsx6("div", { className: "rf-px-2 rf-leading-tight", children: /* @__PURE__ */ jsx6("span", { className: "rf-text-xs rf-font-mono rf-text-red-500", children: line }) }, i)),
                  (evalVersion || softwareUsedString) && /* @__PURE__ */ jsx6("div", { className: "rf-px-2", children: /* @__PURE__ */ jsxs4("span", { className: "rf-text-xs rf-font-mono rf-text-red-400", children: [
                    evalVersion && `@tscircuit/eval@${evalVersion}`,
                    evalVersion && softwareUsedString && " \u2022 ",
                    softwareUsedString
                  ] }) })
                ] })
              ]
            },
            index
          );
        })
      ] }),
      unifiedWarnings.length > 0 && /* @__PURE__ */ jsxs4("div", { className: "rf-mt-2", children: [
        /* @__PURE__ */ jsxs4(
          "div",
          {
            className: "rf-text-xs rf-text-orange-700 rf-font-semibold rf-px-2 rf-py-1 rf-bg-orange-50 rf-border-b rf-border-orange-200 rf-flex rf-items-center rf-gap-2 rf-cursor-pointer hover:rf-bg-orange-100",
            onClick: () => setWarningsCollapsed(!warningsCollapsed),
            children: [
              warningsCollapsed ? /* @__PURE__ */ jsx6(ChevronRight2, { className: "rf-h-3 rf-w-3 rf-text-orange-700" }) : /* @__PURE__ */ jsx6(ChevronDown, { className: "rf-h-3 rf-w-3 rf-text-orange-700" }),
              /* @__PURE__ */ jsxs4("span", { children: [
                unifiedWarnings.length,
                " ",
                unifiedWarnings.length === 1 ? "warning" : "warnings"
              ] })
            ]
          }
        ),
        !warningsCollapsed && unifiedWarnings.map((warning, index) => {
          const isExpanded = expandedWarnings.has(index);
          const previewMessage = warning.message;
          const hasDetails = !!warning.stack;
          return /* @__PURE__ */ jsxs4(
            "div",
            {
              className: "rf-bg-white hover:rf-bg-orange-100",
              children: [
                /* @__PURE__ */ jsxs4(
                  "div",
                  {
                    className: "rf-flex rf-items-center rf-gap-2 rf-px-2 rf-py-1 rf-cursor-pointer rf-bg-orange-50/50",
                    onClick: () => hasDetails && toggleWarning(index),
                    children: [
                      /* @__PURE__ */ jsx6(AlertCircle, { className: "rf-h-4 rf-w-4 rf-text-orange-500 rf-flex-shrink-0" }),
                      hasDetails && /* @__PURE__ */ jsx6(
                        ChevronRight2,
                        {
                          className: `rf-h-3 rf-w-3 rf-text-orange-500 rf-flex-shrink-0 rf-transition-transform ${isExpanded ? "rf-rotate-90" : ""}`
                        }
                      ),
                      /* @__PURE__ */ jsxs4("div", { className: "rf-flex-1 rf-min-w-0 rf-flex rf-items-center rf-flex-wrap", children: [
                        /* @__PURE__ */ jsxs4("span", { className: "rf-text-xs rf-font-mono rf-text-orange-700 rf-break-words", children: [
                          warning.type,
                          ":"
                        ] }),
                        /* @__PURE__ */ jsx6("span", { className: "rf-text-xs rf-font-mono rf-text-orange-600 rf-ml-1 rf-break-words", children: warning.message })
                      ] })
                    ]
                  }
                ),
                isExpanded && hasDetails && /* @__PURE__ */ jsx6("div", { className: "rf-bg-orange-50/50 rf-pl-12", children: warning.stack?.split("\n").filter((line) => line.trim()).slice(1).map((line, i) => /* @__PURE__ */ jsx6("div", { className: "rf-px-2 rf-leading-tight", children: /* @__PURE__ */ jsx6("span", { className: "rf-text-xs rf-font-mono rf-text-orange-500", children: line }) }, i)) })
              ]
            },
            index
          );
        })
      ] })
    ] }),
    /* @__PURE__ */ jsxs4("div", { className: "rf-flex rf-gap-2 rf-mt-4 rf-justify-end rf-flex-shrink-0", children: [
      /* @__PURE__ */ jsx6(
        AutoroutingLogOptions,
        {
          autoroutingLog,
          onReportAutoroutingLog
        }
      ),
      /* @__PURE__ */ jsxs4(
        Button,
        {
          variant: "outline",
          className: "rf-p-1",
          onClick: () => {
            const firstError = unifiedErrors[0];
            let errorText = `${firstError.type}: ${firstError.message}`;
            if (evalVersion) errorText += `
@tscircuit/eval@${evalVersion}`;
            if (softwareUsedString) errorText += `
${softwareUsedString}`;
            if (firstError.stack) errorText += `
${firstError.stack}`;
            navigator.clipboard.writeText(errorText);
            toast.success("Error copied to clipboard!");
          },
          children: [
            /* @__PURE__ */ jsx6(ClipboardIcon, { className: "rf-w-4 rf-h-4" }),
            "Copy Error"
          ]
        }
      ),
      /* @__PURE__ */ jsxs4(
        Button,
        {
          variant: "outline",
          className: "rf-p-1",
          onClick: () => {
            const firstError = unifiedErrors[0];
            const title = `Error ${firstError.type}`.replace(/[^a-zA-Z0-9 ]/g, " ").replace(/\s+/g, " ").slice(0, 100);
            let errorDetails = `${firstError.type}: ${firstError.message}`;
            if (evalVersion)
              errorDetails += `
@tscircuit/eval@${evalVersion}`;
            if (softwareUsedString) errorDetails += `
${softwareUsedString}`;
            if (firstError.stack) errorDetails += `
${firstError.stack}`;
            let body = `[Package code to reproduce](${packageUrl()})

### Error
\`\`\`
${errorDetails}
\`\`\`
`;
            if (body.length > 35e3) {
              const truncatedMessage = firstError.message.length > 500 ? `${firstError.message.slice(0, 500)}...` : firstError.message;
              body = `[Package code to reproduce](${packageUrl()})

### Error
\`\`\`
${firstError.type}: ${truncatedMessage}
\`\`\``;
            }
            openIssue(title, body);
          },
          children: [
            /* @__PURE__ */ jsx6(GitHubLogoIcon, { className: "rf-w-4 rf-h-4" }),
            "Report Issue"
          ]
        }
      )
    ] })
  ] }) });
};

// lib/components/CircuitJsonPreview/CircuitJsonPreview.tsx
import { SchematicViewer } from "@tscircuit/schematic-viewer";
import { AssemblyViewer, PinoutViewer } from "@tscircuit/assembly-viewer";

// lib/utils/getRandomTipForUser.ts
var tips = [
  "Initialize a tscircuit project using [tsci init](https://github.com/tscircuit/cli) before adding components.",
  "Define reusable modules with cached routes using [<subcircuit />](https://docs.tscircuit.com/elements/subcircuit)",
  "Run `tsci dev` on the command line to preview your boards before export",
  'Use units like mm or mils consistently across your designs (e.g. pcbX="10mm")',
  "Quickly set footprints with the [footprint prop](https://docs.tscircuit.com/footprints/footprinter-strings)",
  "Check out the guide on [ordering prototypes](https://docs.tscircuit.com/building-electronics/ordering-prototypes)",
  "Use [net labels](https://docs.tscircuit.com/elements/net) and [group elements](https://docs.tscircuit.com/elements/group) to organize complex schematics.",
  "You can manually drag components on the PCB and Schematic using [manual edits](https://docs.tscircuit.com/guides/manual-edits)",
  "Every tscircuit module can export to [Circuit JSON](https://github.com/tscircuit/circuit-json), Gerbers, Pick'n'Place CSV files, Bill of Materials CSV and more",
  "You can import components from [JLCPCB](https://docs.tscircuit.com/guides/importing-modules-and-chips/importing-from-jlcpcb) or [KiCad](https://docs.tscircuit.com/guides/importing-modules-and-chips/importing-from-kicad)",
  "Any module you push to the [registry](https://tscircuit.com/trending) will have [simple image urls](https://docs.tscircuit.com/web-apis/image-generation-api) you can use display images on a website",
  "The default [Parts Engine](https://docs.tscircuit.com/guides/platform-configuration) will automatically find parts from common vendors for your BOM",
  '[Pin selectors](https://docs.tscircuit.com/guides/using-sel-references) are similar to CSS selectors, ".R1 > .pin1" means "connect to the first pin of the component R1"',
  "You can use the [sel](https://docs.tscircuit.com/guides/using-sel-references) object to select pins in a type-safe way",
  "Publish modules via the [registry](https://tscircuit.com/trending) for working with a team or sharing your work",
  "[Explore tutorials](https://docs.tscircuit.com/category/tutorials) for real-world circuit design examples.",
  "Upload your Circuit JSON to [circuitjson.com](https://circuitjson.com) for a quick preview.",
  "You can display Circuit JSON in 3D, PCB or Schematic mode with the [<CircuitJsonPreview />](https://docs.tscircuit.com/guides/running-tscircuit/displaying-circuit-json-on-a-webpage#react-display-all-available-previews-with-circuitjsonpreview-) React component",
  "Use a [<group />](https://docs.tscircuit.com/elements/group) element to move multiple components at once in a schematic or PCB layout.",
  "Check out the [GitHub Discussions page](https://github.com/tscircuit/tscircuit/discussions) to upvote features",
  "You can customize the autorouter using the [autorouter prop](https://docs.tscircuit.com/elements/board#setting-the-autorouter)",
  "Use the [<constraint />](https://docs.tscircuit.com/footprints/constraint) element to enforce geometric relationships in PCB designs.",
  "Join the [Discord server](https://tscircuit.com/join) to discuss issues and get help directly from the community."
];
var getRandomTipForUser = () => {
  let tip = tips[Math.floor(Math.random() * tips.length)];
  tip = tip.replace(/</g, "&lt;");
  tip = tip.replace(/>/g, "&gt;");
  tip = tip.replace(
    /(?<!href=")(?<!\()(?<!\]\()(https?:\/\/[^\s\)\]]+)/g,
    (match, p1) => `<a class="rf-text-blue-500 rf-underline"  href="${match}" target="_blank">${match}</a>`
  );
  tip = tip.replace(
    /\[([^\]]+)\]\((https?:\/\/[^\)]+)\)/g,
    '<a class="rf-text-blue-500 rf-underline" href="$2" target="_blank">$1</a>'
  );
  return tip;
};

// lib/components/PreviewEmptyState.tsx
import { LightbulbIcon, PlayIcon } from "lucide-react";
import { jsx as jsx7, jsxs as jsxs5 } from "react/jsx-runtime";
var tipHtml = getRandomTipForUser();
var PreviewEmptyState = ({ onRunClicked }) => {
  return /* @__PURE__ */ jsxs5("div", { className: "rf-flex rf-flex-col rf-items-center rf-justify-center rf-h-full rf-bg-gray-50 rf-text-gray-500 rf-p-4", children: [
    /* @__PURE__ */ jsx7(LightbulbIcon, { className: "rf-size-14 rf-mb-4" }),
    /* @__PURE__ */ jsxs5("p", { className: "rf-text-md rf-break-words rf-max-w-xl rf-text-center", children: [
      "Tip: ",
      /* @__PURE__ */ jsx7("span", { dangerouslySetInnerHTML: { __html: tipHtml } })
    ] }),
    onRunClicked && /* @__PURE__ */ jsxs5(
      Button,
      {
        className: "rf-mt-4 rf-bg-blue-600 rf-hover:bg-blue-500",
        onClick: onRunClicked,
        children: [
          "Run Code",
          /* @__PURE__ */ jsx7(PlayIcon, { className: "rf-w-3 rf-h-3 rf-ml-2" })
        ]
      }
    )
  ] });
};
var PreviewEmptyState_default = PreviewEmptyState;

// lib/components/CircuitJsonTableViewer/CircuitJsonTableViewer.tsx
import { useReducer, useState as useState2 } from "react";

// lib/components/CircuitJsonTableViewer/ClickableText.tsx
import { jsx as jsx8 } from "react/jsx-runtime";
var ClickableText = ({
  text,
  onClick
}) => {
  return /* @__PURE__ */ jsx8(
    "span",
    {
      className: "rf-cursor-pointer rf-underline rf-text-blue-600 rf-mx-2",
      onClick,
      children: text
    }
  );
};

// lib/components/CircuitJsonTableViewer/HeaderCell.tsx
import { jsx as jsx9, jsxs as jsxs6 } from "react/jsx-runtime";
var HeaderCell = (p) => {
  return /* @__PURE__ */ jsxs6("div", { className: "rf-leading-5", children: [
    /* @__PURE__ */ jsx9("div", { className: "rf-py-2 rf-font-bold", children: p.column.name }),
    /* @__PURE__ */ jsx9("div", { children: p.field?.() ?? /* @__PURE__ */ jsx9(
      "input",
      {
        type: "text",
        className: "rf-border rf-rounded rf-p-1 rf-w-full",
        onChange: (e) => {
          p.onTextChange?.(e.target.value);
        }
      }
    ) })
  ] });
};

// lib/components/CircuitJsonTableViewer/Modal.tsx
import { jsx as jsx10, jsxs as jsxs7 } from "react/jsx-runtime";
var Modal = ({ open, children, title, onClose }) => {
  if (!open) return null;
  return /* @__PURE__ */ jsx10(
    "div",
    {
      className: "rf-fixed rf-inset-0 rf-bg-black rf-bg-opacity-50 rf-flex rf-justify-center rf-items-center rf-z-50",
      onClick: onClose,
      children: /* @__PURE__ */ jsxs7(
        "div",
        {
          className: "rf-bg-white rf-p-5 rf-rounded-lg rf-relative rf-w-11/12 rf-max-w-2xl",
          onClick: (e) => {
            e.preventDefault();
            e.stopPropagation();
          },
          children: [
            /* @__PURE__ */ jsx10("h2", { className: "rf-mt-0 rf-text-md rf-pb-4", children: title }),
            /* @__PURE__ */ jsx10(
              "button",
              {
                type: "button",
                className: "rf-absolute rf-top-2 rf-right-4 rf-text-2xl rf-font-bold",
                onClick: onClose,
                children: "\xD7"
              }
            ),
            children
          ]
        }
      )
    }
  );
};
var Modal_default = Modal;

// lib/components/CircuitJsonTableViewer/CircuitJsonTableViewer.tsx
import { jsx as jsx11, jsxs as jsxs8 } from "react/jsx-runtime";
var CircuitJsonTableViewer = ({
  elements
}) => {
  const [modal, setModal] = useState2({ open: false });
  const [filters, setFilter] = useReducer(
    (s, a) => ({
      ...s,
      ...a
    }),
    {}
  );
  const element_types = [...new Set(elements.map((e) => e.type))];
  const elements2 = elements.map((e) => {
    const primary_id = e[`${e.type}_id`];
    const other_ids = Object.fromEntries(
      Object.entries(e).filter(([k]) => {
        if (k === `${e.type}_id`) return false;
        if (!k.endsWith("_id")) return false;
        return true;
      })
    );
    const other_props = Object.fromEntries(
      Object.entries(e).filter(([k]) => !k.endsWith("_id"))
    );
    return {
      primary_id,
      other_ids,
      ...other_props,
      _og_elm: e
    };
  });
  const elements3 = elements2.map((e) => {
    let selector_path = "";
    const getSelectorPath = (e2) => {
      const parent_key = Object.keys(e2.other_ids).find(
        (k) => k.startsWith("source_")
      );
      if (!parent_key) return `.${e2.name}`;
      const parent_type = parent_key.slice(0, -3);
      const parent = elements2.find(
        (p) => p.type === parent_type && p.primary_id === e2.other_ids[parent_key]
      );
      if (!parent) return `??? > .${e2.name}`;
      if (!("name" in parent)) return `#${parent.primary_id} > .${e2.name}`;
      return `${getSelectorPath(parent)} > .${e2.name}`;
    };
    if ("name" in e) {
      selector_path = getSelectorPath(e);
    }
    return {
      ...e,
      selector_path
    };
  });
  const columns = [
    {
      key: "primary_id",
      name: "primary_id",
      renderCell: (row) => /* @__PURE__ */ jsxs8("div", { className: "rf-flex rf-items-center", children: [
        /* @__PURE__ */ jsx11(
          ClickableText,
          {
            text: row.primary_id,
            onClick: () => setFilter({
              focused_id: row.primary_id,
              id_search: void 0,
              selector_search: void 0
            })
          }
        ),
        /* @__PURE__ */ jsx11("span", { className: "rf-flex-grow" }),
        /* @__PURE__ */ jsx11(
          ClickableText,
          {
            text: "(JSON)",
            onClick: () => setModal({
              open: true,
              element: row._og_elm,
              title: row.primary_id
            })
          }
        )
      ] }),
      renderHeaderCell: (col) => /* @__PURE__ */ jsx11(
        HeaderCell,
        {
          column: col,
          onTextChange: (v) => setFilter({ id_search: v }),
          field: !filters.focused_id ? void 0 : () => /* @__PURE__ */ jsxs8("div", { children: [
            "Focus:",
            " ",
            /* @__PURE__ */ jsx11("span", { className: "rf-underline", children: filters.focused_id }),
            /* @__PURE__ */ jsx11(
              ClickableText,
              {
                text: "(unfocus)",
                onClick: () => setFilter({ focused_id: void 0 })
              }
            )
          ] })
        }
      )
    },
    {
      key: "type",
      name: "type",
      renderHeaderCell: (col) => /* @__PURE__ */ jsx11(
        HeaderCell,
        {
          column: col,
          field: () => /* @__PURE__ */ jsxs8(
            "select",
            {
              onChange: (e) => setFilter({ component_type_filter: e.target.value }),
              className: "rf-border rf-rounded rf-p-1 rf-w-full",
              children: [
                /* @__PURE__ */ jsx11("option", { value: "any", children: "any" }, "any"),
                /* @__PURE__ */ jsx11("option", { value: "source", children: "source" }, "source"),
                /* @__PURE__ */ jsx11("option", { value: "source/pcb", children: "source/pcb" }, "source/pcb"),
                /* @__PURE__ */ jsx11("option", { value: "source/schematic", children: "source/schematic" }, "source/schematic"),
                element_types.map((type) => /* @__PURE__ */ jsx11("option", { value: type, children: type }, type))
              ]
            }
          )
        }
      )
    },
    {
      key: "name",
      name: "name",
      renderHeaderCell: (col) => /* @__PURE__ */ jsx11(
        HeaderCell,
        {
          column: col,
          onTextChange: (t) => setFilter({ name_search: t })
        }
      )
    },
    {
      key: "selector_path",
      name: "selector_path",
      renderHeaderCell: (col) => /* @__PURE__ */ jsx11(
        HeaderCell,
        {
          column: col,
          onTextChange: (t) => setFilter({ selector_search: t })
        }
      )
    },
    {
      key: "other_ids",
      name: "other_ids",
      renderCell: (row) => /* @__PURE__ */ jsx11("div", { className: "rf-space-x-2", children: Object.entries(row.other_ids).map(([other_id, v]) => /* @__PURE__ */ jsx11(
        ClickableText,
        {
          text: v,
          onClick: () => setFilter({ focused_id: v })
        },
        v
      )) })
    }
  ];
  const elements4 = elements3.filter((e) => {
    if (!filters.name_search) return true;
    return e.name?.toLowerCase()?.includes(filters.name_search.toLowerCase());
  }).filter((e) => {
    if (!filters.component_type_filter) return true;
    if (filters.component_type_filter === "any") return true;
    if (filters.component_type_filter === "source") {
      return e.type.startsWith("source_");
    }
    if (filters.component_type_filter === "source/pcb") {
      return e.type.startsWith("source_") || e.type.startsWith("pcb_");
    }
    if (filters.component_type_filter === "source/schematic") {
      return e.type.startsWith("source_") || e.type.startsWith("schematic_");
    }
    return e.type?.includes(filters.component_type_filter);
  }).filter((e) => {
    if (!filters.selector_search) return true;
    const parts = filters.selector_search.split(" ").filter((p) => p.length > 0);
    return parts.every((part) => e.selector_path?.includes(part));
  }).filter((e) => {
    if (!filters.id_search) return true;
    return e.primary_id?.includes(filters.id_search);
  }).filter((e) => {
    if (!filters.focused_id) return true;
    if (e.primary_id === filters.focused_id) return true;
    if (Object.values(e.other_ids).includes(filters.focused_id)) return true;
    return false;
  });
  return /* @__PURE__ */ jsxs8("div", { className: "rf-font-mono rf-text-xs rf-bg-white", children: [
    /* @__PURE__ */ jsx11("div", { className: "rf-overflow-x-auto", children: /* @__PURE__ */ jsxs8("table", { className: "rf-table-auto rf-w-full rf-text-left", children: [
      /* @__PURE__ */ jsx11("thead", { children: /* @__PURE__ */ jsx11("tr", { children: columns.map((col) => /* @__PURE__ */ jsx11("th", { className: "rf-px-4 rf-py-2 rf-border-b", children: col.renderHeaderCell ? col.renderHeaderCell(col) : col.name }, col.key)) }) }),
      /* @__PURE__ */ jsx11("tbody", { children: elements4.map((row, rowIndex) => /* @__PURE__ */ jsx11("tr", { className: "rf-hover:bg-gray-100", children: columns.map((col) => /* @__PURE__ */ jsx11("td", { className: "rf-px-4 rf-py-2 rf-border-b", children: col.renderCell ? col.renderCell(row) : row[col.key] }, col.key)) }, rowIndex)) })
    ] }) }),
    /* @__PURE__ */ jsx11(
      Modal_default,
      {
        open: modal.open,
        onClose: () => setModal({ open: false }),
        title: modal.open ? modal.title : "",
        children: /* @__PURE__ */ jsx11("div", { className: "rf-bg-gray-800 rf-p-3 rf-text-white rf-rounded", children: /* @__PURE__ */ jsx11("pre", { className: "rf-whitespace-pre-wrap", children: modal.open ? JSON.stringify(modal.element, null, 2) : "" }) })
      }
    )
  ] });
};

// lib/components/BomTable.tsx
import { jsx as jsx12, jsxs as jsxs9 } from "react/jsx-runtime";
var linkify = (supplier, partNumber) => {
  if (supplier === "jlcpcb") {
    return /* @__PURE__ */ jsx12(
      "a",
      {
        className: "rf-underline rf-text-blue-500",
        target: "_blank",
        rel: "noreferrer",
        href: `https://jlcpcb.com/partdetail/${partNumber}`,
        children: partNumber
      }
    );
  }
  return partNumber;
};
var BomTable = ({ circuitJson }) => {
  const sourceComponents = circuitJson.filter(
    (el) => el.type === "source_component"
  );
  const supplierColumns = /* @__PURE__ */ new Set();
  for (const comp of sourceComponents) {
    if (comp.supplier_part_numbers) {
      for (const supplier of Object.keys(comp.supplier_part_numbers)) {
        supplierColumns.add(supplier);
      }
    }
  }
  return /* @__PURE__ */ jsx12("div", { className: "rf-overflow-x-auto", children: /* @__PURE__ */ jsxs9("table", { className: "rf-w-full rf-text-left rf-text-sm", children: [
    /* @__PURE__ */ jsx12("thead", { children: /* @__PURE__ */ jsxs9("tr", { className: "rf-border-b", children: [
      /* @__PURE__ */ jsx12("th", { className: "rf-p-2", children: "Name" }),
      Array.from(supplierColumns).map((supplier) => /* @__PURE__ */ jsx12("th", { className: "rf-p-2 rf-capitalize", children: supplier }, supplier))
    ] }) }),
    /* @__PURE__ */ jsx12("tbody", { children: sourceComponents.map((comp) => /* @__PURE__ */ jsxs9("tr", { className: "rf-border-b", children: [
      /* @__PURE__ */ jsx12("td", { className: "rf-p-2", children: comp.name }),
      Array.from(supplierColumns).map((supplier) => /* @__PURE__ */ jsx12("td", { className: "rf-p-2", children: linkify(
        supplier,
        comp.supplier_part_numbers?.[supplier]?.[0] || ""
      ) }, supplier))
    ] }, comp.source_component_id)) })
  ] }) });
};

// lib/components/CircuitJsonPreview/CircuitJsonPreview.tsx
import {
  CheckIcon,
  EllipsisIcon,
  FullscreenIcon,
  Loader2 as Loader25,
  LoaderCircleIcon,
  MinimizeIcon,
  Circle as Circle2
} from "lucide-react";

// lib/components/ui/input.tsx
import * as React5 from "react";
import { jsx as jsx13 } from "react/jsx-runtime";
var Input = React5.forwardRef(
  ({ className, type, ...props }, ref) => {
    return /* @__PURE__ */ jsx13(
      "input",
      {
        type,
        className: cn(
          "rf-flex rf-h-9 rf-w-full rf-rounded-md rf-border rf-border-zinc-200 rf-bg-white rf-px-3 rf-py-1 rf-text-sm rf-shadow-sm rf-transition-colors file:rf-border-0 file:rf-bg-transparent file:rf-text-sm file:rf-font-medium placeholder:rf-text-zinc-500 focus-visible:rf-outline-none focus-visible:rf-ring-1 focus-visible:rf-ring-zinc-950 disabled:rf-cursor-not-allowed disabled:rf-opacity-50 dark:rf-border-zinc-800 dark:rf-bg-zinc-950 dark:rf-placeholder-zinc-400 dark:focus-visible:rf-ring-zinc-300",
          className
        ),
        ref,
        ...props
      }
    );
  }
);
Input.displayName = "Input";

// lib/components/PcbViewerWithContainerHeight.tsx
import { useRef, useState as useState3, useLayoutEffect } from "react";
import { PCBViewer } from "@tscircuit/pcb-viewer";
import { jsx as jsx14 } from "react/jsx-runtime";
var PcbViewerWithContainerHeight = ({
  containerClassName,
  ...props
}) => {
  const containerRef = useRef(null);
  const [computedHeight, setComputedHeight] = useState3(620);
  useLayoutEffect(() => {
    const updateHeight = () => {
      if (containerRef.current) {
        const containerHeight = containerRef.current.clientHeight;
        const screenHeight = window.innerHeight;
        setComputedHeight(
          Math.min(Math.max(containerHeight, 620), screenHeight)
        );
      }
    };
    updateHeight();
    const resizeObserver = new ResizeObserver(updateHeight);
    if (containerRef.current) {
      resizeObserver.observe(containerRef.current);
    }
    window.addEventListener("resize", updateHeight);
    return () => {
      resizeObserver.disconnect();
      window.removeEventListener("resize", updateHeight);
    };
  }, []);
  return /* @__PURE__ */ jsx14(
    "div",
    {
      ref: containerRef,
      className: containerClassName || "rf-w-full rf-h-full",
      children: /* @__PURE__ */ jsx14(PCBViewer, { ...props, height: computedHeight })
    }
  );
};

// lib/hooks/use-styles.ts
import { useEffect as useEffect2 } from "react";

// lib/hooks/styles.generated.ts
var styles_generated_default = '*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.18 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}:root{--radius:0.5rem}.rf-pointer-events-none{pointer-events:none}.rf-invisible{visibility:hidden}.rf-fixed{position:fixed}.rf-absolute{position:absolute}.rf-relative{position:relative}.rf-inset-0{inset:0}.-rf-left-2{left:-.5rem}.-rf-right-10{right:-2.5rem}.-rf-right-2{right:-.5rem}.-rf-right-4{right:-1rem}.-rf-right-6{right:-1.5rem}.-rf-right-7{right:-1.75rem}.-rf-right-8{right:-2rem}.-rf-right-9{right:-2.25rem}.rf-bottom-full{bottom:100%}.rf-left-0{left:0}.rf-left-1{left:.25rem}.rf-left-1\\/2{left:50%}.rf-left-2{left:.5rem}.rf-left-\\[50\\%\\]{left:50%}.rf-right-0{right:0}.rf-right-1{right:.25rem}.rf-right-4{right:1rem}.rf-right-\\[4px\\]{right:4px}.rf-top-0{top:0}.rf-top-1{top:.25rem}.rf-top-2{top:.5rem}.rf-top-2\\.5{top:.625rem}.rf-top-\\[50\\%\\]{top:50%}.rf-top-\\[6px\\]{top:6px}.\\!rf-z-\\[101\\]{z-index:101!important}.\\!rf-z-\\[200\\]{z-index:200!important}.rf-z-10{z-index:10}.rf-z-50{z-index:50}.rf-z-\\[100\\]{z-index:100}.rf-z-\\[101\\]{z-index:101}.rf-order-1{order:1}.rf-order-2{order:2}.rf-order-3{order:3}.rf-m-1{margin:.25rem}.rf-m-6{margin:1.5rem}.-rf-mx-1,.rf--mx-1{margin-left:-.25rem;margin-right:-.25rem}.rf-mx-1{margin-left:.25rem;margin-right:.25rem}.rf-mx-2{margin-left:.5rem;margin-right:.5rem}.rf-mx-4{margin-left:1rem;margin-right:1rem}.rf-mx-auto{margin-left:auto;margin-right:auto}.rf-my-1{margin-bottom:.25rem;margin-top:.25rem}.rf-my-12{margin-bottom:3rem;margin-top:3rem}.rf-my-4{margin-bottom:1rem;margin-top:1rem}.rf-my-auto{margin-bottom:auto;margin-top:auto}.rf-mb-1{margin-bottom:.25rem}.rf-mb-12{margin-bottom:3rem}.rf-mb-2{margin-bottom:.5rem}.rf-mb-3{margin-bottom:.75rem}.rf-mb-4{margin-bottom:1rem}.rf-mb-6{margin-bottom:1.5rem}.rf-mb-8{margin-bottom:2rem}.rf-ml-1{margin-left:.25rem}.rf-ml-2{margin-left:.5rem}.rf-ml-6{margin-left:1.5rem}.rf-ml-auto{margin-left:auto}.rf-mr-1{margin-right:.25rem}.rf-mr-2{margin-right:.5rem}.rf-mr-4{margin-right:1rem}.rf-mt-0{margin-top:0}.rf-mt-0\\.5{margin-top:.125rem}.rf-mt-1{margin-top:.25rem}.rf-mt-2{margin-top:.5rem}.rf-mt-3{margin-top:.75rem}.rf-mt-4{margin-top:1rem}.rf-mt-5{margin-top:1.25rem}.rf-mt-auto{margin-top:auto}.rf-block{display:block}.rf-inline-block{display:inline-block}.rf-inline{display:inline}.rf-flex{display:flex}.rf-inline-flex{display:inline-flex}.rf-grid{display:grid}.rf-hidden{display:none}.rf-aspect-square{aspect-ratio:1/1}.rf-aspect-video{aspect-ratio:16/9}.rf-size-14{height:3.5rem;width:3.5rem}.rf-size-4{height:1rem;width:1rem}.\\!rf-h-2{height:.5rem!important}.\\!rf-h-2\\.5{height:.625rem!important}.\\!rf-h-3{height:.75rem!important}.\\!rf-h-full{height:100%!important}.rf-h-1{height:.25rem}.rf-h-10{height:2.5rem}.rf-h-12{height:3rem}.rf-h-2{height:.5rem}.rf-h-2\\.5{height:.625rem}.rf-h-20{height:5rem}.rf-h-24{height:6rem}.rf-h-3{height:.75rem}.rf-h-3\\.5{height:.875rem}.rf-h-4{height:1rem}.rf-h-5{height:1.25rem}.rf-h-6{height:1.5rem}.rf-h-60{height:15rem}.rf-h-64{height:16rem}.rf-h-7{height:1.75rem}.rf-h-8{height:2rem}.rf-h-9{height:2.25rem}.rf-h-\\[400px\\]{height:400px}.rf-h-\\[calc\\(100vh-52px\\)\\]{height:calc(100vh - 52px)}.rf-h-\\[calc\\(100vh-60px\\)\\]{height:calc(100vh - 60px)}.rf-h-\\[var\\(--radix-select-trigger-height\\)\\]{height:var(--radix-select-trigger-height)}.rf-h-auto{height:auto}.rf-h-fit{height:-moz-fit-content;height:fit-content}.rf-h-full{height:100%}.rf-h-px{height:1px}.rf-h-screen{height:100vh}.\\!rf-max-h-\\[40vh\\]{max-height:40vh!important}.rf-max-h-32{max-height:8rem}.rf-max-h-96{max-height:24rem}.rf-max-h-\\[200px\\]{max-height:200px}.rf-max-h-\\[300px\\]{max-height:300px}.rf-max-h-\\[70vh\\]{max-height:70vh}.rf-max-h-\\[90vh\\]{max-height:90vh}.rf-max-h-full{max-height:100%}.rf-min-h-0{min-height:0}.rf-min-h-\\[100px\\]{min-height:100px}.rf-min-h-\\[200px\\]{min-height:200px}.rf-min-h-\\[300px\\]{min-height:300px}.rf-min-h-\\[620px\\]{min-height:620px}.rf-min-h-\\[calc\\(100vh-240px\\)\\]{min-height:calc(100vh - 240px)}.\\!rf-w-2{width:.5rem!important}.\\!rf-w-2\\.5{width:.625rem!important}.\\!rf-w-\\[95vw\\]{width:95vw!important}.rf-w-1{width:.25rem}.rf-w-11{width:2.75rem}.rf-w-11\\/12{width:91.666667%}.rf-w-12{width:3rem}.rf-w-16{width:4rem}.rf-w-2{width:.5rem}.rf-w-2\\.5{width:.625rem}.rf-w-20{width:5rem}.rf-w-24{width:6rem}.rf-w-28{width:7rem}.rf-w-3{width:.75rem}.rf-w-3\\.5{width:.875rem}.rf-w-32{width:8rem}.rf-w-4{width:1rem}.rf-w-40{width:10rem}.rf-w-48{width:12rem}.rf-w-5{width:1.25rem}.rf-w-6{width:1.5rem}.rf-w-64{width:16rem}.rf-w-72{width:18rem}.rf-w-8{width:2rem}.rf-w-80{width:20rem}.rf-w-9{width:2.25rem}.rf-w-96{width:24rem}.rf-w-fit{width:-moz-fit-content;width:fit-content}.rf-w-full{width:100%}.rf-w-screen{width:100vw}.rf-min-w-0{min-width:0}.rf-min-w-10{min-width:2.5rem}.rf-min-w-16{min-width:4rem}.rf-min-w-32{min-width:8rem}.rf-min-w-80{min-width:20rem}.rf-min-w-96{min-width:24rem}.rf-min-w-\\[148px\\]{min-width:148px}.rf-min-w-\\[600px\\]{min-width:600px}.rf-min-w-\\[8rem\\]{min-width:8rem}.rf-min-w-\\[var\\(--radix-select-trigger-width\\)\\]{min-width:var(--radix-select-trigger-width)}.\\!rf-max-w-\\[95vw\\]{max-width:95vw!important}.rf-max-w-2xl{max-width:42rem}.rf-max-w-3xl{max-width:48rem}.rf-max-w-4xl{max-width:56rem}.rf-max-w-5xl{max-width:64rem}.rf-max-w-64{max-width:16rem}.rf-max-w-96{max-width:24rem}.rf-max-w-\\[1000px\\]{max-width:1000px}.rf-max-w-\\[150px\\]{max-width:150px}.rf-max-w-\\[200px\\]{max-width:200px}.rf-max-w-\\[40\\%\\]{max-width:40%}.rf-max-w-\\[600px\\]{max-width:600px}.rf-max-w-full{max-width:100%}.rf-max-w-lg{max-width:32rem}.rf-max-w-md{max-width:28rem}.rf-max-w-none{max-width:none}.rf-max-w-xl{max-width:36rem}.rf-max-w-xs{max-width:20rem}.rf-flex-1{flex:1 1 0%}.rf-flex-shrink-0,.rf-shrink-0{flex-shrink:0}.rf-flex-grow{flex-grow:1}.rf-table-auto{table-layout:auto}.rf-origin-\\[--radix-popover-content-transform-origin\\]{transform-origin:var(--radix-popover-content-transform-origin)}.-rf-translate-x-1{--tw-translate-x:-0.25rem}.-rf-translate-x-1,.-rf-translate-x-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rf-translate-x-1\\/2{--tw-translate-x:-50%}.-rf-translate-y-1{--tw-translate-y:-0.25rem}.-rf-translate-y-1,.rf--translate-x-1{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rf--translate-x-1{--tw-translate-x:-0.25rem}.rf--translate-x-1\\/2{--tw-translate-x:-50%}.rf--translate-x-1\\/2,.rf--translate-y-1{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rf--translate-y-1{--tw-translate-y:-0.25rem}.rf-translate-x-\\[-50\\%\\]{--tw-translate-x:-50%}.rf-translate-x-\\[-50\\%\\],.rf-translate-y-\\[-50\\%\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rf-translate-y-\\[-50\\%\\]{--tw-translate-y:-50%}.rf-rotate-90{--tw-rotate:90deg}.rf-rotate-90,.rf-transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes rf-pulse{50%{opacity:.5}}.rf-animate-pulse{animation:rf-pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes rf-spin{to{transform:rotate(1turn)}}.rf-animate-spin{animation:rf-spin 1s linear infinite}.rf-cursor-default{cursor:default}.rf-cursor-not-allowed{cursor:not-allowed}.rf-cursor-pointer{cursor:pointer}.rf-select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.rf-grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.rf-grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.rf-grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.rf-flex-row{flex-direction:row}.rf-flex-col{flex-direction:column}.rf-flex-col-reverse{flex-direction:column-reverse}.rf-flex-wrap{flex-wrap:wrap}.rf-place-items-center{place-items:center}.rf-items-start{align-items:flex-start}.rf-items-end{align-items:flex-end}.rf-items-center{align-items:center}.rf-items-baseline{align-items:baseline}.rf-items-stretch{align-items:stretch}.rf-justify-end{justify-content:flex-end}.rf-justify-center{justify-content:center}.rf-justify-between{justify-content:space-between}.rf-gap-0{gap:0}.rf-gap-1{gap:.25rem}.rf-gap-2{gap:.5rem}.rf-gap-3{gap:.75rem}.rf-gap-4{gap:1rem}.rf-gap-5{gap:1.25rem}.rf-gap-6{gap:1.5rem}.rf-gap-8{gap:2rem}.rf-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.rf-space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.25rem*var(--tw-space-y-reverse));margin-top:calc(.25rem*(1 - var(--tw-space-y-reverse)))}.rf-space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.5rem*var(--tw-space-y-reverse));margin-top:calc(.5rem*(1 - var(--tw-space-y-reverse)))}.rf-space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.75rem*var(--tw-space-y-reverse));margin-top:calc(.75rem*(1 - var(--tw-space-y-reverse)))}.rf-space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1rem*var(--tw-space-y-reverse));margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)))}.rf-space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1.5rem*var(--tw-space-y-reverse));margin-top:calc(1.5rem*(1 - var(--tw-space-y-reverse)))}.rf-divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.rf-overflow-auto{overflow:auto}.\\!rf-overflow-hidden{overflow:hidden!important}.rf-overflow-hidden{overflow:hidden}.rf-overflow-visible{overflow:visible}.rf-overflow-x-auto{overflow-x:auto}.\\!rf-overflow-y-auto{overflow-y:auto!important}.rf-overflow-y-auto{overflow-y:auto}.rf-overflow-x-hidden{overflow-x:hidden}.rf-overflow-x-clip{overflow-x:clip}.rf-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rf-whitespace-normal{white-space:normal}.rf-whitespace-nowrap{white-space:nowrap}.rf-whitespace-pre-wrap{white-space:pre-wrap}.rf-break-words{overflow-wrap:break-word}.rf-break-all{word-break:break-all}.rf-rounded{border-radius:.25rem}.rf-rounded-2xl{border-radius:1rem}.rf-rounded-full{border-radius:9999px}.rf-rounded-lg{border-radius:var(--radius)}.rf-rounded-md{border-radius:calc(var(--radius) - 2px)}.rf-rounded-sm{border-radius:calc(var(--radius) - 4px)}.rf-rounded-xl{border-radius:.75rem}.rf-border{border-width:1px}.rf-border-2{border-width:2px}.rf-border-b{border-bottom-width:1px}.rf-border-l-2{border-left-width:2px}.rf-border-l-4{border-left-width:4px}.rf-border-t{border-top-width:1px}.rf-border-none{border-style:none}.rf-border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254/var(--tw-border-opacity,1))}.rf-border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity,1))}.rf-border-blue-400{--tw-border-opacity:1;border-color:rgb(96 165 250/var(--tw-border-opacity,1))}.rf-border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity,1))}.rf-border-blue-600{--tw-border-opacity:1;border-color:rgb(37 99 235/var(--tw-border-opacity,1))}.rf-border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.rf-border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity,1))}.rf-border-green-200{--tw-border-opacity:1;border-color:rgb(187 247 208/var(--tw-border-opacity,1))}.rf-border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity,1))}.rf-border-input{border-color:hsl(var(--input))}.rf-border-neutral-200{--tw-border-opacity:1;border-color:rgb(229 229 229/var(--tw-border-opacity,1))}.rf-border-orange-100{--tw-border-opacity:1;border-color:rgb(255 237 213/var(--tw-border-opacity,1))}.rf-border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170/var(--tw-border-opacity,1))}.rf-border-orange-500{--tw-border-opacity:1;border-color:rgb(249 115 22/var(--tw-border-opacity,1))}.rf-border-primary{border-color:hsl(var(--primary))}.rf-border-red-100{--tw-border-opacity:1;border-color:rgb(254 226 226/var(--tw-border-opacity,1))}.rf-border-red-200{--tw-border-opacity:1;border-color:rgb(254 202 202/var(--tw-border-opacity,1))}.rf-border-red-400{--tw-border-opacity:1;border-color:rgb(248 113 113/var(--tw-border-opacity,1))}.rf-border-red-500{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity,1))}.rf-border-red-600{--tw-border-opacity:1;border-color:rgb(220 38 38/var(--tw-border-opacity,1))}.rf-border-zinc-200{--tw-border-opacity:1;border-color:rgb(228 228 231/var(--tw-border-opacity,1))}.rf-border-zinc-900{--tw-border-opacity:1;border-color:rgb(24 24 27/var(--tw-border-opacity,1))}.rf-bg-amber-50{--tw-bg-opacity:1;background-color:rgb(255 251 235/var(--tw-bg-opacity,1))}.rf-bg-amber-50\\/30{background-color:rgba(255,251,235,.3)}.rf-bg-background{background-color:hsl(var(--background))}.rf-bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity,1))}.rf-bg-black\\/80{background-color:rgba(0,0,0,.8)}.rf-bg-blue-100{--tw-bg-opacity:1;background-color:rgb(219 234 254/var(--tw-bg-opacity,1))}.rf-bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255/var(--tw-bg-opacity,1))}.rf-bg-blue-50\\/30{background-color:rgba(239,246,255,.3)}.rf-bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity,1))}.rf-bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity,1))}.rf-bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity,1))}.rf-bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity,1))}.rf-bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219/var(--tw-bg-opacity,1))}.rf-bg-gray-400{--tw-bg-opacity:1;background-color:rgb(156 163 175/var(--tw-bg-opacity,1))}.rf-bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity,1))}.rf-bg-gray-500{--tw-bg-opacity:1;background-color:rgb(107 114 128/var(--tw-bg-opacity,1))}.rf-bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.rf-bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1))}.rf-bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39/var(--tw-bg-opacity,1))}.rf-bg-green-100{--tw-bg-opacity:1;background-color:rgb(220 252 231/var(--tw-bg-opacity,1))}.rf-bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244/var(--tw-bg-opacity,1))}.rf-bg-muted{background-color:hsl(var(--muted))}.rf-bg-neutral-100{--tw-bg-opacity:1;background-color:rgb(245 245 245/var(--tw-bg-opacity,1))}.rf-bg-neutral-50{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.rf-bg-neutral-800{--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity,1))}.rf-bg-neutral-900{--tw-bg-opacity:1;background-color:rgb(23 23 23/var(--tw-bg-opacity,1))}.rf-bg-orange-400{--tw-bg-opacity:1;background-color:rgb(251 146 60/var(--tw-bg-opacity,1))}.rf-bg-orange-50{--tw-bg-opacity:1;background-color:rgb(255 247 237/var(--tw-bg-opacity,1))}.rf-bg-orange-50\\/50{background-color:rgba(255,247,237,.5)}.rf-bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22/var(--tw-bg-opacity,1))}.rf-bg-popover{background-color:hsl(var(--popover))}.rf-bg-red-100{--tw-bg-opacity:1;background-color:rgb(254 226 226/var(--tw-bg-opacity,1))}.rf-bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242/var(--tw-bg-opacity,1))}.rf-bg-red-50\\/50{background-color:hsla(0,86%,97%,.5)}.rf-bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity,1))}.rf-bg-red-600{--tw-bg-opacity:1;background-color:rgb(220 38 38/var(--tw-bg-opacity,1))}.rf-bg-red-900{--tw-bg-opacity:1;background-color:rgb(127 29 29/var(--tw-bg-opacity,1))}.rf-bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252/var(--tw-bg-opacity,1))}.rf-bg-transparent{background-color:transparent}.rf-bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.rf-bg-yellow-100{--tw-bg-opacity:1;background-color:rgb(254 249 195/var(--tw-bg-opacity,1))}.rf-bg-zinc-100{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity,1))}.rf-bg-zinc-200{--tw-bg-opacity:1;background-color:rgb(228 228 231/var(--tw-bg-opacity,1))}.rf-bg-zinc-50{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.rf-bg-zinc-800{--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.rf-bg-zinc-900{--tw-bg-opacity:1;background-color:rgb(24 24 27/var(--tw-bg-opacity,1))}.rf-bg-opacity-50{--tw-bg-opacity:0.5}.rf-fill-amber-500{fill:#f59e0b}.rf-fill-current{fill:currentColor}.rf-object-contain{-o-object-fit:contain;object-fit:contain}.rf-object-cover{-o-object-fit:cover;object-fit:cover}.\\!rf-p-0{padding:0!important}.rf-p-0{padding:0}.rf-p-1{padding:.25rem}.rf-p-2{padding:.5rem}.rf-p-3{padding:.75rem}.rf-p-4{padding:1rem}.rf-p-5{padding:1.25rem}.rf-p-6{padding:1.5rem}.rf-p-8{padding:2rem}.rf-px-1{padding-left:.25rem;padding-right:.25rem}.rf-px-2{padding-left:.5rem;padding-right:.5rem}.rf-px-3{padding-left:.75rem;padding-right:.75rem}.rf-px-4{padding-left:1rem;padding-right:1rem}.rf-px-6{padding-left:1.5rem;padding-right:1.5rem}.rf-px-8{padding-left:2rem;padding-right:2rem}.rf-py-0{padding-bottom:0;padding-top:0}.rf-py-0\\.5{padding-bottom:.125rem;padding-top:.125rem}.rf-py-1{padding-bottom:.25rem;padding-top:.25rem}.rf-py-1\\.5{padding-bottom:.375rem;padding-top:.375rem}.rf-py-10{padding-bottom:2.5rem;padding-top:2.5rem}.rf-py-12{padding-bottom:3rem;padding-top:3rem}.rf-py-2{padding-bottom:.5rem;padding-top:.5rem}.rf-py-3{padding-bottom:.75rem;padding-top:.75rem}.rf-py-4{padding-bottom:1rem;padding-top:1rem}.rf-py-6{padding-bottom:1.5rem;padding-top:1.5rem}.rf-py-8{padding-bottom:2rem;padding-top:2rem}.rf-pb-0{padding-bottom:0}.rf-pb-1{padding-bottom:.25rem}.rf-pb-2{padding-bottom:.5rem}.rf-pb-3{padding-bottom:.75rem}.rf-pb-4{padding-bottom:1rem}.rf-pb-px{padding-bottom:1px}.rf-pl-10{padding-left:2.5rem}.rf-pl-11{padding-left:2.75rem}.rf-pl-12{padding-left:3rem}.rf-pl-2{padding-left:.5rem}.rf-pl-4{padding-left:1rem}.rf-pl-8{padding-left:2rem}.rf-pr-2{padding-right:.5rem}.rf-pt-0{padding-top:0}.rf-pt-1{padding-top:.25rem}.rf-pt-2{padding-top:.5rem}.rf-pt-4{padding-top:1rem}.rf-text-left{text-align:left}.rf-text-center{text-align:center}.rf-text-right{text-align:right}.rf-font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.rf-text-2xl{font-size:1.5rem;line-height:2rem}.rf-text-3xl{font-size:1.875rem;line-height:2.25rem}.rf-text-\\[8px\\]{font-size:8px}.rf-text-base{font-size:1rem;line-height:1.5rem}.rf-text-lg{font-size:1.125rem;line-height:1.75rem}.rf-text-sm{font-size:.875rem;line-height:1.25rem}.rf-text-xl{font-size:1.25rem;line-height:1.75rem}.rf-text-xs{font-size:.75rem;line-height:1rem}.\\!rf-font-normal{font-weight:400!important}.rf-font-bold{font-weight:700}.rf-font-medium{font-weight:500}.rf-font-semibold{font-weight:600}.rf-uppercase{text-transform:uppercase}.rf-capitalize{text-transform:capitalize}.rf-tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.rf-leading-5{line-height:1.25rem}.rf-leading-\\[0\\.95rem\\]{line-height:.95rem}.rf-leading-\\[1rem\\]{line-height:1rem}.rf-leading-none{line-height:1}.rf-leading-relaxed{line-height:1.625}.rf-leading-tight{line-height:1.25}.rf-tracking-wide{letter-spacing:.025em}.rf-tracking-widest{letter-spacing:.1em}.rf-text-amber-500{--tw-text-opacity:1;color:rgb(245 158 11/var(--tw-text-opacity,1))}.rf-text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity,1))}.rf-text-blue-500{--tw-text-opacity:1;color:rgb(59 130 246/var(--tw-text-opacity,1))}.rf-text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235/var(--tw-text-opacity,1))}.rf-text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity,1))}.rf-text-blue-800{--tw-text-opacity:1;color:rgb(30 64 175/var(--tw-text-opacity,1))}.rf-text-blue-900{--tw-text-opacity:1;color:rgb(30 58 138/var(--tw-text-opacity,1))}.rf-text-current{color:currentColor}.rf-text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}.rf-text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.rf-text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.rf-text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity,1))}.rf-text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81/var(--tw-text-opacity,1))}.rf-text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity,1))}.rf-text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity,1))}.rf-text-green-500{--tw-text-opacity:1;color:rgb(34 197 94/var(--tw-text-opacity,1))}.rf-text-green-600{--tw-text-opacity:1;color:rgb(22 163 74/var(--tw-text-opacity,1))}.rf-text-green-700{--tw-text-opacity:1;color:rgb(21 128 61/var(--tw-text-opacity,1))}.rf-text-green-800{--tw-text-opacity:1;color:rgb(22 101 52/var(--tw-text-opacity,1))}.rf-text-green-900{--tw-text-opacity:1;color:rgb(20 83 45/var(--tw-text-opacity,1))}.rf-text-muted-foreground{color:hsl(var(--muted-foreground))}.rf-text-neutral-50{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.rf-text-neutral-500{--tw-text-opacity:1;color:rgb(115 115 115/var(--tw-text-opacity,1))}.rf-text-neutral-900{--tw-text-opacity:1;color:rgb(23 23 23/var(--tw-text-opacity,1))}.rf-text-neutral-950{--tw-text-opacity:1;color:rgb(10 10 10/var(--tw-text-opacity,1))}.rf-text-orange-400{--tw-text-opacity:1;color:rgb(251 146 60/var(--tw-text-opacity,1))}.rf-text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22/var(--tw-text-opacity,1))}.rf-text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12/var(--tw-text-opacity,1))}.rf-text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12/var(--tw-text-opacity,1))}.rf-text-orange-800{--tw-text-opacity:1;color:rgb(154 52 18/var(--tw-text-opacity,1))}.rf-text-popover-foreground{color:hsl(var(--popover-foreground))}.rf-text-red-200{--tw-text-opacity:1;color:rgb(254 202 202/var(--tw-text-opacity,1))}.rf-text-red-300{--tw-text-opacity:1;color:rgb(252 165 165/var(--tw-text-opacity,1))}.rf-text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.rf-text-red-500{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity,1))}.rf-text-red-600{--tw-text-opacity:1;color:rgb(220 38 38/var(--tw-text-opacity,1))}.rf-text-red-700{--tw-text-opacity:1;color:rgb(185 28 28/var(--tw-text-opacity,1))}.rf-text-red-800{--tw-text-opacity:1;color:rgb(153 27 27/var(--tw-text-opacity,1))}.rf-text-red-900{--tw-text-opacity:1;color:rgb(127 29 29/var(--tw-text-opacity,1))}.rf-text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity,1))}.rf-text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139/var(--tw-text-opacity,1))}.rf-text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105/var(--tw-text-opacity,1))}.rf-text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59/var(--tw-text-opacity,1))}.rf-text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.rf-text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21/var(--tw-text-opacity,1))}.rf-text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity,1))}.rf-text-yellow-600{--tw-text-opacity:1;color:rgb(202 138 4/var(--tw-text-opacity,1))}.rf-text-yellow-900{--tw-text-opacity:1;color:rgb(113 63 18/var(--tw-text-opacity,1))}.rf-text-zinc-200{--tw-text-opacity:1;color:rgb(228 228 231/var(--tw-text-opacity,1))}.rf-text-zinc-300{--tw-text-opacity:1;color:rgb(212 212 216/var(--tw-text-opacity,1))}.rf-text-zinc-400{--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity,1))}.rf-text-zinc-50{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.rf-text-zinc-500{--tw-text-opacity:1;color:rgb(113 113 122/var(--tw-text-opacity,1))}.rf-text-zinc-900{--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}.rf-text-zinc-950{--tw-text-opacity:1;color:rgb(9 9 11/var(--tw-text-opacity,1))}.rf-underline{text-decoration-line:underline}.rf-line-through{text-decoration-line:line-through}.rf-underline-offset-4{text-underline-offset:4px}.rf-opacity-0{opacity:0}.rf-opacity-100{opacity:1}.rf-opacity-25{opacity:.25}.rf-opacity-30{opacity:.3}.rf-opacity-50{opacity:.5}.rf-opacity-60{opacity:.6}.rf-opacity-70{opacity:.7}.rf-opacity-75{opacity:.75}.rf-shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.rf-shadow,.rf-shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.rf-shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.rf-shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.rf-shadow-md,.rf-shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.rf-shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.rf-outline-none{outline:2px solid transparent;outline-offset:2px}.rf-ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.rf-ring-blue-500{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246/var(--tw-ring-opacity,1))}.rf-ring-primary{--tw-ring-color:hsl(var(--primary))}.rf-ring-offset-background{--tw-ring-offset-color:hsl(var(--background))}.rf-ring-offset-white{--tw-ring-offset-color:#fff}.rf-transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.rf-transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.rf-transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.rf-transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.rf-transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.rf-duration-200{transition-duration:.2s}.rf-ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity,1);transform:translate3d(var(--tw-enter-translate-x,0),var(--tw-enter-translate-y,0),0) scale3d(var(--tw-enter-scale,1),var(--tw-enter-scale,1),var(--tw-enter-scale,1)) rotate(var(--tw-enter-rotate,0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity,1);transform:translate3d(var(--tw-exit-translate-x,0),var(--tw-exit-translate-y,0),0) scale3d(var(--tw-exit-scale,1),var(--tw-exit-scale,1),var(--tw-exit-scale,1)) rotate(var(--tw-exit-rotate,0))}}.rf-slide-in-from-left-1{--tw-enter-translate-x:-0.25rem}.rf-slide-out-to-left-1{--tw-exit-translate-x:-0.25rem}.rf-duration-200{animation-duration:.2s}.rf-ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.file\\:rf-border-0::file-selector-button{border-width:0}.file\\:rf-bg-transparent::file-selector-button{background-color:transparent}.file\\:rf-text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\\:rf-font-medium::file-selector-button{font-weight:500}.placeholder\\:rf-text-zinc-500::-moz-placeholder{--tw-text-opacity:1;color:rgb(113 113 122/var(--tw-text-opacity,1))}.placeholder\\:rf-text-zinc-500::placeholder{--tw-text-opacity:1;color:rgb(113 113 122/var(--tw-text-opacity,1))}.hover\\:rf-border-blue-300:hover{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity,1))}.hover\\:rf-border-blue-500:hover{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity,1))}.hover\\:\\!rf-bg-transparent:hover{background-color:transparent!important}.hover\\:rf-bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.hover\\:rf-bg-orange-100:hover{--tw-bg-opacity:1;background-color:rgb(255 237 213/var(--tw-bg-opacity,1))}.hover\\:rf-bg-red-100:hover{--tw-bg-opacity:1;background-color:rgb(254 226 226/var(--tw-bg-opacity,1))}.hover\\:rf-bg-red-500\\/90:hover{background-color:rgba(239,68,68,.9)}.hover\\:rf-bg-slate-200:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240/var(--tw-bg-opacity,1))}.hover\\:rf-bg-zinc-100:hover{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity,1))}.hover\\:rf-bg-zinc-100\\/80:hover{background-color:hsla(240,5%,96%,.8)}.hover\\:rf-bg-zinc-900\\/90:hover{background-color:rgba(24,24,27,.9)}.hover\\:rf-text-blue-800:hover{--tw-text-opacity:1;color:rgb(30 64 175/var(--tw-text-opacity,1))}.hover\\:rf-text-red-400:hover{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.hover\\:rf-text-slate-800:hover{--tw-text-opacity:1;color:rgb(30 41 59/var(--tw-text-opacity,1))}.hover\\:rf-text-slate-900:hover{--tw-text-opacity:1;color:rgb(15 23 42/var(--tw-text-opacity,1))}.hover\\:rf-text-zinc-900:hover{--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}.hover\\:rf-underline:hover{text-decoration-line:underline}.focus\\:rf-bg-gray-100:focus{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity,1))}.focus\\:rf-bg-zinc-100:focus{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity,1))}.focus\\:rf-text-gray-900:focus{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity,1))}.focus\\:rf-text-zinc-900:focus{--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}.focus\\:rf-outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:rf-ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\\:rf-ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246/var(--tw-ring-opacity,1))}.focus\\:rf-ring-ring:focus{--tw-ring-color:hsl(var(--ring))}.focus\\:rf-ring-offset-2:focus{--tw-ring-offset-width:2px}.focus-visible\\:rf-outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:rf-ring-1:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus-visible\\:rf-ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus-visible\\:rf-ring-zinc-950:focus-visible{--tw-ring-opacity:1;--tw-ring-color:rgb(9 9 11/var(--tw-ring-opacity,1))}.focus-visible\\:rf-ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.disabled\\:rf-pointer-events-none:disabled{pointer-events:none}.disabled\\:rf-cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:rf-opacity-50:disabled{opacity:.5}.rf-group:hover .group-hover\\:rf-opacity-100,.rf-group\\/bar:hover .group-hover\\/bar\\:rf-opacity-100{opacity:1}.data-\\[disabled\\=true\\]\\:rf-pointer-events-none[data-disabled=true],.data-\\[disabled\\]\\:rf-pointer-events-none[data-disabled]{pointer-events:none}.data-\\[side\\=bottom\\]\\:rf-translate-y-1[data-side=bottom]{--tw-translate-y:0.25rem}.data-\\[side\\=bottom\\]\\:rf-translate-y-1[data-side=bottom],.data-\\[side\\=left\\]\\:-rf-translate-x-1[data-side=left]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=left\\]\\:-rf-translate-x-1[data-side=left]{--tw-translate-x:-0.25rem}.data-\\[side\\=right\\]\\:rf-translate-x-1[data-side=right]{--tw-translate-x:0.25rem}.data-\\[side\\=right\\]\\:rf-translate-x-1[data-side=right],.data-\\[side\\=top\\]\\:-rf-translate-y-1[data-side=top]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\\[side\\=top\\]\\:-rf-translate-y-1[data-side=top]{--tw-translate-y:-0.25rem}.data-\\[selected\\=true\\]\\:rf-bg-zinc-100[data-selected=true]{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity,1))}.data-\\[state\\=active\\]\\:rf-bg-white[data-state=active]{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.data-\\[state\\=checked\\]\\:rf-bg-zinc-900[data-state=checked]{--tw-bg-opacity:1;background-color:rgb(24 24 27/var(--tw-bg-opacity,1))}.data-\\[state\\=open\\]\\:rf-bg-zinc-100[data-state=open]{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity,1))}.data-\\[selected\\=true\\]\\:rf-text-zinc-900[data-selected=true]{--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}.data-\\[state\\=active\\]\\:rf-text-zinc-950[data-state=active]{--tw-text-opacity:1;color:rgb(9 9 11/var(--tw-text-opacity,1))}.data-\\[state\\=checked\\]\\:rf-text-zinc-50[data-state=checked]{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.data-\\[disabled\\=true\\]\\:rf-opacity-50[data-disabled=true],.data-\\[disabled\\]\\:rf-opacity-50[data-disabled]{opacity:.5}.data-\\[state\\=active\\]\\:rf-shadow[data-state=active]{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.data-\\[state\\=open\\]\\:rf-animate-in[data-state=open]{animation-duration:.15s;animation-name:enter;--tw-enter-opacity:initial;--tw-enter-scale:initial;--tw-enter-rotate:initial;--tw-enter-translate-x:initial;--tw-enter-translate-y:initial}.data-\\[state\\=closed\\]\\:rf-animate-out[data-state=closed]{animation-duration:.15s;animation-name:exit;--tw-exit-opacity:initial;--tw-exit-scale:initial;--tw-exit-rotate:initial;--tw-exit-translate-x:initial;--tw-exit-translate-y:initial}.data-\\[state\\=closed\\]\\:rf-fade-out-0[data-state=closed]{--tw-exit-opacity:0}.data-\\[state\\=open\\]\\:rf-fade-in-0[data-state=open]{--tw-enter-opacity:0}.data-\\[state\\=closed\\]\\:rf-zoom-out-95[data-state=closed]{--tw-exit-scale:.95}.data-\\[state\\=open\\]\\:rf-zoom-in-95[data-state=open]{--tw-enter-scale:.95}.data-\\[side\\=bottom\\]\\:rf-slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y:-0.5rem}.data-\\[side\\=left\\]\\:rf-slide-in-from-right-2[data-side=left]{--tw-enter-translate-x:0.5rem}.data-\\[side\\=right\\]\\:rf-slide-in-from-left-2[data-side=right]{--tw-enter-translate-x:-0.5rem}.data-\\[side\\=top\\]\\:rf-slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y:0.5rem}.data-\\[state\\=closed\\]\\:rf-slide-out-to-left-1\\/2[data-state=closed]{--tw-exit-translate-x:-50%}.data-\\[state\\=closed\\]\\:rf-slide-out-to-top-\\[48\\%\\][data-state=closed]{--tw-exit-translate-y:-48%}.data-\\[state\\=open\\]\\:rf-slide-in-from-left-1\\/2[data-state=open]{--tw-enter-translate-x:-50%}.data-\\[state\\=open\\]\\:rf-slide-in-from-top-\\[48\\%\\][data-state=open]{--tw-enter-translate-y:-48%}.dark\\:rf-border-zinc-50:is(.rf-dark *){--tw-border-opacity:1;border-color:rgb(250 250 250/var(--tw-border-opacity,1))}.dark\\:rf-border-zinc-800:is(.rf-dark *){--tw-border-opacity:1;border-color:rgb(39 39 42/var(--tw-border-opacity,1))}.dark\\:rf-bg-gray-700:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.dark\\:rf-bg-gray-800:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1))}.dark\\:rf-bg-red-900:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(127 29 29/var(--tw-bg-opacity,1))}.dark\\:rf-bg-zinc-50:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.dark\\:rf-bg-zinc-800:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.dark\\:rf-bg-zinc-950:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(9 9 11/var(--tw-bg-opacity,1))}.dark\\:rf-text-gray-500:is(.rf-dark *){--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.dark\\:rf-text-zinc-400:is(.rf-dark *){--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity,1))}.dark\\:rf-text-zinc-50:is(.rf-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:rf-text-zinc-900:is(.rf-dark *){--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}.dark\\:rf-placeholder-zinc-400:is(.rf-dark *)::-moz-placeholder{--tw-placeholder-opacity:1;color:rgb(161 161 170/var(--tw-placeholder-opacity,1))}.dark\\:rf-placeholder-zinc-400:is(.rf-dark *)::placeholder{--tw-placeholder-opacity:1;color:rgb(161 161 170/var(--tw-placeholder-opacity,1))}.dark\\:rf-ring-offset-zinc-950:is(.rf-dark *){--tw-ring-offset-color:#09090b}.dark\\:placeholder\\:rf-text-zinc-400:is(.rf-dark *)::-moz-placeholder{--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity,1))}.dark\\:placeholder\\:rf-text-zinc-400:is(.rf-dark *)::placeholder{--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity,1))}.dark\\:hover\\:rf-bg-red-900\\/90:hover:is(.rf-dark *){background-color:rgba(127,29,29,.9)}.dark\\:hover\\:rf-bg-zinc-50\\/90:hover:is(.rf-dark *){background-color:hsla(0,0%,98%,.9)}.dark\\:hover\\:rf-bg-zinc-800:hover:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.dark\\:hover\\:rf-bg-zinc-800\\/80:hover:is(.rf-dark *){background-color:rgba(39,39,42,.8)}.dark\\:hover\\:rf-text-zinc-50:hover:is(.rf-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:focus\\:rf-bg-zinc-800:focus:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.dark\\:focus\\:rf-text-zinc-50:focus:is(.rf-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:focus-visible\\:rf-ring-zinc-300:focus-visible:is(.rf-dark *){--tw-ring-opacity:1;--tw-ring-color:rgb(212 212 216/var(--tw-ring-opacity,1))}.dark\\:data-\\[selected\\=true\\]\\:rf-bg-zinc-800[data-selected=true]:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.dark\\:data-\\[state\\=active\\]\\:rf-bg-zinc-950[data-state=active]:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(9 9 11/var(--tw-bg-opacity,1))}.dark\\:data-\\[state\\=checked\\]\\:rf-bg-zinc-50[data-state=checked]:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.dark\\:data-\\[state\\=open\\]\\:rf-bg-zinc-800[data-state=open]:is(.rf-dark *){--tw-bg-opacity:1;background-color:rgb(39 39 42/var(--tw-bg-opacity,1))}.dark\\:data-\\[selected\\=true\\]\\:rf-text-zinc-50[data-selected=true]:is(.rf-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:data-\\[state\\=active\\]\\:rf-text-zinc-50[data-state=active]:is(.rf-dark *){--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:data-\\[state\\=checked\\]\\:rf-text-zinc-900[data-state=checked]:is(.rf-dark *){--tw-text-opacity:1;color:rgb(24 24 27/var(--tw-text-opacity,1))}@media (min-width:640px){.sm\\:rf-order-1{order:1}.sm\\:rf-order-2{order:2}.sm\\:rf-mt-0{margin-top:0}.sm\\:rf-mt-4{margin-top:1rem}.sm\\:rf-block{display:block}.sm\\:rf-inline{display:inline}.sm\\:rf-grid{display:grid}.sm\\:rf-hidden{display:none}.sm\\:rf-h-5{height:1.25rem}.sm\\:rf-w-1\\/2{width:50%}.sm\\:rf-w-5{width:1.25rem}.sm\\:rf-w-\\[90vw\\]{width:90vw}.sm\\:rf-w-auto{width:auto}.sm\\:rf-max-w-\\[500px\\]{max-width:500px}.sm\\:rf-max-w-md{max-width:28rem}.sm\\:rf-grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:rf-grid-cols-\\[1fr_auto\\]{grid-template-columns:1fr auto}.sm\\:rf-flex-row{flex-direction:row}.sm\\:rf-items-center{align-items:center}.sm\\:rf-justify-end{justify-content:flex-end}.sm\\:rf-gap-3{gap:.75rem}.sm\\:rf-gap-4{gap:1rem}.sm\\:rf-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.sm\\:rf-justify-self-end{justify-self:end}.sm\\:rf-rounded-lg{border-radius:var(--radius)}.sm\\:rf-p-3{padding:.75rem}.sm\\:rf-p-6{padding:1.5rem}.sm\\:rf-px-4{padding-left:1rem;padding-right:1rem}.sm\\:rf-px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\\:rf-py-6{padding-bottom:1.5rem;padding-top:1.5rem}.sm\\:rf-text-left{text-align:left}.sm\\:rf-text-right{text-align:right}.sm\\:rf-text-2xl{font-size:1.5rem;line-height:2rem}.sm\\:rf-text-base{font-size:1rem;line-height:1.5rem}.sm\\:rf-text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:rf-text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width:768px){.md\\:rf-w-auto{width:auto}.md\\:rf-max-w-\\[660px\\]{max-width:660px}.md\\:rf-max-w-lg{max-width:32rem}.md\\:rf-grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:rf-p-8{padding:2rem}.md\\:rf-py-8{padding-bottom:2rem;padding-top:2rem}.md\\:rf-text-3xl{font-size:1.875rem;line-height:2.25rem}}@media (min-width:1024px){.lg\\:rf-max-w-\\[720px\\]{max-width:720px}.lg\\:rf-max-w-xl{max-width:36rem}}@media (min-width:1280px){.xl\\:rf-max-w-\\[800px\\]{max-width:800px}}.\\[\\&\\>span\\]\\:rf-line-clamp-1>span{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\\[\\&\\>svg\\]\\:rf-size-4>svg{height:1rem;width:1rem}.\\[\\&\\>svg\\]\\:rf-shrink-0>svg{flex-shrink:0}.\\[\\&\\>svg\\]\\:rf-text-red-300>svg{--tw-text-opacity:1;color:rgb(252 165 165/var(--tw-text-opacity,1))}.\\[\\&\\>svg\\]\\:hover\\:rf-text-red-400:hover>svg{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-py-1\\.5 [cmdk-group-heading]{padding-bottom:.375rem;padding-top:.375rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-font-medium [cmdk-group-heading]{font-weight:500}.\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-text-zinc-500 [cmdk-group-heading]{--tw-text-opacity:1;color:rgb(113 113 122/var(--tw-text-opacity,1))}.dark\\:\\[\\&_\\[cmdk-group-heading\\]\\]\\:rf-text-zinc-400 [cmdk-group-heading]:is(.rf-dark *){--tw-text-opacity:1;color:rgb(161 161 170/var(--tw-text-opacity,1))}.\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:rf-pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\\[\\&_\\[cmdk-group\\]\\]\\:rf-px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:rf-h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:rf-w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\\[\\&_\\[cmdk-input\\]\\]\\:rf-h-12 [cmdk-input]{height:3rem}.\\[\\&_\\[cmdk-item\\]\\]\\:rf-px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\\[\\&_\\[cmdk-item\\]\\]\\:rf-py-3 [cmdk-item]{padding-bottom:.75rem;padding-top:.75rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:rf-h-5 [cmdk-item] svg{height:1.25rem}.\\[\\&_\\[cmdk-item\\]_svg\\]\\:rf-w-5 [cmdk-item] svg{width:1.25rem}.\\[\\&_svg\\]\\:rf-pointer-events-none svg{pointer-events:none}.\\[\\&_svg\\]\\:rf-size-4 svg{height:1rem;width:1rem}.\\[\\&_svg\\]\\:rf-shrink-0 svg{flex-shrink:0}';

// lib/hooks/use-styles.ts
var useStyles = () => {
  useEffect2(() => {
    const existingStyle = document.querySelector(
      'style[data-styles="tscircuit-runframe"]'
    );
    if (existingStyle) return;
    const styleElement = document.createElement("style");
    styleElement.setAttribute("data-styles", "tscircuit-runframe");
    styleElement.textContent = styles_generated_default;
    document.head.appendChild(styleElement);
  }, []);
};

// lib/hooks/use-fullscreen-body-scroll.ts
import { useEffect as useEffect3 } from "react";
var useFullscreenBodyScroll = (isFullScreen) => {
  useEffect3(() => {
    if (isFullScreen) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "";
    }
    return () => {
      document.body.style.overflow = "";
    };
  }, [isFullScreen]);
};

// lib/hooks/use-local-storage-state.ts
import { useState as useState4, useEffect as useEffect4 } from "react";
function useLocalStorageState(key, initialValue) {
  const [state, setState] = useState4(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error("Error reading from localStorage:", error);
      return initialValue;
    }
  });
  useEffect4(() => {
    try {
      window.localStorage.setItem(key, JSON.stringify(state));
    } catch (error) {
      console.error("Error writing to localStorage:", error);
    }
  }, [key, state]);
  return [state, setState];
}

// lib/components/RenderLogViewer/RenderLogViewer.tsx
import { orderedRenderPhases as orderedRenderPhases2 } from "@tscircuit/core";
import { useState as useState5 } from "react";

// lib/components/RenderLogViewer/RenderTimingsBar.tsx
import { orderedRenderPhases } from "@tscircuit/core";
import "react";
import { jsx as jsx15, jsxs as jsxs10 } from "react/jsx-runtime";
var getPhaseColor = (phase) => {
  const index = orderedRenderPhases.indexOf(phase);
  const hue = index * 137.5 % 360;
  return `hsl(${hue}, 70%, 50%)`;
};
var RenderTimingsBar = ({
  phaseTimings
}) => {
  if (!phaseTimings) return null;
  const totalTime = Object.values(phaseTimings).reduce(
    (sum, time) => sum + time,
    0
  );
  return /* @__PURE__ */ jsxs10("div", { className: "rf-space-y-2 rf-w-full rf-px-4", children: [
    /* @__PURE__ */ jsx15("div", { className: "rf-relative rf-h-8 rf-flex rf-rounded-sm", children: orderedRenderPhases.map((phase) => {
      const time = phaseTimings[phase] || 0;
      const width = time / totalTime * 100;
      return /* @__PURE__ */ jsx15(
        "div",
        {
          className: "rf-group/bar rf-relative rf-overflow-visible",
          style: {
            width: `${width}%`,
            backgroundColor: getPhaseColor(phase)
          },
          children: /* @__PURE__ */ jsxs10("div", { className: "rf-opacity-0 group-hover/bar:rf-opacity-100 rf-transition-opacity rf-absolute rf-bottom-full rf-left-1/2 rf-transform -rf-translate-x-1/2 rf-mb-2 rf-px-2 rf-py-1 rf-text-xs rf-whitespace-nowrap rf-rounded rf-bg-gray-900 rf-text-white rf-pointer-events-none", children: [
            phase,
            ": ",
            time.toFixed(1),
            "ms"
          ] })
        },
        phase
      );
    }) }),
    /* @__PURE__ */ jsxs10("div", { className: "rf-text-xs rf-text-gray-500", children: [
      "Total: ",
      totalTime.toFixed(2),
      "ms"
    ] })
  ] });
};
var RenderTimingsBar_default = RenderTimingsBar;

// lib/components/RenderLogViewer/RenderLogViewer.tsx
import { jsx as jsx16, jsxs as jsxs11 } from "react/jsx-runtime";
var formatDebugOutputContent = (content) => {
  if (content instanceof Blob) return content;
  if (content == null) return "";
  if (typeof content === "string") return content;
  if (typeof content === "object") {
    try {
      return JSON.stringify(content, null, 2);
    } catch (_error) {
      return String(content);
    }
  }
  return String(content);
};
var RenderLogViewer = ({
  renderLog,
  onRerunWithDebug
}) => {
  const [sortOption, setSortOption] = useState5(
    "chronological"
  );
  const [selectedDebugOption, setSelectedDebugOption] = useState5("");
  const debugOptions = [
    { value: "", label: "None" },
    {
      value: "DEBUG=Group_doInitialSchematicTraceRender",
      label: "DEBUG=Group_doInitialSchematicTraceRender"
    },
    {
      value: "DEBUG=Group_doInitialSchematicLayoutMatchpack",
      label: "DEBUG=Group_doInitialSchematicLayoutMatchpack"
    },
    {
      value: "DEBUG=Group_doInitialPcbLayoutPack",
      label: "DEBUG=Group_doInitialPcbLayoutPack"
    }
  ];
  if (!renderLog)
    return /* @__PURE__ */ jsxs11("div", { className: "rf-p-4 rf-bg-gray-100 rf-rounded-md", children: [
      /* @__PURE__ */ jsx16("div", { className: "rf-mb-4", children: "No render log, make sure this tab is open when you render" }),
      onRerunWithDebug && /* @__PURE__ */ jsxs11("div", { className: "rf-flex rf-gap-2 rf-items-center", children: [
        /* @__PURE__ */ jsx16(
          "select",
          {
            value: selectedDebugOption,
            onChange: (e) => setSelectedDebugOption(e.target.value),
            className: "rf-px-3 rf-py-1 rf-border rf-rounded rf-text-xs rf-bg-white",
            children: debugOptions.map((option) => /* @__PURE__ */ jsx16("option", { value: option.value, children: option.label }, option.value))
          }
        ),
        /* @__PURE__ */ jsx16(
          Button,
          {
            onClick: () => onRerunWithDebug(selectedDebugOption),
            size: "sm",
            className: "rf-text-xs",
            children: "Rerun Render with Debug"
          }
        )
      ] })
    ] });
  const orderedPhaseTimings = Object.entries(renderLog?.phaseTimings ?? {});
  if (sortOption === "chronological") {
    orderedPhaseTimings.sort(
      (a, b) => orderedRenderPhases2.indexOf(a[0]) - orderedRenderPhases2.indexOf(b[0])
    );
  } else {
    orderedPhaseTimings.sort((a, b) => b[1] - a[1]);
  }
  const totalTime = orderedPhaseTimings.reduce(
    (sum, [_, time]) => sum + time,
    0
  );
  return /* @__PURE__ */ jsxs11("div", { className: "rf-bg-white", children: [
    /* @__PURE__ */ jsxs11("div", { className: "rf-flex rf-justify-between rf-items-center rf-mb-4", children: [
      /* @__PURE__ */ jsx16("div", { children: "Render Logs" }),
      /* @__PURE__ */ jsxs11("div", { className: "rf-flex rf-gap-4 rf-items-center", children: [
        onRerunWithDebug && /* @__PURE__ */ jsxs11("div", { className: "rf-flex rf-gap-2 rf-items-center", children: [
          /* @__PURE__ */ jsx16(
            "select",
            {
              value: selectedDebugOption,
              onChange: (e) => setSelectedDebugOption(e.target.value),
              className: "rf-px-3 rf-py-1 rf-border rf-rounded rf-text-xs rf-bg-white",
              children: debugOptions.map((option) => /* @__PURE__ */ jsx16("option", { value: option.value, children: option.label }, option.value))
            }
          ),
          /* @__PURE__ */ jsx16(
            Button,
            {
              onClick: () => onRerunWithDebug(selectedDebugOption),
              size: "sm",
              className: "rf-text-xs",
              children: "Rerun Render with Debug"
            }
          )
        ] }),
        /* @__PURE__ */ jsx16("div", { className: "rf-flex rf-gap-2 rf-items-center", children: /* @__PURE__ */ jsxs11(
          "select",
          {
            onChange: (e) => {
              if (e.target.value) {
                const debugOutput = renderLog?.debugOutputs?.find(
                  (output) => output.name === e.target.value
                );
                if (debugOutput) {
                  const formattedContent = formatDebugOutputContent(
                    debugOutput.content
                  );
                  const blob = formattedContent instanceof Blob ? formattedContent : new Blob([formattedContent], {
                    type: "text/plain"
                  });
                  const url = URL.createObjectURL(blob);
                  const a = document.createElement("a");
                  a.href = url;
                  a.download = `debug-${debugOutput.name}.txt`;
                  document.body.appendChild(a);
                  a.click();
                  document.body.removeChild(a);
                  URL.revokeObjectURL(url);
                }
                e.target.value = "";
              }
            },
            disabled: !renderLog?.debugOutputs || renderLog.debugOutputs.length === 0,
            className: "rf-px-3 rf-py-1 rf-border rf-rounded rf-text-xs rf-bg-white disabled:rf-opacity-50 disabled:rf-cursor-not-allowed",
            children: [
              /* @__PURE__ */ jsx16("option", { value: "", children: "Download Debug Output" }),
              renderLog?.debugOutputs?.map((output) => /* @__PURE__ */ jsx16("option", { value: output.name, children: output.name }, output.name))
            ]
          }
        ) }),
        /* @__PURE__ */ jsxs11("div", { className: "rf-flex rf-text-xs rf-items-center", children: [
          /* @__PURE__ */ jsx16("div", { className: "rf-mr-2", children: "Sort by:" }),
          /* @__PURE__ */ jsxs11(
            "select",
            {
              value: sortOption,
              onChange: (e) => setSortOption(e.target.value),
              className: "rf-px-2 rf-py-1 rf-border rf-rounded rf-text-xs",
              children: [
                /* @__PURE__ */ jsx16("option", { value: "chronological", children: "Phase Order" }),
                /* @__PURE__ */ jsx16("option", { value: "longest", children: "Duration" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx16(RenderTimingsBar_default, { phaseTimings: renderLog.phaseTimings }),
    /* @__PURE__ */ jsxs11("table", { className: "rf-w-full rf-text-xs", children: [
      /* @__PURE__ */ jsx16("thead", { children: /* @__PURE__ */ jsxs11("tr", { children: [
        /* @__PURE__ */ jsx16("th", { className: "rf-text-left rf-p-2", children: "Phase Order" }),
        /* @__PURE__ */ jsx16("th", { className: "rf-text-left rf-p-2", children: "Phase" }),
        /* @__PURE__ */ jsx16("th", { className: "rf-text-left rf-p-2", children: "Duration (ms)" })
      ] }) }),
      /* @__PURE__ */ jsx16("tbody", { children: orderedPhaseTimings.map(([phase, duration]) => /* @__PURE__ */ jsxs11("tr", { children: [
        /* @__PURE__ */ jsx16("td", { className: "rf-p-2", children: orderedRenderPhases2.indexOf(phase) }),
        /* @__PURE__ */ jsx16("td", { className: "rf-p-2", children: phase }),
        /* @__PURE__ */ jsx16("td", { className: "rf-p-2", children: /* @__PURE__ */ jsx16("div", { className: "rf-w-8", children: /* @__PURE__ */ jsx16(
          "div",
          {
            className: "rf-h-2 rf-rounded-sm",
            style: {
              backgroundColor: getPhaseColor(phase),
              width: `${duration / totalTime * 100}%`
            }
          }
        ) }) }),
        /* @__PURE__ */ jsx16("td", { className: "rf-p-2", children: /* @__PURE__ */ jsxs11("div", { className: "rf-flex w-full", children: [
          /* @__PURE__ */ jsxs11("span", { className: "rf-flex-grow", children: [
            duration,
            "ms"
          ] }),
          /* @__PURE__ */ jsxs11("span", { className: "rf-text-gray-500 rf-pr-2", children: [
            (duration / totalTime * 100).toFixed(1),
            "%"
          ] })
        ] }) })
      ] }, phase)) })
    ] })
  ] });
};

// lib/hooks/use-error-telemetry.ts
import { useEffect as useEffect5 } from "react";
var useErrorTelemetry = ({
  errorMessage,
  errorStack,
  circuitJsonErrors
}) => {
  useEffect5(() => {
    if (errorMessage) {
      const err = new Error(errorMessage);
      if (errorStack) err.stack = errorStack;
      try {
        posthog.captureException(err);
      } catch {
      }
    }
  }, [errorMessage, errorStack]);
  useEffect5(() => {
    if (circuitJsonErrors && circuitJsonErrors.length > 0) {
      for (const error of circuitJsonErrors) {
        const err = new Error(error.message || "Circuit JSON Error");
        if (error.stack) {
          ;
          err.stack = error.stack;
        }
        try {
          posthog.captureException(err, { error_type: error.type });
        } catch {
        }
      }
    }
  }, [circuitJsonErrors]);
};

// package.json
var version = "0.0.1266";
var package_default = {
  name: "@tscircuit/runframe",
  main: "dist/preview.js",
  type: "module",
  version,
  exports: {
    ".": "./dist/preview.js",
    "./preview": "./dist/preview.js",
    "./runner": "./dist/runner.js",
    "./standalone": "./dist/standalone.min.js",
    "./standalone-preview": "./dist/standalone-preview.min.js"
  },
  files: [
    "dist"
  ],
  scripts: {
    start: "bun run build:css && concurrently 'bun run cosmos' 'bun run build:css:watch'",
    build: "bun run build:css && bun run build:standalone && bun run build:standalone-preview && bun run build:lib",
    "build:lib": "tsup-node lib/preview.ts lib/runner.ts --external react-query schematic-symbols lucide-react circuit-to-svg @tscircuit/props --platform browser --format esm --dts",
    "build:css": "bun run scripts/build-css.ts",
    "build:css:watch": "chokidar 'lib/components/**/*.tsx' -c 'bun run build:css'",
    "build:site": "cosmos-export && bun run build:iframe",
    "build:standalone": "NODE_OPTIONS=--max-old-space-size=8192 STANDALONE=1 vite build",
    "build:iframe": "STANDALONE=iframe vite build && mv ./dist/lib/entrypoints/iframe.html ./dist/iframe.html && cp -f ./dist/iframe.html ./cosmos-export/iframe.html && cp -f ./dist/iframe.min.js ./cosmos-export/iframe.min.js",
    "build:standalone-preview": "NODE_OPTIONS=--max-old-space-size=8192 STANDALONE=preview vite build --emptyOutDir false",
    analyze: "source-map-explorer 'dist/standalone.min.js'",
    "format:check": "biome format .",
    format: "biome format --write .",
    "vercel-build": "bun run build:css && cosmos-export",
    "serve:cosmos": "serve cosmos-export",
    "pkg-pr-new-release": "bunx pkg-pr-new publish --comment=off --peerDeps"
  },
  devDependencies: {
    "@babel/standalone": "^7.26.10",
    "@biomejs/biome": "^1.9.4",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-dialog": "^1.1.14",
    "@radix-ui/react-dropdown-menu": "^2.1.4",
    "@radix-ui/react-icons": "^1.3.2",
    "@radix-ui/react-popover": "^1.1.14",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-slot": "^1.1.1",
    "@radix-ui/react-tabs": "^1.1.2",
    "@resvg/resvg-wasm": "^2.6.2",
    "@tscircuit/3d-viewer": "^0.0.440",
    "@tscircuit/assembly-viewer": "^0.0.5",
    "@tscircuit/checks": "^0.0.78",
    "@tscircuit/create-snippet-url": "^0.0.9",
    "@tscircuit/eval": "^0.0.480",
    "@tscircuit/fake-snippets": "^0.0.122",
    "@tscircuit/file-server": "^0.0.32",
    "@tscircuit/footprinter": "^0.0.236",
    "@tscircuit/math-utils": "^0.0.25",
    "@tscircuit/pcb-viewer": "1.11.263",
    "@tscircuit/props": "^0.0.397",
    "@tscircuit/schematic-trace-solver": "^0.0.40",
    "@tscircuit/schematic-viewer": "2.0.49",
    "@types/bun": "latest",
    "@types/debug": "^4.1.12",
    "@types/react": "^19.1.10",
    "@types/react-dom": "^19.1.7",
    "@types/three": "^0.179.0",
    "@vitejs/plugin-react": "^5.0.0",
    autoprefixer: "^10.4.20",
    "chokidar-cli": "^3.0.0",
    "circuit-json": "0.0.303",
    "circuit-json-to-bom-csv": "^0.0.8",
    "circuit-json-to-gerber": "^0.0.37",
    "circuit-json-to-gltf": "^0.0.41",
    "circuit-json-to-kicad": "^0.0.25",
    "circuit-json-to-pnp-csv": "^0.0.7",
    "circuit-json-to-step": "^0.0.2",
    "circuit-to-svg": "^0.0.205",
    "class-variance-authority": "^0.7.1",
    clsx: "^2.1.1",
    cmdk: "^1.1.1",
    comlink: "^4.4.2",
    concurrently: "^9.1.2",
    cssnano: "^7.0.6",
    debug: "^4.4.0",
    easyeda: "^0.0.228",
    fflate: "^0.8.2",
    "fuse.js": "^7.1.0",
    jose: "^6.1.0",
    jszip: "^3.10.1",
    "kicad-component-converter": "^0.1.21",
    "kicad-to-circuit-json": "^0.0.17",
    kicadts: "^0.0.22",
    ky: "^1.7.5",
    "lucide-react": "^0.488.0",
    marked: "^15.0.12",
    minimatch: "^10.0.3",
    playwright: "^1.49.1",
    postcss: "^8.4.49",
    "posthog-js": "^1.253.4",
    react: "19.1.0",
    "react-cosmos": "^6.2.1",
    "react-cosmos-plugin-vite": "^6.2.0",
    "react-dom": "19.1.0",
    "react-error-boundary": "^6.0.0",
    "react-hot-toast": "^2.5.2",
    "react-query": "^3.39.3",
    redaxios: "^0.5.1",
    "rollup-plugin-visualizer": "^5.12.0",
    "s-expression": "^3.1.1",
    "schematic-symbols": "^0.0.202",
    serve: "^14.2.4",
    "source-map-explorer": "^2.5.3",
    stepts: "^0.0.1",
    "tailwind-merge": "^2.6.0",
    tailwindcss: "^3.4.17",
    "tailwindcss-animate": "^1.0.7",
    tscircuit: "^0.0.657",
    tsup: "^8.3.5",
    vite: "^7.1.2",
    yargs: "^17.7.2"
  }
};

// lib/hooks/use-eval-versions.ts
import { useEffect as useEffect6, useMemo as useMemo2, useState as useState6 } from "react";

// lib/components/RunFrame/runner-store/use-runner-store.ts
import { create } from "zustand";
import { devtools } from "zustand/middleware";
var useRunnerStore = create()(
  devtools(
    (set) => ({
      lastRunEvalVersion: void 0,
      setLastRunEvalVersion: (version2) => {
        set({ lastRunEvalVersion: version2 });
      }
    }),
    { name: "runframe-runner-store" }
  )
);

// lib/hooks/use-eval-versions.ts
var useEvalVersions = (allowSelecting) => {
  const [allVersions, setAllVersions] = useState6([]);
  const [latest, setLatest] = useState6(null);
  const [search, setSearch] = useState6("");
  const [selected, setSelected] = useLocalStorageState(
    "eval-version-selection",
    null
  );
  const setLastRunEvalVersion = useRunnerStore((s) => s.setLastRunEvalVersion);
  const lastRunEvalVersion = useRunnerStore((s) => s.lastRunEvalVersion);
  useEffect6(() => {
    if (!allowSelecting) return;
    fetch("https://data.jsdelivr.com/v1/package/npm/@tscircuit/eval").then((res) => res.json()).then((data) => {
      if (Array.isArray(data?.versions)) {
        let versions = [...data.versions];
        if (data.tags?.latest) {
          setLatest(data.tags.latest);
          versions = versions.filter((v) => v !== data.tags.latest);
        }
        setAllVersions(versions);
      }
    }).catch(() => {
    });
  }, [allowSelecting]);
  useEffect6(() => {
    if (!allowSelecting) return;
    if (selected) {
      window.TSCIRCUIT_LATEST_EVAL_VERSION = selected;
      setLastRunEvalVersion(selected);
    } else if (latest) {
      window.TSCIRCUIT_LATEST_EVAL_VERSION = latest;
      setLastRunEvalVersion(latest);
    }
  }, [allowSelecting, selected, latest]);
  const filtered = useMemo2(
    () => allVersions.filter((v) => v.includes(search)).slice(0, 50),
    [allVersions, search]
  );
  const selectVersion = (v) => {
    setSelected(v);
    setSearch("");
  };
  return {
    versions: filtered,
    latestVersion: latest,
    lastRunEvalVersion,
    search,
    setSearch,
    selectVersion
  };
};

// lib/components/FileMenuLeftHeader.tsx
import { useEffect as useEffect13, useMemo as useMemo8, useState as useState19 } from "react";

// lib/components/RunFrameWithApi/store.ts
import { applyEditEventsToManualEditsFile } from "@tscircuit/core";

// lib/utils/debug.ts
import Debug from "debug";
var debug = Debug("run-frame");
var debug_default = debug;

// lib/components/RunFrameWithApi/store.ts
import { create as create2 } from "zustand";
import { devtools as devtools2 } from "zustand/middleware";

// lib/components/RunFrameWithApi/api-base.ts
var API_BASE = window.TSCIRCUIT_FILESERVER_API_BASE_URL ?? "/api";

// lib/components/RunFrameWithApi/store.ts
var debug2 = debug_default.extend("store");
async function upsertFileApi(path, content) {
  const response = await fetch(`${API_BASE}/files/upsert`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ file_path: path, text_content: content })
  });
  const data = await response.json();
  return data.file;
}
async function getFileApi(path) {
  const response = await fetch(
    `${API_BASE}/files/get?file_path=${encodeURIComponent(path)}`
  );
  const data = await response.json();
  return data.file;
}
async function getEvents(since) {
  const url = since ? `${API_BASE}/events/list?since=${encodeURIComponent(since)}` : `${API_BASE}/events/list`;
  const response = await fetch(url);
  const data = await response.json();
  return data.event_list;
}
var DYNAMIC_FILE_EXTENSIONS = [".tsx", ".ts", ".jsx", ".js", ".json"];
async function getInitialFilesFromApi() {
  const response = await fetch(`${API_BASE}/files/list`);
  const { file_list } = await response.json();
  const fileMap = /* @__PURE__ */ new Map();
  for (const file of file_list) {
    if (DYNAMIC_FILE_EXTENSIONS.some((ext) => file.file_path.endsWith(ext))) {
      const fullFile = await getFileApi(file.file_path);
      fileMap.set(file.file_path, fullFile.text_content);
      continue;
    }
    fileMap.set(file.file_path, "__STATIC_ASSET__");
  }
  return fileMap;
}
var useRunFrameStore = create2()(
  devtools2(
    (set, get) => ({
      fsMap: /* @__PURE__ */ new Map(),
      lastEventTime: (/* @__PURE__ */ new Date()).toISOString(),
      isPolling: false,
      error: null,
      circuitJson: null,
      lastManualEditsChangeSentAt: 0,
      recentEvents: [],
      simulateScenarioOrder: void 0,
      currentMainComponentPath: null,
      loadInitialFiles: async () => {
        const fsMap = await getInitialFilesFromApi();
        debug2("loaded initial files", { fsMap });
        set({ fsMap });
      },
      upsertFile: async (path, content) => {
        try {
          const file = await upsertFileApi(path, content);
          set((state) => ({
            fsMap: new Map(state.fsMap).set(file.file_path, file.text_content)
          }));
        } catch (error) {
          set({ error });
        }
      },
      getFile: async (path) => {
        try {
          const file = await getFileApi(path);
          set((state) => ({
            fsMap: new Map(state.fsMap).set(file.file_path, file.text_content)
          }));
        } catch (error) {
          set({ error });
        }
      },
      setCircuitJson: (circuitJson) => {
        if (circuitJson === get().circuitJson) return;
        set({ circuitJson });
      },
      startPolling: () => {
        const poll = async () => {
          const state = get();
          if (!state.isPolling) return;
          try {
            const events = await getEvents(state.lastEventTime);
            if (events.length > 0) {
              set((state2) => ({
                recentEvents: [...state2.recentEvents, ...events].slice(0, 100)
                // TODO sort
                // .sort((a, b) => b.created_at.localeCompare(a.created_at)),
              }));
              const newLastEventTime = events[events.length - 1].created_at;
              const updates = new Map(state.fsMap);
              for (const event of events) {
                if (event.event_type === "FILE_UPDATED") {
                  const file = await getFileApi(event.file_path);
                  if (event.file_path === "manual_edits.json" && Date.now() - state.lastManualEditsChangeSentAt < 1e3) {
                    continue;
                  }
                  if (file.text_content) {
                    updates.set(file.file_path, file.text_content);
                  } else {
                    updates.set(file.file_path, "__STATIC_ASSET__");
                  }
                } else if (event.event_type === "FILE_DELETED") {
                  updates.delete(event.file_path);
                }
              }
              set({
                fsMap: updates,
                lastEventTime: newLastEventTime
              });
            }
          } catch (error) {
            set({ error });
          }
          setTimeout(poll, 1e3);
        };
        set({ isPolling: true });
        poll();
      },
      stopPolling: () => {
        set({ isPolling: false });
      },
      pushEvent: async (event) => {
        await fetch(`${API_BASE}/events/create`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(event)
        });
      },
      applyEditEventsAndUpdateManualEditsJson: async (editEvents) => {
        debug2("applyEditEventsAndUpdateManualEditsJson", { editEvents });
        const state = get();
        if (!state.circuitJson) return;
        const manualEditsJson = state.fsMap.get("manual-edits.json");
        const manualEdits = manualEditsJson ? JSON.parse(manualEditsJson) : {};
        const updatedManualEditsFileContent = applyEditEventsToManualEditsFile({
          circuitJson: state.circuitJson,
          editEvents,
          manualEditsFile: manualEdits
        });
        debug2("updatedManualEditsFileContent", updatedManualEditsFileContent);
        set((state2) => ({
          lastManualEditsChangeSentAt: Date.now(),
          fsMap: new Map(state2.fsMap).set(
            "manual-edits.json",
            JSON.stringify(updatedManualEditsFileContent)
          )
        }));
        await upsertFileApi(
          "manual-edits.json",
          JSON.stringify(updatedManualEditsFileContent, null, 2)
        );
      },
      setSimulateScenarioOrder: (scenarioOrder) => set({ simulateScenarioOrder: scenarioOrder }),
      setCurrentMainComponentPath: (path) => set({ currentMainComponentPath: path })
    }),
    { name: "run-frame-store" }
  )
);

// lib/components/RunFrameForCli/SelectSnippetDialog.tsx
import { useState as useState7 } from "react";
import { jsx as jsx17, jsxs as jsxs12 } from "react/jsx-runtime";
var SelectSnippetDialog = ({
  snippetNames,
  onSelect,
  onCancel,
  isOpen
}) => {
  const [selectedName, setSelectedName] = useState7("");
  const [searchInput, setSearchInput] = useState7("");
  if (!isOpen) return null;
  const filteredSnippets = snippetNames.filter(
    (name) => name.toLowerCase().includes(searchInput.toLowerCase())
  );
  const showCreateNew = searchInput && !snippetNames.includes(searchInput);
  const handleKeyDown = (e) => {
    if (e.key === "Enter") {
      if (filteredSnippets.length === 1) {
        setSelectedName(filteredSnippets[0]);
      } else if (showCreateNew) {
        setSelectedName(searchInput);
      }
    }
  };
  return /* @__PURE__ */ jsx17("div", { className: "rf-fixed rf-inset-0 rf-bg-black rf-bg-opacity-50 rf-flex rf-items-center rf-justify-center rf-z-[100]", children: /* @__PURE__ */ jsxs12("div", { className: "rf-bg-white rf-rounded-lg rf-p-6 rf-w-96", children: [
    /* @__PURE__ */ jsx17("h2", { className: "rf-text-lg rf-font-semibold rf-mb-4", children: "Select Snippet" }),
    /* @__PURE__ */ jsx17(
      "input",
      {
        type: "text",
        className: "rf-w-full rf-px-4 rf-py-2 rf-border rf-rounded rf-mb-4",
        placeholder: "Search snippets or new snippet name...",
        value: searchInput,
        onChange: (e) => setSearchInput(e.target.value),
        onKeyDown: handleKeyDown
      }
    ),
    /* @__PURE__ */ jsxs12("div", { className: "rf-h-60 rf-overflow-y-auto", children: [
      filteredSnippets.map((name) => /* @__PURE__ */ jsx17(
        "button",
        {
          type: "button",
          className: `w-full text-left px-4 py-2 rounded hover:bg-gray-100 ${selectedName === name ? "bg-blue-50" : ""}`,
          onClick: () => setSelectedName(name),
          children: name
        },
        name
      )),
      showCreateNew && /* @__PURE__ */ jsxs12(
        "button",
        {
          type: "button",
          className: `w-full text-left px-4 py-2 rounded hover:bg-gray-100 text-blue-500 ${selectedName === searchInput ? "bg-blue-50" : ""}`,
          onClick: () => setSelectedName(searchInput),
          children: [
            'Create new "',
            searchInput,
            '"'
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs12("div", { className: "rf-mt-4 rf-flex rf-justify-end rf-gap-2", children: [
      /* @__PURE__ */ jsx17(
        "button",
        {
          type: "button",
          className: "rf-px-4 rf-py-2 rf-text-gray-600 rf-hover:text-gray-800",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx17(
        "button",
        {
          type: "button",
          className: "rf-px-4 rf-py-2 rf-bg-blue-500 rf-text-white rf-rounded rf-hover:bg-blue-600 rf-disabled:opacity-50",
          onClick: () => selectedName && onSelect(selectedName),
          disabled: !selectedName,
          children: selectedName === searchInput ? `Create "${selectedName}"` : `Save to ${selectedName}`
        }
      )
    ] })
  ] }) });
};

// lib/components/RunFrameForCli/useEventHandler.ts
import { useEffect as useEffect7, useRef as useRef2 } from "react";
var useEventHandler = (callback) => {
  const lastProcessedEventId = useRef2(null);
  const recentEvents = useRunFrameStore((state) => state.recentEvents);
  useEffect7(() => {
    if (recentEvents.length === 0) return;
    const latestEvent = recentEvents[0];
    if (latestEvent.event_id !== lastProcessedEventId.current) {
      callback(latestEvent);
      lastProcessedEventId.current = latestEvent.event_id;
    }
  }, [recentEvents, callback]);
};

// lib/components/ui/alert-dialog.tsx
import * as React7 from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";
import { jsx as jsx18, jsxs as jsxs13 } from "react/jsx-runtime";
var AlertDialog = AlertDialogPrimitive.Root;
var AlertDialogPortal = AlertDialogPrimitive.Portal;
var AlertDialogOverlay = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx18(
  AlertDialogPrimitive.Overlay,
  {
    className: cn(
      "rf-fixed rf-inset-0 rf-z-50 rf-bg-black/80 data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0",
      className
    ),
    ...props,
    ref
  }
));
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName;
var AlertDialogContent = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxs13(AlertDialogPortal, { children: [
  /* @__PURE__ */ jsx18(AlertDialogOverlay, {}),
  /* @__PURE__ */ jsx18(
    AlertDialogPrimitive.Content,
    {
      ref,
      className: cn(
        "rf-fixed rf-left-[50%] rf-top-[50%] rf-z-50 rf-grid rf-w-full rf-max-w-lg rf-translate-x-[-50%] rf-translate-y-[-50%] rf-gap-4 rf-border rf-border-zinc-200 rf-bg-white rf-p-6 rf-shadow-lg rf-duration-200 data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0 data-[state=closed]:rf-zoom-out-95 data-[state=open]:rf-zoom-in-95 data-[state=closed]:rf-slide-out-to-left-1/2 data-[state=closed]:rf-slide-out-to-top-[48%] data-[state=open]:rf-slide-in-from-left-1/2 data-[state=open]:rf-slide-in-from-top-[48%] sm:rf-rounded-lg dark:rf-border-zinc-800 dark:rf-bg-zinc-950",
        className
      ),
      ...props
    }
  )
] }));
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName;
var AlertDialogHeader = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx18(
  "div",
  {
    className: cn(
      "rf-flex rf-flex-col rf-space-y-2 rf-text-center sm:rf-text-left",
      className
    ),
    ...props
  }
);
AlertDialogHeader.displayName = "AlertDialogHeader";
var AlertDialogFooter = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx18(
  "div",
  {
    className: cn(
      "rf-flex rf-flex-col-reverse sm:rf-flex-row sm:rf-justify-end sm:rf-space-x-2",
      className
    ),
    ...props
  }
);
AlertDialogFooter.displayName = "AlertDialogFooter";
var AlertDialogTitle = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx18(
  AlertDialogPrimitive.Title,
  {
    ref,
    className: cn("rf-text-lg rf-font-semibold", className),
    ...props
  }
));
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName;
var AlertDialogDescription = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx18(
  AlertDialogPrimitive.Description,
  {
    ref,
    className: cn(
      "rf-text-sm rf-text-zinc-500 dark:rf-text-zinc-400",
      className
    ),
    ...props
  }
));
AlertDialogDescription.displayName = AlertDialogPrimitive.Description.displayName;
var AlertDialogAction = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx18(
  AlertDialogPrimitive.Action,
  {
    ref,
    className: cn(buttonVariants(), className),
    ...props
  }
));
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName;
var AlertDialogCancel = React7.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx18(
  AlertDialogPrimitive.Cancel,
  {
    ref,
    className: cn(
      buttonVariants({ variant: "outline" }),
      "rf-mt-2 sm:rf-mt-0",
      className
    ),
    ...props
  }
));
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName;

// lib/components/ui/checkbox.tsx
import * as React8 from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox";
import { Check as Check2 } from "lucide-react";
import { jsx as jsx19 } from "react/jsx-runtime";
var Checkbox = React8.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx19(
  CheckboxPrimitive.Root,
  {
    ref,
    className: cn(
      "rf-peer rf-h-4 rf-w-4 rf-shrink-0 rf-rounded-sm rf-border rf-border-zinc-200 rf-border-zinc-900 rf-shadow focus-visible:rf-outline-none focus-visible:rf-ring-1 focus-visible:rf-ring-zinc-950 disabled:rf-cursor-not-allowed disabled:rf-opacity-50 data-[state=checked]:rf-bg-zinc-900 data-[state=checked]:rf-text-zinc-50 dark:rf-border-zinc-800 dark:rf-border-zinc-50 dark:focus-visible:rf-ring-zinc-300 dark:data-[state=checked]:rf-bg-zinc-50 dark:data-[state=checked]:rf-text-zinc-900",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx19(
      CheckboxPrimitive.Indicator,
      {
        className: cn(
          "rf-flex rf-items-center rf-justify-center rf-text-current"
        ),
        children: /* @__PURE__ */ jsx19(Check2, { className: "rf-h-4 rf-w-4" })
      }
    )
  }
));
Checkbox.displayName = CheckboxPrimitive.Root.displayName;

// lib/components/ImportComponentDialog2/ImportComponentDialog2.tsx
import * as React11 from "react";
import { Loader2 as Loader23 } from "lucide-react";

// lib/components/ui/dialog.tsx
import * as React9 from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import { jsx as jsx20, jsxs as jsxs14 } from "react/jsx-runtime";
var Dialog = DialogPrimitive.Root;
var DialogPortal = DialogPrimitive.Portal;
var DialogOverlay = React9.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx20(
  DialogPrimitive.Overlay,
  {
    className: cn(
      "rf-fixed rf-inset-0 rf-z-50 rf-bg-black/80 data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0",
      className
    ),
    ...props,
    ref
  }
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;
var DialogContent = React9.forwardRef(({ className, children, showOverlay = true, ...props }, ref) => /* @__PURE__ */ jsxs14(DialogPortal, { children: [
  /* @__PURE__ */ jsx20(DialogOverlay, { className: cn(showOverlay ? "" : "rf-hidden") }),
  /* @__PURE__ */ jsx20(
    DialogPrimitive.Content,
    {
      ref,
      className: cn(
        "rf-fixed rf-left-[50%] rf-top-[50%] rf-z-50 rf-grid rf-w-full rf-max-w-lg rf-translate-x-[-50%] rf-translate-y-[-50%] rf-gap-4 rf-border rf-border-zinc-200 rf-bg-white rf-p-6 rf-shadow-lg rf-duration-200 data-[state=open]:rf-animate-in data-[state=closed]:rf-animate-out data-[state=closed]:rf-fade-out-0 data-[state=open]:rf-fade-in-0 data-[state=closed]:rf-zoom-out-95 data-[state=open]:rf-zoom-in-95 data-[state=closed]:rf-slide-out-to-left-1/2 data-[state=closed]:rf-slide-out-to-top-[48%] data-[state=open]:rf-slide-in-from-left-1/2 data-[state=open]:rf-slide-in-from-top-[48%] sm:rf-rounded-lg dark:rf-border-zinc-800 dark:rf-bg-zinc-950",
        className
      ),
      ...props,
      children
    }
  )
] }));
DialogContent.displayName = DialogPrimitive.Content.displayName;
var DialogHeader = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx20(
  "div",
  {
    className: cn(
      "rf-flex rf-flex-col rf-space-y-2 rf-text-center sm:rf-text-left",
      className
    ),
    ...props
  }
);
DialogHeader.displayName = "DialogHeader";
var DialogFooter = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx20(
  "div",
  {
    className: cn(
      "rf-flex rf-flex-col-reverse sm:rf-flex-row sm:rf-justify-end sm:rf-space-x-2",
      className
    ),
    ...props
  }
);
DialogFooter.displayName = "DialogFooter";
var DialogTitle = React9.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx20(
  DialogPrimitive.Title,
  {
    ref,
    className: cn("rf-text-lg rf-font-semibold", className),
    ...props
  }
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;
var DialogDescription = React9.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx20(
  DialogPrimitive.Description,
  {
    ref,
    className: cn(
      "rf-text-sm rf-text-zinc-500 dark:rf-text-zinc-400",
      className
    ),
    ...props
  }
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;

// lib/components/ImportComponentDialog2/config.ts
var SOURCE_CONFIG = {
  "tscircuit.com": {
    label: "tscircuit.com",
    placeholder: "Search tscircuit packages...",
    emptyMessage: "No packages found"
  },
  jlcpcb: {
    label: "JLCPCB Parts",
    placeholder: "Search JLCPCB parts (e.g. C14663)...",
    emptyMessage: "No parts found"
  },
  kicad: {
    label: "KiCad Footprints",
    placeholder: "Search KiCad footprints...",
    emptyMessage: "No footprints found"
  }
};

// lib/components/ImportComponentDialog2/api/jlcpcb.ts
import { fetchEasyEDAComponent, convertRawEasyToTsx } from "easyeda/browser";
var searchJlcpcbComponents = async (query, limit = 10) => {
  const encodedQuery = encodeURIComponent(query);
  const response = await fetch(
    `https://jlcsearch.tscircuit.com/api/search?limit=${limit}&q=${encodedQuery}`
  );
  if (!response.ok) {
    throw new Error(`JLCPCB API error: ${response.status}`);
  }
  const data = await response.json();
  return data.components ?? [];
};
var mapJlcpcbComponentToSummary = (component) => ({
  lcscId: component.lcsc,
  manufacturer: component.mfr,
  description: component.description,
  partNumber: `C${component.lcsc}`,
  package: component.package,
  price: component.price,
  stock: component.stock
});
var loadJlcpcbComponentTsx = async (partNumber, opts) => {
  const component = await fetchEasyEDAComponent(partNumber, {
    // @ts-ignore
    fetch: (url, options) => fetch(`${opts?.apiBase ?? API_BASE}/proxy`, {
      ...options,
      headers: {
        ...options?.headers,
        "X-Target-Url": url.toString(),
        "X-Sender-Origin": options?.headers?.origin ?? "",
        "X-Sender-Host": options?.headers?.host ?? "https://easyeda.com",
        "X-Sender-Referer": options?.headers?.referer ?? "",
        "X-Sender-User-Agent": options?.headers?.userAgent ?? "",
        "X-Sender-Cookie": options?.headers?.cookie ?? "",
        authority: options?.headers?.authority ?? "",
        "content-type": options?.headers?.["content-type"] ?? "",
        ...opts?.headers
      }
    })
  });
  return convertRawEasyToTsx(component);
};

// lib/components/ImportComponentDialog2/components/SearchBar.tsx
import * as React10 from "react";
import { Loader2, Search } from "lucide-react";
import { Fragment as Fragment3, jsx as jsx21, jsxs as jsxs15 } from "react/jsx-runtime";
var SearchBar = ({
  query,
  placeholder,
  isSearching,
  onQueryChange,
  onSubmit
}) => {
  const handleKeyDown = React10.useCallback(
    (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        onSubmit();
      }
    },
    [onSubmit]
  );
  return /* @__PURE__ */ jsxs15("div", { className: "rf-flex rf-items-center rf-gap-2 rf-mt-4", children: [
    /* @__PURE__ */ jsxs15("div", { className: "rf-relative rf-flex-grow", children: [
      /* @__PURE__ */ jsx21(Search, { className: "rf-absolute rf-left-2 rf-top-2.5 rf-h-4 rf-w-4 rf-text-muted-foreground" }),
      /* @__PURE__ */ jsx21(
        Input,
        {
          placeholder,
          className: "rf-pl-8",
          spellCheck: false,
          autoComplete: "off",
          value: query,
          onChange: (event) => onQueryChange(event.target.value),
          onKeyDown: handleKeyDown
        }
      )
    ] }),
    /* @__PURE__ */ jsx21(
      Button,
      {
        onClick: onSubmit,
        disabled: isSearching || query.trim().length < 1,
        className: "sm:rf-px-4 rf-px-3",
        children: isSearching ? /* @__PURE__ */ jsx21(Loader2, { className: "rf-h-4 rf-w-4 rf-animate-spin" }) : /* @__PURE__ */ jsxs15(Fragment3, { children: [
          /* @__PURE__ */ jsx21(Search, { className: "rf-h-4 rf-w-4 sm:rf-hidden" }),
          /* @__PURE__ */ jsx21("span", { className: "rf-hidden sm:rf-inline", children: "Search" })
        ] })
      }
    )
  ] });
};

// lib/components/ImportComponentDialog2/components/SearchResultsList.tsx
import { jsx as jsx22, jsxs as jsxs16 } from "react/jsx-runtime";
var getResultKey = (result) => {
  switch (result.source) {
    case "tscircuit.com": {
      const pkg = result.package;
      const identifier = pkg.package_id ?? `${pkg.owner_github_username ?? "unknown"}-${pkg.unscoped_name ?? pkg.name ?? "package"}`;
      return `tscircuit-${identifier}`;
    }
    case "jlcpcb":
      return `jlc-${result.component.lcscId}`;
    case "kicad":
      return `kicad-${result.footprint.path}`;
    default:
      return "unknown";
  }
};
var getPrimaryText = (result) => {
  switch (result.source) {
    case "tscircuit.com":
      return result.package.unscoped_name;
    case "jlcpcb":
      return result.component.manufacturer;
    case "kicad":
      return result.footprint.qualifiedName;
  }
};
var getSecondaryText = (result) => {
  switch (result.source) {
    case "tscircuit.com":
      return result.package.description || (result.package.owner_github_username ? `Component by ${result.package.owner_github_username}` : void 0);
    case "jlcpcb":
      return result.component.description;
    case "kicad":
      return result.footprint.description;
  }
};
var getPartNumberLabel = (result) => {
  switch (result.source) {
    case "tscircuit.com":
      return result.package.name;
    case "jlcpcb":
      return result.component.partNumber;
    case "kicad":
      return void 0;
  }
};
var SearchResultsList = ({
  results,
  selected,
  onSelect,
  onShowDetails
}) => {
  const selectedKey = selected ? getResultKey(selected) : null;
  return /* @__PURE__ */ jsx22("div", { className: "rf-divide-y", children: results.map((result) => {
    const key = getResultKey(result);
    const isSelected = selectedKey === key;
    const primary = getPrimaryText(result);
    const secondary = getSecondaryText(result);
    const partNumber = getPartNumberLabel(result);
    const stock = result.source === "jlcpcb" ? result.component.stock : null;
    return /* @__PURE__ */ jsxs16(
      "div",
      {
        className: `rf-p-3 rf-flex rf-flex-col sm:rf-grid sm:rf-grid-cols-[1fr_auto] rf-items-start sm:rf-items-center rf-cursor-pointer hover:rf-bg-zinc-100 rf-gap-2 ${isSelected ? "rf-bg-zinc-100" : ""}`,
        onClick: () => onSelect(result),
        children: [
          /* @__PURE__ */ jsxs16("div", { className: "rf-min-w-0 rf-overflow-hidden rf-w-full", children: [
            /* @__PURE__ */ jsxs16("div", { className: "rf-flex rf-items-start rf-gap-2", children: [
              /* @__PURE__ */ jsx22("div", { className: "rf-font-medium rf-text-sm rf-truncate rf-flex-1 rf-min-w-0", children: primary }),
              result.source === "jlcpcb" && stock != null ? /* @__PURE__ */ jsxs16("div", { className: "rf-text-xs rf-text-zinc-500 rf-font-medium rf-whitespace-nowrap sm:rf-hidden", children: [
                stock.toLocaleString(),
                " in stock"
              ] }) : null
            ] }),
            /* @__PURE__ */ jsxs16("div", { className: "rf-text-xs rf-text-zinc-500 rf-truncate", children: [
              partNumber ? /* @__PURE__ */ jsx22("span", { className: "rf-mr-2", children: partNumber }) : null,
              secondary
            ] })
          ] }),
          result.source === "tscircuit.com" && onShowDetails ? /* @__PURE__ */ jsx22("div", { className: "rf-flex rf-gap-2 rf-flex-shrink-0 rf-w-full sm:rf-w-auto", children: /* @__PURE__ */ jsx22(
            Button,
            {
              variant: "outline",
              size: "sm",
              className: "rf-text-xs rf-w-full sm:rf-w-auto",
              onClick: (event) => {
                event.stopPropagation();
                onShowDetails(result);
              },
              children: "See Details"
            }
          ) }) : result.source === "jlcpcb" && stock != null ? /* @__PURE__ */ jsxs16("div", { className: "rf-hidden sm:rf-block rf-text-xs rf-text-zinc-500 rf-font-medium rf-w-full sm:rf-w-auto sm:rf-text-right sm:rf-justify-self-end rf-whitespace-nowrap", children: [
            stock.toLocaleString(),
            " in stock"
          ] }) : null
        ]
      },
      key
    );
  }) });
};

// lib/components/ImportComponentDialog2/components/TscircuitPackageDetailsDialog.tsx
import { ExternalLink, Loader2 as Loader22 } from "lucide-react";
import { Fragment as Fragment4, jsx as jsx23, jsxs as jsxs17 } from "react/jsx-runtime";
var TscircuitPackageDetailsDialog = ({
  packageResult,
  isOpen,
  onOpenChange,
  isLoading,
  details,
  previewTab,
  onPreviewTabChange,
  isSubmitting,
  onImport
}) => {
  const pkg = packageResult?.package ?? null;
  const pcbPreviewUrl = pkg?.latest_pcb_preview_image_url;
  const schematicPreviewUrl = pkg?.latest_sch_preview_image_url;
  const cadPreviewUrl = pkg?.latest_cad_preview_image_url;
  const packageName = pkg?.unscoped_name?.split("/").pop() ?? pkg?.unscoped_name;
  const ownerUsername = pkg?.owner_github_username ?? void 0;
  const ownerUrl = ownerUsername ? `https://tscircuit.com/${ownerUsername}` : void 0;
  const packageUrl = ownerUsername && packageName ? `https://tscircuit.com/${ownerUsername}/${packageName}` : void 0;
  return /* @__PURE__ */ jsx23(Dialog, { open: isOpen, onOpenChange, children: /* @__PURE__ */ jsxs17(
    DialogContent,
    {
      showOverlay: false,
      style: { width: "calc(100vw - 2rem)" },
      className: "rf-max-w-5xl no-scrollbar !rf-overflow-y-auto rf-max-h-[90vh] rf-overflow-hidden rf-flex rf-flex-col rf-rounded-sm",
      children: [
        /* @__PURE__ */ jsx23(DialogHeader, { className: "rf-pb-4 rf-border-b", children: /* @__PURE__ */ jsx23("div", { className: "rf-flex rf-items-start rf-justify-between rf-gap-4", children: /* @__PURE__ */ jsxs17("div", { className: "rf-flex-1 rf-min-w-0", children: [
          /* @__PURE__ */ jsx23(DialogTitle, { className: "rf-text-xl rf-font-semibold rf-truncate", children: packageName }),
          /* @__PURE__ */ jsx23(DialogDescription, { children: pkg?.description })
        ] }) }) }),
        /* @__PURE__ */ jsxs17("div", { className: "rf-flex-1 rf-overflow-y-auto rf-py-4 rf-space-y-6", children: [
          ownerUsername ? /* @__PURE__ */ jsxs17("div", { children: [
            /* @__PURE__ */ jsx23("span", { className: "rf-text-xs rf-font-medium rf-text-gray-500 rf-uppercase rf-tracking-wide", children: "Created by" }),
            /* @__PURE__ */ jsx23("div", { className: "rf-mt-1 rf-text-sm rf-font-medium", children: ownerUrl ? /* @__PURE__ */ jsx23(
              "a",
              {
                href: ownerUrl,
                target: "_blank",
                rel: "noopener noreferrer",
                className: "rf-text-black hover:rf-underline",
                children: ownerUsername
              }
            ) : ownerUsername })
          ] }) : null,
          (cadPreviewUrl || pcbPreviewUrl || schematicPreviewUrl) && /* @__PURE__ */ jsx23(Fragment4, { children: /* @__PURE__ */ jsxs17("div", { children: [
            /* @__PURE__ */ jsx23("h3", { className: "rf-text-lg rf-font-semibold rf-mb-4", children: "Preview" }),
            /* @__PURE__ */ jsxs17(
              Tabs,
              {
                value: previewTab,
                onValueChange: (value) => onPreviewTabChange(value),
                children: [
                  /* @__PURE__ */ jsxs17(TabsList, { className: "rf-inline-flex rf-h-9 rf-items-center rf-justify-center rf-rounded-lg rf-bg-zinc-100 rf-p-1 rf-text-zinc-500 dark:rf-bg-zinc-800 dark:rf-text-zinc-400", children: [
                    pcbPreviewUrl && /* @__PURE__ */ jsx23(TabsTrigger, { value: "pcb", children: "PCB" }),
                    schematicPreviewUrl && /* @__PURE__ */ jsx23(TabsTrigger, { value: "schematic", children: "Schematic" }),
                    cadPreviewUrl && /* @__PURE__ */ jsx23(TabsTrigger, { value: "3d", children: "3D" })
                  ] }),
                  /* @__PURE__ */ jsxs17("div", { className: "rf-mt-4", children: [
                    /* @__PURE__ */ jsx23(
                      TabsContent,
                      {
                        value: "pcb",
                        className: "rf-border rf-rounded-lg rf-overflow-hidden rf-bg-gray-50",
                        children: pcbPreviewUrl ? /* @__PURE__ */ jsx23(
                          "img",
                          {
                            src: pcbPreviewUrl,
                            alt: `${packageName ?? "package"} PCB preview`,
                            className: "rf-w-full rf-h-full rf-object-contain rf-bg-white rf-p-4"
                          }
                        ) : null
                      }
                    ),
                    /* @__PURE__ */ jsx23(
                      TabsContent,
                      {
                        value: "schematic",
                        className: "rf-border rf-rounded-lg rf-overflow-hidden rf-bg-gray-50",
                        children: schematicPreviewUrl ? /* @__PURE__ */ jsx23(
                          "img",
                          {
                            src: schematicPreviewUrl,
                            alt: `${packageName ?? "package"} schematic preview`,
                            className: "rf-w-full rf-h-full rf-object-contain rf-bg-white rf-p-4"
                          }
                        ) : null
                      }
                    ),
                    /* @__PURE__ */ jsx23(
                      TabsContent,
                      {
                        value: "3d",
                        className: "rf-border rf-rounded-lg rf-overflow-hidden rf-bg-gray-50",
                        children: cadPreviewUrl ? /* @__PURE__ */ jsx23(
                          "img",
                          {
                            src: cadPreviewUrl,
                            alt: `${packageName ?? "package"} 3D preview`,
                            className: "rf-w-full rf-h-full rf-object-contain rf-bg-white rf-p-4"
                          }
                        ) : null
                      }
                    )
                  ] })
                ]
              }
            )
          ] }) }),
          details?.ai_description ? /* @__PURE__ */ jsxs17("section", { children: [
            /* @__PURE__ */ jsx23("h3", { className: "rf-text-lg rf-font-semibold rf-mb-3", children: "AI Description" }),
            /* @__PURE__ */ jsx23("div", { className: "rf-bg-gray-50 rf-border rf-border-gray-200 rf-rounded-lg rf-p-4", children: /* @__PURE__ */ jsx23("p", { className: "rf-text-sm rf-text-gray-700 rf-leading-relaxed", children: details.ai_description }) })
          ] }) : null,
          details?.ai_usage_instructions ? /* @__PURE__ */ jsxs17("section", { children: [
            /* @__PURE__ */ jsx23("h3", { className: "rf-text-lg rf-font-semibold rf-mb-3", children: "Usage Instructions" }),
            /* @__PURE__ */ jsx23("div", { className: "rf-bg-gray-50 rf-border rf-border-gray-200 rf-rounded-lg rf-p-4", children: /* @__PURE__ */ jsx23("p", { className: "rf-text-sm rf-text-gray-700 rf-leading-relaxed rf-whitespace-pre-wrap", children: details.ai_usage_instructions }) })
          ] }) : null,
          isLoading ? /* @__PURE__ */ jsxs17("div", { className: "rf-flex rf-justify-center rf-items-center rf-gap-2 rf-text-gray-500", children: [
            /* @__PURE__ */ jsx23(Loader22, { className: "rf-h-4 rf-w-4 rf-animate-spin" }),
            /* @__PURE__ */ jsx23("span", { className: "rf-text-sm", children: "Loading package details..." })
          ] }) : null
        ] }),
        /* @__PURE__ */ jsxs17(DialogFooter, { className: "rf-pt-4 rf-border-t rf-flex rf-flex-col sm:rf-flex-row rf-justify-between rf-gap-2", children: [
          /* @__PURE__ */ jsx23("div", { className: "rf-flex-1", children: packageUrl ? /* @__PURE__ */ jsxs17(
            Button,
            {
              variant: "outline",
              size: "sm",
              className: "rf-gap-2 rf-w-full sm:rf-w-auto",
              onClick: () => window.open(packageUrl, "_blank"),
              children: [
                /* @__PURE__ */ jsx23(ExternalLink, { className: "rf-h-4 rf-w-4" }),
                "View on tscircuit.com"
              ]
            }
          ) : null }),
          /* @__PURE__ */ jsxs17("div", { className: "rf-flex rf-flex-col sm:rf-flex-row rf-gap-2", children: [
            /* @__PURE__ */ jsx23(
              Button,
              {
                variant: "outline",
                onClick: () => onOpenChange(false),
                className: "rf-order-2 sm:rf-order-1",
                children: "Close"
              }
            ),
            /* @__PURE__ */ jsx23(
              Button,
              {
                onClick: onImport,
                disabled: isSubmitting,
                className: "rf-bg-blue-600 hover:rf-bg-blue-700",
                children: isSubmitting ? /* @__PURE__ */ jsx23(Loader22, { className: "rf-h-4 rf-w-4 rf-animate-spin" }) : "Import Component"
              }
            )
          ] })
        ] })
      ]
    }
  ) });
};

// lib/components/ImportComponentDialog2/hooks/useTscircuitPackageDetails.ts
import { useCallback as useCallback2, useState as useState8 } from "react";
var useTscircuitPackageDetails = () => {
  const [details, setDetails] = useState8(null);
  const [isLoading, setIsLoading] = useState8(false);
  const fetchDetails = useCallback2(async (owner, name) => {
    setIsLoading(true);
    try {
      const response = await fetch(
        `https://api.tscircuit.com/packages/get?name=${encodeURIComponent(`${owner}/${name}`)}`
      );
      if (!response.ok) {
        throw new Error(`Failed to load package details: ${response.status}`);
      }
      const data = await response.json();
      setDetails(
        data.package ?? null
      );
    } catch (error) {
      console.error("Failed to fetch package details", error);
      setDetails(null);
    } finally {
      setIsLoading(false);
    }
  }, []);
  const reset = useCallback2(() => {
    setDetails(null);
    setIsLoading(false);
  }, []);
  return {
    details,
    isLoading,
    fetchDetails,
    reset
  };
};

// lib/components/ImportComponentDialog2/hooks/useTscircuitPackageSearch.ts
import { useCallback as useCallback3, useState as useState9 } from "react";

// lib/components/ImportComponentDialog2/api/tscircuit.ts
var searchTscircuitPackages = async (query) => {
  const response = await fetch(
    "https://registry-api.tscircuit.com/packages/search",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ query })
    }
  );
  if (!response.ok) {
    throw new Error(`tscircuit registry error: ${response.status}`);
  }
  const data = await response.json();
  return data.packages ?? [];
};

// lib/components/ImportComponentDialog2/hooks/useTscircuitPackageSearch.ts
var useTscircuitPackageSearch = () => {
  const [results, setResults] = useState9([]);
  const [isSearching, setIsSearching] = useState9(false);
  const [error, setError] = useState9(null);
  const [hasSearched, setHasSearched] = useState9(false);
  const search = useCallback3(async (query) => {
    const trimmedQuery = query.trim();
    if (!trimmedQuery) return [];
    setIsSearching(true);
    setError(null);
    try {
      const packages = await searchTscircuitPackages(trimmedQuery);
      const mappedResults = packages.map((pkg) => ({
        source: "tscircuit.com",
        package: pkg
      }));
      setResults(mappedResults);
      return mappedResults;
    } catch (error2) {
      console.error("Error searching tscircuit packages", error2);
      setResults([]);
      setError(
        error2 instanceof Error ? error2.message : "Failed to search tscircuit packages"
      );
      return [];
    } finally {
      setIsSearching(false);
      setHasSearched(true);
    }
  }, []);
  const reset = useCallback3(() => {
    setResults([]);
    setIsSearching(false);
    setError(null);
    setHasSearched(false);
  }, []);
  return {
    results,
    isSearching,
    error,
    hasSearched,
    search,
    reset
  };
};

// lib/components/ImportComponentDialog2/hooks/useJlcpcbComponentSearch.ts
import { useCallback as useCallback4, useState as useState10 } from "react";
var normalizeQuery = (query) => {
  const trimmedQuery = query.trim();
  const isPartNumber = /^C\d+/i.test(trimmedQuery);
  if (isPartNumber) {
    return trimmedQuery.replace(/^C/i, "");
  }
  return trimmedQuery;
};
var useJlcpcbComponentSearch = () => {
  const [results, setResults] = useState10([]);
  const [isSearching, setIsSearching] = useState10(false);
  const [error, setError] = useState10(null);
  const [hasSearched, setHasSearched] = useState10(false);
  const search = useCallback4(async (query) => {
    const normalizedQuery = normalizeQuery(query);
    if (!normalizedQuery) return [];
    setIsSearching(true);
    setError(null);
    try {
      const components = await searchJlcpcbComponents(normalizedQuery, 10);
      const mappedResults = components.map((component) => ({
        source: "jlcpcb",
        component: mapJlcpcbComponentToSummary(component)
      }));
      setResults(mappedResults);
      return mappedResults;
    } catch (error2) {
      console.error("Error searching JLCPCB components", error2);
      setResults([]);
      setError(
        error2 instanceof Error ? error2.message : "Failed to search JLCPCB components"
      );
      return [];
    } finally {
      setIsSearching(false);
      setHasSearched(true);
    }
  }, []);
  const reset = useCallback4(() => {
    setResults([]);
    setIsSearching(false);
    setError(null);
    setHasSearched(false);
  }, []);
  return {
    results,
    isSearching,
    error,
    hasSearched,
    search,
    reset
  };
};

// lib/components/ImportComponentDialog2/hooks/useKicadFootprintSearch.ts
import { useCallback as useCallback5, useState as useState11 } from "react";

// lib/components/ImportComponentDialog2/api/kicad.ts
import Fuse from "fuse.js";
var footprintsCache = null;
var footprintsPromise = null;
var fuse = null;
var ensureFootprints = async () => {
  if (footprintsCache) return footprintsCache;
  if (footprintsPromise) return footprintsPromise;
  footprintsPromise = fetch(
    "https://kicad-mod-cache.tscircuit.com/kicad_files.json"
  ).then((response) => response.json()).then((footprints) => {
    footprintsCache = footprints;
    footprintsPromise = null;
    return footprints;
  });
  return footprintsPromise;
};
var searchKicadFootprints = async (query, limit = 20) => {
  const footprints = await ensureFootprints();
  if (!fuse) {
    fuse = new Fuse(footprints);
  }
  return fuse.search(query).slice(0, limit).map((result) => result.item);
};
var mapKicadFootprintToSummary = (footprintPath) => {
  const cleanedFootprint = footprintPath.replace(".pretty/", ":").replace(".kicad_mod", "");
  const footprintString = `kicad:${cleanedFootprint}`;
  return {
    path: footprintPath,
    qualifiedName: footprintString,
    description: cleanedFootprint
  };
};

// lib/components/ImportComponentDialog2/hooks/useKicadFootprintSearch.ts
var useKicadFootprintSearch = () => {
  const [results, setResults] = useState11([]);
  const [isSearching, setIsSearching] = useState11(false);
  const [error, setError] = useState11(null);
  const [hasSearched, setHasSearched] = useState11(false);
  const search = useCallback5(async (query) => {
    const trimmedQuery = query.trim();
    if (!trimmedQuery) return [];
    setIsSearching(true);
    setError(null);
    try {
      const footprints = await searchKicadFootprints(trimmedQuery, 20);
      const mappedResults = footprints.map((footprintPath) => ({
        source: "kicad",
        footprint: mapKicadFootprintToSummary(footprintPath)
      }));
      setResults(mappedResults);
      return mappedResults;
    } catch (error2) {
      console.error("Error searching KiCad footprints", error2);
      setResults([]);
      setError(
        error2 instanceof Error ? error2.message : "Failed to search KiCad footprints"
      );
      return [];
    } finally {
      setIsSearching(false);
      setHasSearched(true);
    }
  }, []);
  const reset = useCallback5(() => {
    setResults([]);
    setIsSearching(false);
    setError(null);
    setHasSearched(false);
  }, []);
  return {
    results,
    isSearching,
    error,
    hasSearched,
    search,
    reset
  };
};

// lib/components/ImportComponentDialog2/ImportComponentDialog2.tsx
import { jsx as jsx24, jsxs as jsxs18 } from "react/jsx-runtime";
var computeAvailableSources = ({
  onTscircuitPackageSelected,
  onJlcpcbComponentTsxLoaded,
  onKicadStringSelected
}) => {
  const sources = [];
  if (onTscircuitPackageSelected) sources.push("tscircuit.com");
  if (onJlcpcbComponentTsxLoaded) sources.push("jlcpcb");
  if (onKicadStringSelected) sources.push("kicad");
  return sources;
};
var ImportComponentDialog2 = ({
  isOpen,
  onClose,
  jlcpcbProxyRequestHeaders,
  onKicadStringSelected,
  onTscircuitPackageSelected,
  onJlcpcbComponentTsxLoaded,
  jlcpcbProxyApiBase
}) => {
  useStyles();
  const availableSources = React11.useMemo(
    () => computeAvailableSources({
      onKicadStringSelected,
      onTscircuitPackageSelected,
      onJlcpcbComponentTsxLoaded
    }),
    [
      onKicadStringSelected,
      onTscircuitPackageSelected,
      onJlcpcbComponentTsxLoaded
    ]
  );
  const hasSources = availableSources.length > 0;
  const [activeSource, setActiveSource] = React11.useState(
    availableSources[0] ?? "tscircuit.com"
  );
  const [searchQuery, setSearchQuery] = React11.useState("");
  const [selectedSearchResult, setSelectedSearchResult] = React11.useState(null);
  const {
    results: tscircuitResults,
    isSearching: isTscircuitSearching,
    error: tscircuitError,
    hasSearched: hasTscircuitSearched,
    search: searchTscircuit,
    reset: resetTscircuitSearch
  } = useTscircuitPackageSearch();
  const {
    results: jlcpcbResults,
    isSearching: isJlcpcbSearching,
    error: jlcpcbError,
    hasSearched: hasJlcpcbSearched,
    search: searchJlcpcb,
    reset: resetJlcpcbSearch
  } = useJlcpcbComponentSearch();
  const {
    results: kicadResults,
    isSearching: isKicadSearching,
    error: kicadError,
    hasSearched: hasKicadSearched,
    search: searchKicad,
    reset: resetKicadSearch
  } = useKicadFootprintSearch();
  const {
    details: packageDetails,
    isLoading: isPackageDetailsLoading,
    fetchDetails: fetchPackageDetails,
    reset: resetPackageDetails
  } = useTscircuitPackageDetails();
  const [componentForDetails, setComponentForDetails] = React11.useState(null);
  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = React11.useState(false);
  const [detailsPreviewTab, setDetailsPreviewTab] = React11.useState("pcb");
  const [importErrorMessage, setImportErrorMessage] = React11.useState(null);
  const [isSubmittingImport, setIsSubmittingImport] = React11.useState(false);
  React11.useEffect(() => {
    setImportErrorMessage(null);
  }, [selectedSearchResult]);
  const resetAllSearches = React11.useCallback(() => {
    resetTscircuitSearch();
    resetJlcpcbSearch();
    resetKicadSearch();
    setSelectedSearchResult(null);
  }, [resetJlcpcbSearch, resetKicadSearch, resetTscircuitSearch]);
  React11.useEffect(() => {
    if (!isOpen) {
      resetAllSearches();
      setSearchQuery("");
      setIsDetailsDialogOpen(false);
      setComponentForDetails(null);
      setImportErrorMessage(null);
    }
  }, [isOpen, resetAllSearches]);
  React11.useEffect(() => {
    setSearchQuery("");
    setSelectedSearchResult(null);
    if (activeSource === "tscircuit.com") {
      resetTscircuitSearch();
    } else if (activeSource === "jlcpcb") {
      resetJlcpcbSearch();
    } else if (activeSource === "kicad") {
      resetKicadSearch();
    }
  }, [activeSource, resetJlcpcbSearch, resetKicadSearch, resetTscircuitSearch]);
  const handleShowDetails = (component) => {
    setSelectedSearchResult(component);
    setComponentForDetails(component);
    setDetailsPreviewTab("pcb");
    setIsDetailsDialogOpen(true);
    resetPackageDetails();
    const owner = component.package.owner_github_username;
    const unscopedName = component.package.unscoped_name;
    if (owner && unscopedName) {
      const packageName = unscopedName.split("/").pop() ?? unscopedName;
      fetchPackageDetails(owner, packageName);
    }
  };
  const performSearch = async () => {
    const trimmedQuery = searchQuery.trim();
    if (!trimmedQuery) return;
    setSelectedSearchResult(null);
    if (activeSource === "tscircuit.com") {
      await searchTscircuit(searchQuery);
    } else if (activeSource === "jlcpcb") {
      await searchJlcpcb(searchQuery);
    } else if (activeSource === "kicad") {
      await searchKicad(searchQuery);
    }
  };
  const performActionForComponent = async (result) => {
    try {
      setImportErrorMessage(null);
      setIsSubmittingImport(true);
      if (result.source === "kicad") {
        if (!onKicadStringSelected) {
          throw new Error("KiCad handler not provided");
        }
        await onKicadStringSelected({
          result,
          footprint: result.footprint.qualifiedName
        });
      } else if (result.source === "jlcpcb") {
        if (!onJlcpcbComponentTsxLoaded) {
          throw new Error("JLCPCB handler not provided");
        }
        const tsx = await loadJlcpcbComponentTsx(result.component.partNumber, {
          headers: jlcpcbProxyRequestHeaders,
          apiBase: jlcpcbProxyApiBase
        });
        await onJlcpcbComponentTsxLoaded({ result, tsx });
      } else if (result.source === "tscircuit.com") {
        if (!onTscircuitPackageSelected) {
          throw new Error("tscircuit package handler not provided");
        }
        const owner = result.package.owner_github_username;
        const unscopedName = result.package.unscoped_name;
        if (!owner || !unscopedName) {
          throw new Error("Missing package metadata");
        }
        const packageName = unscopedName.split("/").pop() ?? unscopedName;
        const fullPackageName = `@tsci/${owner}.${packageName}`;
        await onTscircuitPackageSelected({
          result,
          fullPackageName
        });
      }
      return true;
    } catch (error) {
      console.error("Failed to import component", error);
      setImportErrorMessage(
        error instanceof Error ? error.message : "Failed to import component"
      );
      return false;
    } finally {
      setIsSubmittingImport(false);
    }
  };
  let searchResults = [];
  let isSearching = false;
  let searchError = null;
  let hasExecutedSearch = false;
  if (activeSource === "tscircuit.com") {
    searchResults = tscircuitResults;
    isSearching = isTscircuitSearching;
    searchError = tscircuitError;
    hasExecutedSearch = hasTscircuitSearched;
  } else if (activeSource === "jlcpcb") {
    searchResults = jlcpcbResults;
    isSearching = isJlcpcbSearching;
    searchError = jlcpcbError;
    hasExecutedSearch = hasJlcpcbSearched;
  } else if (activeSource === "kicad") {
    searchResults = kicadResults;
    isSearching = isKicadSearching;
    searchError = kicadError;
    hasExecutedSearch = hasKicadSearched;
  }
  const handleConfirm = async () => {
    if (!selectedSearchResult) return;
    const succeeded = await performActionForComponent(selectedSearchResult);
    if (succeeded) {
      onClose();
      resetAllSearches();
      setSearchQuery("");
    }
  };
  const handleDialogClose = (open) => {
    if (!open) {
      onClose();
    }
  };
  const handleDetailsClose = (open) => {
    setIsDetailsDialogOpen(open);
    if (!open) {
      setComponentForDetails(null);
    }
  };
  return /* @__PURE__ */ jsxs18(Dialog, { open: isOpen, onOpenChange: handleDialogClose, children: [
    /* @__PURE__ */ jsxs18(
      DialogContent,
      {
        style: { width: "calc(100vw - 2rem)" },
        className: "rf-rounded-sm rf-max-h-[90vh] rf-overflow-y-auto rf-flex rf-flex-col",
        children: [
          /* @__PURE__ */ jsxs18(DialogHeader, { children: [
            /* @__PURE__ */ jsx24(DialogTitle, { className: "rf-text-lg sm:rf-text-xl", children: "Import Component" }),
            /* @__PURE__ */ jsx24(DialogDescription, { className: "rf-text-sm", children: hasSources ? "Search for components from available sources." : "Import options are disabled because no handlers were provided." })
          ] }),
          hasSources ? /* @__PURE__ */ jsxs18(
            Tabs,
            {
              value: activeSource,
              onValueChange: (value) => setActiveSource(value),
              children: [
                /* @__PURE__ */ jsx24(TabsList, { className: "rf-flex rf-w-full rf-gap-2", children: availableSources.map((source) => /* @__PURE__ */ jsx24(
                  TabsTrigger,
                  {
                    value: source,
                    className: "rf-flex-1 rf-text-xs sm:rf-text-sm",
                    children: SOURCE_CONFIG[source].label
                  },
                  source
                )) }),
                /* @__PURE__ */ jsx24(
                  SearchBar,
                  {
                    query: searchQuery,
                    placeholder: SOURCE_CONFIG[activeSource].placeholder,
                    isSearching,
                    onQueryChange: setSearchQuery,
                    onSubmit: performSearch
                  }
                ),
                /* @__PURE__ */ jsx24("div", { className: "no-scrollbar rf-mt-4 rf-flex-1 rf-min-h-[200px] !rf-max-h-[40vh] !rf-overflow-y-auto rf-border rf-rounded-md", children: isSearching ? /* @__PURE__ */ jsxs18("div", { className: "rf-p-8 rf-text-center rf-text-zinc-500", children: [
                  /* @__PURE__ */ jsx24(Loader23, { className: "rf-h-8 rf-w-8 rf-animate-spin rf-mx-auto rf-mb-2" }),
                  /* @__PURE__ */ jsx24("p", { children: "Searching..." })
                ] }) : searchResults.length > 0 ? /* @__PURE__ */ jsx24(
                  SearchResultsList,
                  {
                    results: searchResults,
                    selected: selectedSearchResult,
                    onSelect: setSelectedSearchResult,
                    onShowDetails: activeSource === "tscircuit.com" ? handleShowDetails : void 0
                  }
                ) : /* @__PURE__ */ jsx24("div", { className: "rf-p-8 rf-text-center rf-text-zinc-500", children: searchError ? `Error: ${searchError}` : hasExecutedSearch ? SOURCE_CONFIG[activeSource].emptyMessage : "Enter a search term to find components" }) })
              ]
            }
          ) : null,
          importErrorMessage ? /* @__PURE__ */ jsx24("div", { className: "rf-text-sm rf-text-red-600 rf-mt-2", children: importErrorMessage }) : null,
          /* @__PURE__ */ jsxs18(DialogFooter, { className: "rf-flex rf-flex-col sm:rf-flex-row rf-gap-2", children: [
            /* @__PURE__ */ jsx24(
              Button,
              {
                variant: "outline",
                onClick: onClose,
                className: "rf-order-2 sm:rf-order-1",
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx24(
              Button,
              {
                onClick: handleConfirm,
                disabled: !selectedSearchResult || isSubmittingImport,
                className: "rf-order-1 sm:rf-order-2",
                children: isSubmittingImport ? /* @__PURE__ */ jsx24(Loader23, { className: "rf-h-4 rf-w-4 rf-animate-spin" }) : "Import"
              }
            )
          ] })
        ]
      }
    ),
    /* @__PURE__ */ jsx24(
      TscircuitPackageDetailsDialog,
      {
        packageResult: componentForDetails,
        isOpen: isDetailsDialogOpen,
        onOpenChange: handleDetailsClose,
        isLoading: isPackageDetailsLoading,
        details: packageDetails,
        previewTab: detailsPreviewTab,
        onPreviewTabChange: (value) => setDetailsPreviewTab(value),
        isSubmitting: isSubmittingImport,
        onImport: () => {
          if (!componentForDetails) return;
          performActionForComponent(componentForDetails).then((succeeded) => {
            if (succeeded) {
              setIsDetailsDialogOpen(false);
              onClose();
              resetAllSearches();
              setSearchQuery("");
            }
          });
        }
      }
    )
  ] });
};

// lib/components/ImportComponentDialog2/ImportComponentDialogForCli.tsx
import "react";
import { jsx as jsx25 } from "react/jsx-runtime";
var extractComponentName = (tsx) => {
  const match = tsx.match(/export const (\w+) =/);
  if (!match) {
    throw new Error("Could not determine component name from TSX contents");
  }
  return match[1];
};
var ImportComponentDialogForCli = (props) => {
  const pushEvent = useRunFrameStore((state) => state.pushEvent);
  const upsertFile = useRunFrameStore((state) => state.upsertFile);
  const handleTscircuitPackageSelected = async ({
    result,
    fullPackageName
  }) => {
    const packageName = result.package.unscoped_name;
    const displayName = packageName ?? result.package.name;
    await toast.promise(
      pushEvent({
        event_type: "INSTALL_PACKAGE",
        full_package_name: fullPackageName
      }),
      {
        loading: `Requesting install for "${displayName}"`,
        success: `Install requested for "${displayName}"`,
        error: (error) => `Failed to request install: ${error instanceof Error ? error.message : String(error)}`
      }
    );
  };
  const handleKicadStringSelected = async ({
    footprint
  }) => {
    await toast.promise(navigator.clipboard.writeText(footprint), {
      loading: `Copying "${footprint}"`,
      success: `Copied "${footprint}" to clipboard`,
      error: (error) => `Failed to copy footprint: ${error instanceof Error ? error.message : String(error)}`
    });
  };
  const handleJlcpcbComponentTsxLoaded = async ({
    result,
    tsx
  }) => {
    const componentName = extractComponentName(tsx);
    const filePath = `imports/${componentName}.tsx`;
    await toast.promise(upsertFile(filePath, tsx), {
      loading: `Importing ${result.component.partNumber}`,
      success: `Imported to "${filePath}"`,
      error: (error) => `Failed to import component: ${error instanceof Error ? error.message : String(error)}`
    });
  };
  return /* @__PURE__ */ jsx25(
    ImportComponentDialog2,
    {
      ...props,
      onTscircuitPackageSelected: handleTscircuitPackageSelected,
      onKicadStringSelected: handleKicadStringSelected,
      onJlcpcbComponentTsxLoaded: handleJlcpcbComponentTsxLoaded
    }
  );
};
ImportComponentDialogForCli.displayName = "ImportComponentDialogForCli";

// lib/optional-features/exporting/formats/export-fabrication-files.ts
import JSZip from "jszip";
import {
  stringifyGerberCommandLayers,
  convertSoupToGerberCommands,
  convertSoupToExcellonDrillCommands,
  stringifyExcellonDrill
} from "circuit-json-to-gerber";
import {
  convertCircuitJsonToBomRows,
  convertBomRowsToCsv
} from "circuit-json-to-bom-csv";
import { convertCircuitJsonToPickAndPlaceCsv } from "circuit-json-to-pnp-csv";

// lib/optional-features/exporting/open-for-download.ts
var openForDownload = (content, opts) => {
  const { fileName, mimeType = "text/plain" } = opts;
  const blob = content instanceof Blob ? content : new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = fileName;
  document.body.appendChild(a);
  a.click();
  setTimeout(() => {
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }, 0);
};

// lib/optional-features/exporting/formats/export-fabrication-files.ts
var exportFabricationFiles = async ({
  circuitJson,
  projectName
}) => {
  const zip = new JSZip();
  const filteredCircuitJson = circuitJson.filter(
    (element) => !("error_type" in element) && !("warning_type" in element)
  );
  const gerberLayerCmds = convertSoupToGerberCommands(filteredCircuitJson, {
    flip_y_axis: false
  });
  const gerberFileContents = stringifyGerberCommandLayers(gerberLayerCmds);
  for (const [fileName, fileContents] of Object.entries(gerberFileContents)) {
    zip.file(`gerber/${fileName}.gbr`, fileContents);
  }
  const drillCmds = convertSoupToExcellonDrillCommands({
    circuitJson: filteredCircuitJson,
    is_plated: true,
    flip_y_axis: false
  });
  const drillFileContents = stringifyExcellonDrill(drillCmds);
  zip.file("gerber/drill.drl", drillFileContents);
  const bomRows = await convertCircuitJsonToBomRows({ circuitJson });
  const bomCsv = await convertBomRowsToCsv(bomRows);
  zip.file("bom.csv", bomCsv);
  const pnpCsv = await convertCircuitJsonToPickAndPlaceCsv(circuitJson);
  zip.file("pick_and_place.csv", pnpCsv);
  const zipBlob = await zip.generateAsync({ type: "blob" });
  openForDownload(zipBlob, {
    fileName: `${projectName}_fabrication_files.zip`
  });
};

// lib/optional-features/exporting/formats/export-glb.ts
import { convertCircuitJsonToGltf } from "circuit-json-to-gltf";
var exportGlb = async ({
  circuitJson,
  projectName
}) => {
  let blob;
  try {
    const glbArrayBuffer = await convertCircuitJsonToGltf(circuitJson, {
      format: "glb",
      boardTextureResolution: 512
    });
    if (!glbArrayBuffer || !(glbArrayBuffer instanceof ArrayBuffer)) {
      throw new Error("Invalid GLB data returned from converter");
    }
    blob = new Blob([glbArrayBuffer], {
      type: "model/gltf-binary"
    });
  } catch (error) {
    console.error("GLB Export Error:", error);
    return;
  }
  openForDownload(blob, {
    fileName: `${projectName}.glb`
  });
};

// lib/optional-features/exporting/formats/export-pinout-svg.ts
import { convertCircuitJsonToPinoutSvg } from "circuit-to-svg";
var exportPinoutSvg = ({
  circuitJson,
  projectName
}) => {
  const svgString = convertCircuitJsonToPinoutSvg(circuitJson);
  openForDownload(svgString, {
    fileName: `${projectName}-pinout.svg`,
    mimeType: "image/svg+xml"
  });
};

// lib/optional-features/exporting/formats/export-kicad-project.ts
import JSZip2 from "jszip";
import {
  CircuitJsonToKicadPcbConverter,
  CircuitJsonToKicadSchConverter,
  CircuitJsonToKicadProConverter
} from "circuit-json-to-kicad";
var createKicadProjectZip = async ({
  circuitJson,
  projectName
}) => {
  const schConverter = new CircuitJsonToKicadSchConverter(circuitJson);
  schConverter.runUntilFinished();
  const schContent = schConverter.getOutputString();
  const pcbConverter = new CircuitJsonToKicadPcbConverter(circuitJson);
  pcbConverter.runUntilFinished();
  const pcbContent = pcbConverter.getOutputString();
  const proConverter = new CircuitJsonToKicadProConverter(circuitJson, {
    projectName,
    schematicFilename: `${projectName}.kicad_sch`,
    pcbFilename: `${projectName}.kicad_pcb`
  });
  proConverter.runUntilFinished();
  const proContent = proConverter.getOutputString();
  const zip = new JSZip2();
  zip.file(`${projectName}.kicad_sch`, schContent);
  zip.file(`${projectName}.kicad_pcb`, pcbContent);
  zip.file(`${projectName}.kicad_pro`, proContent);
  return zip;
};
var exportKicadProject = async ({
  circuitJson,
  projectName
}) => {
  const zip = await createKicadProjectZip({ circuitJson, projectName });
  const zipBlob = await zip.generateAsync({ type: "blob" });
  openForDownload(zipBlob, {
    fileName: `${projectName}_kicad_project.zip`
  });
};

// lib/optional-features/exporting/formats/export-step.ts
import { circuitJsonToStep } from "circuit-json-to-step";
var exportStep = async ({
  circuitJson,
  projectName
}) => {
  const pcbBoard = circuitJson.find((el) => el.type === "pcb_board");
  const boardWidth = pcbBoard && "width" in pcbBoard ? pcbBoard.width : void 0;
  const boardHeight = pcbBoard && "height" in pcbBoard ? pcbBoard.height : void 0;
  const boardThickness = pcbBoard && "thickness" in pcbBoard ? pcbBoard.thickness : void 0;
  if (boardWidth === void 0 || boardHeight === void 0 || boardThickness === void 0) {
    toast.error(
      "Board dimensions not found. Please add a pcb_board with width, height, and thickness to your circuit."
    );
    return;
  }
  let stepText;
  try {
    stepText = await circuitJsonToStep(circuitJson, {
      boardWidth,
      boardHeight,
      boardThickness,
      productName: projectName,
      includeComponents: true,
      includeExternalMeshes: true
    });
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : "Unknown error";
    toast.error(`Failed to convert circuit to STEP format: ${errorMessage}`);
    return;
  }
  const blob = new Blob([stepText], {
    type: "application/step"
  });
  try {
    openForDownload(blob, {
      fileName: `${projectName}.step`
    });
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : "Unknown error";
    toast.error(`Failed to download STEP file: ${errorMessage}`);
  }
};

// lib/optional-features/exporting/export-and-download.ts
var availableExports = [
  { extension: "json", name: "Circuit JSON" },
  { extension: "zip", name: "Fabrication Files" },
  { extension: "zip", name: "KiCad Project" },
  { extension: "glb", name: "GLB (Binary GLTF)" },
  { extension: "svg", name: "Pinout SVG" },
  { extension: "step", name: "STEP" }
  // { extension: "svg", name: "SVG" },
  // { extension: "dsn", name: "Specctra DSN" },
  // { extension: "kicad_mod", name: "KiCad Module" },
  // { extension: "gbr", name: "Gerbers" },
];
var exportAndDownload = async ({
  exportName,
  circuitJson,
  projectName
}) => {
  if (exportName === "Fabrication Files") {
    exportFabricationFiles({ circuitJson, projectName });
    return;
  }
  if (exportName === "KiCad Project") {
    await exportKicadProject({ circuitJson, projectName });
    return;
  }
  if (exportName === "Circuit JSON") {
    openForDownload(JSON.stringify(circuitJson, null, 2), {
      fileName: `${projectName}.circuit.json`,
      mimeType: "application/json"
    });
    return;
  }
  if (exportName === "GLB (Binary GLTF)") {
    await exportGlb({ circuitJson, projectName });
    return;
  }
  if (exportName === "Pinout SVG") {
    exportPinoutSvg({ circuitJson, projectName });
    return;
  }
  if (exportName === "STEP") {
    await exportStep({ circuitJson, projectName });
    return;
  }
  throw new Error(`Unsupported export type: "${exportName}"`);
};

// lib/components/AiReviewDialog/AiReviewDialog.tsx
import { useState as useState15 } from "react";

// lib/components/AiReviewDialog/ListAiReviewsView.tsx
import { useEffect as useEffect9, useState as useState13 } from "react";

// lib/utils/get-registry-ky.ts
import ky from "ky";
function getWindowVar(name) {
  return typeof window !== "undefined" ? window[name] : null;
}
function getRegistryKy() {
  const registryApiBaseUrl = getWindowVar("TSCIRCUIT_REGISTRY_API_BASE_URL") || import.meta.env.VITE_TSCIRCUIT_REGISTRY_API_BASE_URL || "https://registry-api.tscircuit.com";
  const registryToken = getWindowVar("TSCIRCUIT_REGISTRY_TOKEN");
  return ky.create({
    prefixUrl: registryApiBaseUrl,
    headers: {
      Authorization: `Bearer ${registryToken}`
    },
    timeout: 3e4
  });
}
function hasRegistryToken() {
  return Boolean(getWindowVar("TSCIRCUIT_REGISTRY_TOKEN"));
}
var registryKy = {
  get: (url, options) => getRegistryKy().get(url, options),
  post: (url, options) => getRegistryKy().post(url, options),
  put: (url, options) => getRegistryKy().put(url, options),
  delete: (url, options) => getRegistryKy().delete(url, options),
  patch: (url, options) => getRegistryKy().patch(url, options)
};

// lib/components/AiReviewDialog/ListAiReviewsView.tsx
import { Fragment as Fragment5, jsx as jsx26, jsxs as jsxs19 } from "react/jsx-runtime";
var AiReviewListView = ({
  packageName,
  onSelectReview
}) => {
  const fsMap = useRunFrameStore((s) => s.fsMap);
  const circuitJson = useRunFrameStore((s) => s.circuitJson);
  const [reviews, setReviews] = useState13([]);
  const [loading, setLoading] = useState13(false);
  const [creating, setCreating] = useState13(false);
  useEffect9(() => {
    if (!packageName || !hasRegistryToken()) return;
    setLoading(true);
    registryKy.get("ai_reviews/list", { searchParams: { package_name: packageName } }).json().then((data) => setReviews(data.ai_reviews)).catch((err) => {
      console.error("Failed to load AI reviews", err);
      toast.error("Failed to load AI reviews");
    }).finally(() => setLoading(false));
  }, [packageName]);
  const requestReview = async () => {
    if (!circuitJson) {
      toast.error("Need Circuit JSON to Request AI Review");
      return;
    }
    if (!hasRegistryToken()) {
      toast.error("Missing registry token");
      return;
    }
    setCreating(true);
    try {
      const { ai_review } = await registryKy.post("ai_reviews/create", {
        json: {
          package_name: packageName ?? "unknown",
          fs_map: Object.fromEntries(fsMap),
          circuit_json: circuitJson
        }
      }).json();
      setReviews((r) => [ai_review, ...r]);
      onSelectReview(ai_review);
      toast.success("AI review requested");
    } catch (err) {
      console.error("Failed to create AI review", err);
      toast.error("Failed to request AI review");
    } finally {
      setCreating(false);
    }
  };
  return /* @__PURE__ */ jsxs19(Fragment5, { children: [
    /* @__PURE__ */ jsxs19(DialogHeader, { children: [
      /* @__PURE__ */ jsx26(DialogTitle, { children: "AI Review" }),
      /* @__PURE__ */ jsx26(DialogDescription, { children: "Select an AI review or request a new one." })
    ] }),
    /* @__PURE__ */ jsx26("div", { className: "rf-flex rf-gap-4 rf-mt-4", children: /* @__PURE__ */ jsx26("div", { className: "rf-w-48 rf-h-64 rf-overflow-y-auto rf-border rf-rounded rf-p-2 rf-flex-shrink-0", children: loading ? /* @__PURE__ */ jsx26("div", { className: "rf-text-sm", children: "Loading..." }) : reviews.length > 0 ? reviews.map((review) => /* @__PURE__ */ jsx26(
      "div",
      {
        className: "rf-text-sm rf-p-2 rf-cursor-pointer rf-rounded hover:rf-bg-zinc-100",
        onClick: () => onSelectReview(review),
        children: new Date(review.created_at || "").toLocaleString()
      },
      review.ai_review_id
    )) : /* @__PURE__ */ jsx26("div", { className: "rf-text-sm rf-text-muted-foreground", children: "No AI reviews found." }) }) }),
    /* @__PURE__ */ jsx26(DialogFooter, { className: "rf-mt-4", children: /* @__PURE__ */ jsx26(Button, { onClick: requestReview, disabled: creating, children: creating ? "Requesting..." : "Review my Board" }) })
  ] });
};

// lib/components/AiReviewDialog/ViewAiReviewView.tsx
import { useEffect as useEffect10, useMemo as useMemo4, useState as useState14 } from "react";
import { marked } from "marked";
import { Fragment as Fragment6, jsx as jsx27, jsxs as jsxs20 } from "react/jsx-runtime";
var AiReviewViewView = ({
  review,
  onBack
}) => {
  const [aiReviewText, setAiReviewText] = useState14(
    review.ai_review_text ?? null
  );
  const registryKy2 = getRegistryKy();
  const aiReviewId = review.ai_review_id;
  useEffect10(() => {
    if (!aiReviewId) return;
    let timeout;
    async function loadAiReviewText() {
      try {
        const response = await registryKy2.get(
          "ai_reviews/get",
          {
            searchParams: { ai_review_id: aiReviewId }
          }
        );
        const { ai_review: newAiReview } = await response.json();
        if (newAiReview.ai_review_text) {
          setAiReviewText(newAiReview.ai_review_text);
          return;
        }
      } catch (e) {
        console.error("Failed to load AI review text", e);
      }
      timeout = setTimeout(loadAiReviewText, 1e3);
    }
    timeout = setTimeout(loadAiReviewText, 1e3);
    return () => clearTimeout(timeout);
  }, [aiReviewId]);
  const html = useMemo4(
    () => marked.parse(review.ai_review_text || ""),
    [review.ai_review_text]
  );
  return /* @__PURE__ */ jsxs20(Fragment6, { children: [
    /* @__PURE__ */ jsxs20(DialogHeader, { className: "rf-flex rf-flex-row rf-items-center rf-justify-between", children: [
      /* @__PURE__ */ jsx27(Button, { variant: "ghost", size: "sm", onClick: onBack, children: "Back" }),
      /* @__PURE__ */ jsx27(DialogTitle, { children: "AI Review" })
    ] }),
    aiReviewText ? /* @__PURE__ */ jsx27(
      "div",
      {
        className: "rf-h-64 rf-overflow-y-auto rf-prose rf-max-w-none rf-mt-2",
        dangerouslySetInnerHTML: { __html: html }
      }
    ) : /* @__PURE__ */ jsx27("div", { className: "rf-h-64 rf-overflow-y-auto rf-prose rf-max-w-none rf-mt-2", children: /* @__PURE__ */ jsxs20("div", { className: "rf-flex rf-items-center rf-justify-center rf-h-full", children: [
      /* @__PURE__ */ jsxs20(
        "svg",
        {
          className: "rf-animate-spin rf-h-6 rf-w-6 rf-text-zinc-400 rf-mr-2",
          xmlns: "http://www.w3.org/2000/svg",
          fill: "none",
          viewBox: "0 0 24 24",
          "aria-hidden": "true",
          children: [
            /* @__PURE__ */ jsx27(
              "circle",
              {
                className: "rf-opacity-25",
                cx: "12",
                cy: "12",
                r: "10",
                stroke: "currentColor",
                strokeWidth: "4"
              }
            ),
            /* @__PURE__ */ jsx27(
              "path",
              {
                className: "rf-opacity-75",
                fill: "currentColor",
                d: "M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ jsx27("span", { children: "Loading..." })
    ] }) })
  ] });
};

// lib/components/AiReviewDialog/AiReviewDialog.tsx
import { jsx as jsx28, jsxs as jsxs21 } from "react/jsx-runtime";
var AiReviewDialog = ({
  isOpen,
  onClose,
  packageName
}) => {
  const [stage, setStage] = useState15(
    "list_reviews"
  );
  const [selectedReview, setSelectedReview] = useState15(null);
  const handleSelect = (review) => {
    setSelectedReview(review);
    setStage("view_review");
  };
  return /* @__PURE__ */ jsx28(
    Dialog,
    {
      open: isOpen,
      onOpenChange: (open) => {
        if (!open) {
          setStage("list_reviews");
          setSelectedReview(null);
          onClose();
        }
      },
      children: /* @__PURE__ */ jsxs21(DialogContent, { className: "rf-max-w-2xl", children: [
        stage === "list_reviews" && /* @__PURE__ */ jsx28(
          AiReviewListView,
          {
            packageName,
            onSelectReview: handleSelect
          }
        ),
        stage === "view_review" && selectedReview && /* @__PURE__ */ jsx28(
          AiReviewViewView,
          {
            review: selectedReview,
            onBack: () => setStage("list_reviews")
          }
        )
      ] })
    }
  );
};

// lib/components/FileMenuLeftHeader.tsx
import { Toaster } from "react-hot-toast";

// lib/components/OrderDialog/OrderDialog.tsx
import { QueryClient, QueryClientProvider } from "react-query";

// lib/components/OrderDialog/InitialOrder.tsx
import { Loader2 as Loader24 } from "lucide-react";
import { GitHubLogoIcon as GitHubLogoIcon2 } from "@radix-ui/react-icons";
import { useEffect as useEffect11, useMemo as useMemo5, useState as useState16 } from "react";

// lib/components/OrderDialog/VendorQuoteCard.tsx
import { Truck, Package } from "lucide-react";
import { jsx as jsx29, jsxs as jsxs22 } from "react/jsx-runtime";
function VendorQuoteCard({
  orderQuote,
  selectedShippingCarrier,
  onSelectShippingCarrier,
  lowestShippingCarrierCost
}) {
  const selectedShipping = selectedShippingCarrier ? orderQuote.shipping_options.find(
    (ship) => ship.carrier === selectedShippingCarrier
  ) : null;
  return /* @__PURE__ */ jsxs22("div", { className: "rf-rounded-xl rf-bg-white rf-shadow-lg rf-border rf-border-gray-200", children: [
    /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-items-center rf-justify-between rf-px-6 rf-pt-4 rf-pb-2", children: [
      /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-items-center rf-gap-2", children: [
        /* @__PURE__ */ jsx29(Package, { className: "rf-w-6 rf-h-6 rf-text-blue-500" }),
        /* @__PURE__ */ jsx29("span", { className: "rf-font-semibold rf-text-lg", children: orderQuote.vendor_name.toUpperCase() })
      ] }),
      /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-flex-col rf-items-end", children: [
        /* @__PURE__ */ jsx29("span", { className: "rf-text-gray-500 rf-text-sm", children: "Fully Assembled PCB" }),
        /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-items-center rf-gap-2", children: [
          /* @__PURE__ */ jsxs22("span", { className: "rf-text-gray-400 rf-line-through rf-text-base", children: [
            "$",
            lowestShippingCarrierCost.toFixed(2)
          ] }),
          /* @__PURE__ */ jsx29("span", { className: "rf-font-bold rf-text-xl rf-text-blue-600", children: "$50.00" })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsx29("hr", { className: "rf-border-gray-200" }),
    /* @__PURE__ */ jsxs22("div", { className: "rf-px-6 rf-pt-4 rf-pb-2", children: [
      /* @__PURE__ */ jsx29("div", { className: "rf-mb-2 rf-text-sm rf-font-bold rf-text-gray-700", children: "Shipping Options:" }),
      /* @__PURE__ */ jsx29("div", { className: "rf-flex rf-flex-col rf-gap-2 rf-mb-2", children: orderQuote.shipping_options.map((ship, idx) => /* @__PURE__ */ jsxs22(
        "button",
        {
          type: "button",
          className: cn(
            "rf-flex rf-items-center rf-gap-3 rf-px-4 rf-py-3 rf-rounded-lg rf-border rf-min-w-[148px] rf-transition-colors rf-bg-white",
            selectedShippingCarrier === ship.carrier ? "rf-border-blue-600 rf-bg-blue-50 rf-ring-2 rf-ring-blue-500" : "rf-border-gray-300 rf-bg-gray-50 hover:rf-border-blue-300"
          ),
          onClick: () => onSelectShippingCarrier(ship.carrier),
          children: [
            /* @__PURE__ */ jsx29(Truck, { className: "rf-w-5 rf-h-5 rf-text-yellow-500" }),
            /* @__PURE__ */ jsxs22("div", { className: "rf-text-left rf-flex-1", children: [
              /* @__PURE__ */ jsx29("div", { className: "rf-leading-tight rf-font-medium", children: ship.carrier }),
              /* @__PURE__ */ jsx29("div", { className: "rf-text-xs rf-text-gray-500", children: "Express, 5-12 days" })
            ] }),
            /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-flex-col rf-items-end rf-ml-2", children: [
              /* @__PURE__ */ jsxs22("span", { className: "rf-text-gray-400 rf-line-through rf-text-sm", children: [
                "$",
                ship.cost.toFixed(2)
              ] }),
              /* @__PURE__ */ jsx29("span", { className: "rf-text-xs rf-text-blue-600 rf-font-medium", children: "waived" })
            ] })
          ]
        },
        ship.carrier + idx
      )) })
    ] }),
    selectedShippingCarrier !== null && selectedShipping && /* @__PURE__ */ jsx29("div", { className: "rf-px-6 rf-pb-4 rf-pt-2", children: /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-justify-between rf-items-center rf-mt-3 rf-mb-2", children: [
      /* @__PURE__ */ jsx29("span", { className: "rf-text-gray-700 rf-font-bold", children: "Total (incl. shipping):" }),
      /* @__PURE__ */ jsxs22("div", { className: "rf-flex rf-flex-col rf-items-end", children: [
        /* @__PURE__ */ jsxs22("div", { className: "rf-text-gray-400 rf-line-through rf-text-base", children: [
          "$",
          (orderQuote.total_cost_without_shipping + selectedShipping.cost).toFixed(2)
        ] }),
        /* @__PURE__ */ jsx29("div", { className: "rf-flex rf-items-center", children: /* @__PURE__ */ jsx29("span", { className: "rf-font-bold rf-text-xl rf-text-blue-600", children: "$50.00" }) })
      ] })
    ] }) })
  ] });
}

// lib/hooks/use-create-order-quote.ts
import { useMutation } from "react-query";

// lib/api/order-quotes.ts
import { HTTPError } from "ky";
var createOrderQuote = async (packageReleaseId) => {
  try {
    const { order_quote_id } = await registryKy.post("order_quotes/create", {
      json: {
        package_release_id: packageReleaseId,
        vendor_name: "jlcpcb"
        // TODO: Remove this once we have more vendor
      }
    }).json();
    return {
      order_quote_id
    };
  } catch (error) {
    if (error instanceof HTTPError) {
      const errorBody = await error.response.json();
      throw {
        error: {
          message: errorBody.message,
          error_code: errorBody.error_code
        }
      };
    }
    throw error;
  }
};
var getOrderQuote = async (orderQuoteId) => {
  const { order_quote } = await registryKy.get(`order_quotes/get`, {
    searchParams: {
      order_quote_id: orderQuoteId
    }
  }).json();
  return order_quote;
};

// lib/hooks/use-create-order-quote.ts
import { useQueryClient } from "react-query";
var useCreateOrderQuote = () => {
  const queryClient2 = useQueryClient();
  return useMutation({
    mutationKey: ["createOrderQuote"],
    mutationFn: (packageReleaseId) => createOrderQuote(packageReleaseId),
    onSuccess: (data) => {
      queryClient2.invalidateQueries(["getOrderQuote", data.order_quote_id]);
    }
  });
};

// lib/hooks/use-order-quote-polling.ts
import { useQuery } from "react-query";
var useOrderQuotePolling = (orderQuoteId) => {
  const {
    data: orderQuote,
    error,
    status
  } = useQuery(
    ["getOrderQuote", orderQuoteId],
    () => getOrderQuote(orderQuoteId || ""),
    {
      enabled: !!orderQuoteId,
      refetchInterval: (data) => {
        if (data?.is_completed || data?.has_error) {
          return false;
        }
        return 4e3;
      },
      refetchIntervalInBackground: true,
      retry: false
    }
  );
  return {
    status: status === "loading" ? "loading" : status === "error" ? "error" : "success",
    data: orderQuote ?? null,
    error: error instanceof Error ? error : null
  };
};

// lib/components/OrderDialog/InitialOrder.tsx
import { Fragment as Fragment7, jsx as jsx30, jsxs as jsxs23 } from "react/jsx-runtime";
var InitialOrderScreen = ({
  onCancel,
  packageReleaseId,
  signIn,
  isLoggedIn
}) => {
  const [selectedShippingCarrier, setSelectedShippingCarrier] = useState16(null);
  const [orderQuoteId, setOrderQuoteId] = useState16(null);
  const { mutate: createOrderQuote2, error: createOrderQuoteError } = useCreateOrderQuote();
  useEffect11(() => {
    if (packageReleaseId) {
      createOrderQuote2(packageReleaseId, {
        onSuccess: (data) => {
          setOrderQuoteId(data.order_quote_id);
        }
      });
    }
  }, [packageReleaseId]);
  const { data: orderQuote } = useOrderQuotePolling(orderQuoteId || void 0);
  const errorMessage = createOrderQuoteError && createOrderQuoteError.error?.message || orderQuote?.error?.message;
  useErrorTelemetry({ errorMessage });
  const redirectToStripeCheckout = async (orderQuoteId2) => {
    const stripeCheckoutBaseUrl = getWindowVar(
      "TSCIRCUIT_STRIPE_CHECKOUT_BASE_URL"
    );
    window.location.href = `${stripeCheckoutBaseUrl}?client_reference_id=${orderQuoteId2}&shipping_option=${selectedShippingCarrier}`;
  };
  useEffect11(() => {
    if (selectedShippingCarrier === null && orderQuote && Array.isArray(orderQuote.shipping_options) && orderQuote.shipping_options.length > 0) {
      const lowest = orderQuote.shipping_options.reduce(
        (min, curr) => curr.cost < min.cost ? curr : min,
        orderQuote.shipping_options[0]
      );
      setSelectedShippingCarrier(lowest?.carrier || null);
    }
  }, [orderQuote]);
  const lowestShippingCarrierCost = useMemo5(() => {
    return orderQuote && Array.isArray(orderQuote.shipping_options) && orderQuote.shipping_options.length > 0 ? orderQuote.shipping_options.reduce(
      (min, curr) => curr.cost < min.cost ? curr : min,
      orderQuote.shipping_options[0]
    ).cost : 0;
  }, [orderQuote]);
  const isNoTokenError = createOrderQuoteError && createOrderQuoteError.error?.error_code?.includes("no_token") || orderQuote?.error?.error_code?.includes("no_token") && signIn;
  if (!isLoggedIn || isNoTokenError) {
    return /* @__PURE__ */ jsx30(SignInView, { signIn });
  }
  return /* @__PURE__ */ jsxs23(
    "div",
    {
      className: "\n      rf-w-full rf-mx-auto rf-bg-white rf-rounded-2xl \n      rf-p-4 sm:rf-p-6 md:rf-p-8 \n      rf-flex rf-flex-col rf-gap-3\n      rf-max-w-full sm:rf-max-w-md md:rf-max-w-lg lg:rf-max-w-xl\n    ",
      children: [
        /* @__PURE__ */ jsx30("h2", { className: "rf-text-xl sm:rf-text-2xl md:rf-text-3xl rf-font-bold rf-text-center", children: "Order PCB" }),
        !(createOrderQuoteError || orderQuote?.error) && (!orderQuoteId || !orderQuote || orderQuote?.is_processing) && /* @__PURE__ */ jsx30(LoadingMessage, { message: "Fetching quotes..." }),
        (createOrderQuoteError || orderQuote?.error) && /* @__PURE__ */ jsx30(
          ErrorMessage,
          {
            message: createOrderQuoteError && createOrderQuoteError.error?.message || orderQuote?.error?.message || "Failed to fetch quotes"
          }
        ),
        orderQuote?.is_completed && !createOrderQuoteError && !orderQuote?.error && Array.isArray(orderQuote?.shipping_options) && orderQuote.shipping_options.length > 0 && /* @__PURE__ */ jsxs23(Fragment7, { children: [
          /* @__PURE__ */ jsx30("div", { className: "rf-bg-blue-100 rf-text-blue-800 rf-p-2 sm:rf-p-3 rf-rounded-md rf-text-center rf-text-xs sm:rf-text-sm", children: "This board is eligible for the tscircuit Flat Fee" }),
          /* @__PURE__ */ jsx30(
            VendorQuoteCard,
            {
              orderQuote,
              selectedShippingCarrier,
              onSelectShippingCarrier: setSelectedShippingCarrier,
              lowestShippingCarrierCost: lowestShippingCarrierCost + (orderQuote.total_cost_without_shipping || 0)
            },
            orderQuote?.order_quote_id
          )
        ] }),
        /* @__PURE__ */ jsxs23("div", { className: "rf-flex rf-flex-col-reverse sm:rf-flex-row rf-justify-between rf-mt-5 rf-gap-3 sm:rf-gap-4", children: [
          /* @__PURE__ */ jsx30(
            Button,
            {
              variant: "outline",
              type: "button",
              className: "rf-w-full sm:rf-w-1/2 rf-border-red-500 rf-text-red-500 rf-hover:bg-red-50 rf-hover:text-red-600 rf-text-sm sm:rf-text-base",
              onClick: onCancel,
              children: "Cancel"
            }
          ),
          /* @__PURE__ */ jsx30(
            Button,
            {
              type: "button",
              className: "rf-w-full sm:rf-w-1/2 rf-bg-blue-600 rf-hover:bg-blue-700 rf-text-sm sm:rf-text-base",
              disabled: selectedShippingCarrier === null,
              onClick: () => {
                if (selectedShippingCarrier === null) {
                  toast.error("Please select a shipping option.");
                  return;
                }
                if (orderQuote) {
                  redirectToStripeCheckout(orderQuote.order_quote_id);
                }
              },
              children: "Continue"
            }
          )
        ] }),
        /* @__PURE__ */ jsx30("div", { className: "rf-text-xs rf-text-center rf-text-gray-400 rf-mt-3 sm:rf-mt-4 rf-px-2", children: "Pricing may vary based on specifications." })
      ]
    }
  );
};
var LoadingMessage = ({ message }) => /* @__PURE__ */ jsxs23("div", { className: "rf-flex rf-flex-col rf-items-center rf-gap-2 rf-my-12", children: [
  /* @__PURE__ */ jsx30(Loader24, { className: "rf-animate-spin rf-w-8 rf-h-8 rf-text-gray-400" }),
  /* @__PURE__ */ jsx30("p", { className: "rf-text-gray-600", children: message })
] });
var ErrorMessage = ({ message }) => /* @__PURE__ */ jsx30("div", { className: "rf-text-red-600 rf-text-center rf-py-12", children: message });
var SignInView = ({ signIn }) => /* @__PURE__ */ jsxs23(
  "div",
  {
    className: "\n    rf-w-full rf-mx-auto rf-bg-white rf-rounded-2xl \n    rf-p-4 sm:rf-p-6 md:rf-p-8 \n    rf-flex rf-flex-col rf-gap-3\n    rf-max-w-full sm:rf-max-w-md md:rf-max-w-lg lg:rf-max-w-xl\n  ",
    children: [
      /* @__PURE__ */ jsx30("h2", { className: "rf-text-xl sm:rf-text-2xl md:rf-text-3xl rf-font-bold rf-text-center", children: "Order PCB" }),
      /* @__PURE__ */ jsxs23("div", { className: "rf-flex rf-flex-col rf-items-center rf-gap-4 rf-py-4 sm:rf-py-6 md:rf-py-8", children: [
        /* @__PURE__ */ jsx30("p", { className: "rf-text-gray-600 rf-text-sm sm:rf-text-base rf-text-center rf-px-2", children: "Please sign in to continue" }),
        /* @__PURE__ */ jsxs23(
          Button,
          {
            onClick: signIn,
            className: "rf-flex rf-items-center rf-gap-2 rf-text-sm sm:rf-text-base rf-px-4 sm:rf-px-6",
            children: [
              /* @__PURE__ */ jsx30(GitHubLogoIcon2, { className: "rf-w-4 rf-h-4 sm:rf-w-5 sm:rf-h-5" }),
              "Sign in with GitHub"
            ]
          }
        )
      ] })
    ]
  }
);

// lib/components/OrderDialog/OrderDialog.tsx
import { jsx as jsx31 } from "react/jsx-runtime";
var queryClient = new QueryClient();
var OrderDialog = ({
  isOpen,
  onClose,
  stage,
  setStage,
  circuitJson,
  packageReleaseId,
  signIn,
  isLoggedIn
}) => {
  return /* @__PURE__ */ jsx31(QueryClientProvider, { client: queryClient, children: /* @__PURE__ */ jsx31(
    Dialog,
    {
      open: isOpen,
      onOpenChange: (open) => {
        if (!open) onClose();
      },
      children: /* @__PURE__ */ jsx31(
        DialogContent,
        {
          className: "\n          !rf-p-0 !rf-z-[101] rf-rounded-md\n          !rf-w-[95vw] !rf-max-w-[95vw]\n          sm:rf-w-[90vw] sm:rf-max-w-[500px]\n          md:rf-w-auto md:rf-max-w-[660px]\n          lg:rf-max-w-[720px]\n          xl:rf-max-w-[800px]\n          rf-max-h-[90vh] rf-overflow-y-auto\n        ",
          children: /* @__PURE__ */ jsx31("div", { className: "rf-relative rf-w-full", children: stage === "initial" && /* @__PURE__ */ jsx31(
            InitialOrderScreen,
            {
              onCancel: onClose,
              packageReleaseId: packageReleaseId ?? "",
              signIn: signIn ?? (() => {
              }),
              isLoggedIn
            }
          ) })
        }
      )
    }
  ) });
};

// lib/components/OrderDialog/CliOrderDialog.tsx
import { jsx as jsx32 } from "react/jsx-runtime";
var CliOrderDialog = ({
  isOpen,
  onClose,
  stage,
  setStage,
  signIn,
  isLoggedIn
}) => {
  const circuitJson = useRunFrameStore((state) => state.circuitJson);
  return /* @__PURE__ */ jsx32(
    OrderDialog,
    {
      signIn,
      isOpen,
      onClose,
      stage,
      setStage,
      circuitJson,
      isLoggedIn: isLoggedIn ?? false
    }
  );
};

// lib/components/OrderDialog/useOrderDialog.tsx
import { useState as useState17, useMemo as useMemo6, useCallback as useCallback7 } from "react";
import { jsx as jsx33 } from "react/jsx-runtime";
var useOrderDialogCli = () => {
  const [isOpen, setIsOpen] = useState17(false);
  const [stage, setStage] = useState17("initial");
  const handleClose = () => {
    setIsOpen(false);
    setStage("initial");
  };
  return {
    isOpen,
    stage,
    open: () => setIsOpen(true),
    close: handleClose,
    setStage,
    OrderDialog: CliOrderDialog
  };
};
var useOrderDialog = ({
  onSignIn,
  isLoggedIn,
  packageReleaseId
}) => {
  useStyles();
  const [isOpen, setIsOpen] = useState17(false);
  const [stage, setStage] = useState17("initial");
  const handleClose = useCallback7(() => {
    setIsOpen(false);
    setStage("initial");
  }, []);
  const open = useCallback7(() => setIsOpen(true), []);
  const MemoizedOrderDialog = useMemo6(() => {
    return (props) => /* @__PURE__ */ jsx33(
      OrderDialog,
      {
        ...props,
        signIn: onSignIn,
        isLoggedIn,
        packageReleaseId
      }
    );
  }, [isLoggedIn, packageReleaseId]);
  return {
    isOpen,
    stage,
    open,
    close: handleClose,
    setStage,
    OrderDialog: MemoizedOrderDialog
  };
};

// lib/components/useBugReportDialog.tsx
import clsx2 from "clsx";
import { HTTPError as HTTPError2 } from "ky";
import {
  useCallback as useCallback8,
  useEffect as useEffect12,
  useMemo as useMemo7,
  useRef as useRef3,
  useState as useState18
} from "react";
import { Fragment as Fragment8, jsx as jsx34, jsxs as jsxs24 } from "react/jsx-runtime";
async function getFilesFromServer() {
  const response = await fetch(`${API_BASE}/files/list`);
  const { file_list } = await response.json();
  const fileMap = /* @__PURE__ */ new Map();
  for (const file of file_list) {
    const fileResponse = await fetch(
      `${API_BASE}/files/get?file_path=${encodeURIComponent(file.file_path)}`
    );
    const fileData = await fileResponse.json();
    if (fileData.file?.text_content || fileData.file?.binary_content_b64) {
      fileMap.set(file.file_path, {
        text_content: fileData.file.text_content,
        binary_content_b64: fileData.file.binary_content_b64
      });
    }
  }
  return fileMap;
}
var BUG_REPORT_VIEW_BASE_URL = "https://api.tscircuit.com/bug_reports/view?bug_report_id=";
var buildBugReportUrl = (bugReportId) => `${BUG_REPORT_VIEW_BASE_URL}${bugReportId}`;
var useBugReportDialog = () => {
  const [isOpen, setIsOpen] = useState18(false);
  const [isSubmitting, setIsSubmitting] = useState18(false);
  const [errorMessage, setErrorMessage] = useState18(null);
  const textareaRef = useRef3(null);
  const [successState, setSuccessState] = useState18(null);
  const [bugReportFileCount, setBugReportFileCount] = useState18(0);
  const isSessionLoggedIn = useMemo7(() => {
    if (hasRegistryToken()) return true;
    if (typeof document === "undefined") return false;
    return document.cookie.split(";").some((cookie) => cookie.trim().startsWith("session="));
  }, [isOpen]);
  useEffect12(() => {
    if (isOpen && !successState && textareaRef.current) {
      const globalError = typeof window !== "undefined" ? window.__TSCIRCUIT_LAST_EXECUTION_ERROR : void 0;
      if (globalError) {
        textareaRef.current.value = `I'm getting this execution error:

${globalError}`;
      }
    }
  }, [isOpen, successState]);
  useEffect12(() => {
    if (isOpen && !successState) {
      getFilesFromServer().then((files) => {
        setBugReportFileCount(files.size);
      }).catch((error) => {
        console.error("Failed to fetch file count", error);
        setBugReportFileCount(0);
      });
    }
  }, [isOpen, successState]);
  const openBugReportDialog = useCallback8(() => {
    setErrorMessage(null);
    setSuccessState(null);
    if (textareaRef.current) {
      textareaRef.current.value = "";
    }
    setIsOpen(true);
  }, []);
  const closeBugReportDialog = useCallback8(() => {
    setIsOpen(false);
  }, []);
  const handleConfirmBugReport = useCallback8(async () => {
    setIsSubmitting(true);
    setErrorMessage(null);
    const registryKy2 = getRegistryKy();
    const userText = textareaRef.current?.value || "";
    try {
      const filesFromServer = await getFilesFromServer();
      if (filesFromServer.size === 0) {
        toast.error("No project files available to include in the bug report");
        setIsSubmitting(false);
        return;
      }
      const deleteAt = new Date(Date.now() + 24 * 60 * 60 * 1e3).toISOString();
      const createResponse = await registryKy2.post("bug_reports/create", {
        json: {
          text: userText.trim() || void 0,
          is_auto_deleted: true,
          delete_at: deleteAt
        }
      }).json();
      const bugReportId = createResponse.bug_report.bug_report_id;
      for (const [filePath, fileContent] of filesFromServer.entries()) {
        const uploadPayload = {
          bug_report_id: bugReportId,
          file_path: filePath
        };
        if (fileContent.text_content) {
          uploadPayload.content_text = fileContent.text_content;
        }
        if (fileContent.binary_content_b64) {
          uploadPayload.content_base64 = fileContent.binary_content_b64;
        }
        await registryKy2.post("bug_reports/upload_file", {
          json: uploadPayload
        });
      }
      const bugReportUrl = buildBugReportUrl(bugReportId);
      setSuccessState({ bugReportUrl });
    } catch (error) {
      console.error("Failed to submit bug report", error);
      if (error instanceof HTTPError2) {
        if (error.response.status === 401) {
          const message = "You must be logged in to report a bug. Please sign in and try again.";
          setErrorMessage(message);
          toast.error(message);
        } else {
          const message = `Failed to submit bug report (${error.response.status})`;
          setErrorMessage(message);
          toast.error(message);
        }
      } else if (error instanceof Error) {
        setErrorMessage(error.message);
        toast.error(error.message);
      } else {
        const message = "Failed to submit bug report";
        setErrorMessage(message);
        toast.error(message);
      }
    } finally {
      setIsSubmitting(false);
    }
  }, []);
  const BugReportDialog = useMemo7(() => {
    return /* @__PURE__ */ jsx34(
      AlertDialog,
      {
        open: isOpen,
        onOpenChange: (open) => {
          if (!open) {
            if (!isSubmitting) {
              closeBugReportDialog();
            }
          } else {
            setErrorMessage(null);
            setSuccessState(null);
            setIsOpen(true);
          }
        },
        children: /* @__PURE__ */ jsxs24(AlertDialogContent, { children: [
          /* @__PURE__ */ jsxs24(AlertDialogHeader, { children: [
            /* @__PURE__ */ jsx34(AlertDialogTitle, { children: successState ? "Bug Report Created" : "Report Bug" }),
            /* @__PURE__ */ jsx34(AlertDialogDescription, { asChild: true, children: successState ? /* @__PURE__ */ jsxs24("div", { className: "rf-text-left rf-space-y-3 rf-text-sm", children: [
              /* @__PURE__ */ jsx34("p", { children: "Bug report created successfully." }),
              /* @__PURE__ */ jsx34("div", { children: /* @__PURE__ */ jsx34(
                "a",
                {
                  className: "rf-text-blue-600 hover:rf-underline",
                  href: successState.bugReportUrl,
                  target: "_blank",
                  rel: "noreferrer",
                  children: "View bug report"
                }
              ) }),
              /* @__PURE__ */ jsxs24("p", { children: [
                "Please share this link privately with tscircuit staff so we can help debug. Join the",
                /* @__PURE__ */ jsx34(
                  "a",
                  {
                    className: "rf-ml-1 rf-text-blue-600 hover:rf-underline",
                    href: "https://tscircuit.com/join",
                    target: "_blank",
                    rel: "noreferrer",
                    children: "tscircuit Discord"
                  }
                ),
                "."
              ] })
            ] }) : /* @__PURE__ */ jsxs24("div", { className: "rf-text-left rf-space-y-3 rf-text-sm", children: [
              /* @__PURE__ */ jsxs24("p", { children: [
                "Reporting a bug will upload your entire project",
                bugReportFileCount > 0 ? ` (${bugReportFileCount} file${bugReportFileCount === 1 ? "" : "s"})` : "",
                " ",
                "to tscircuit support."
              ] }),
              /* @__PURE__ */ jsxs24("div", { className: "rf-space-y-2", children: [
                /* @__PURE__ */ jsx34(
                  "label",
                  {
                    htmlFor: "bug-description",
                    className: "rf-block rf-font-medium",
                    children: "Description (optional)"
                  }
                ),
                /* @__PURE__ */ jsx34(
                  "textarea",
                  {
                    ref: textareaRef,
                    id: "bug-description",
                    className: "rf-w-full rf-min-h-[100px] rf-px-3 rf-py-2 rf-text-sm rf-border rf-border-gray-300 rf-rounded-md focus:rf-outline-none focus:rf-ring-2 focus:rf-ring-blue-500",
                    placeholder: "Describe the issue you're experiencing...",
                    disabled: isSubmitting
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs24("p", { children: [
                "Share the generated bug report link privately with tscircuit staff so we can help debug your issue. You can also reach out on our",
                /* @__PURE__ */ jsx34(
                  "a",
                  {
                    className: "rf-ml-1 rf-text-blue-600 hover:rf-underline",
                    href: "https://tscircuit.com/join",
                    target: "_blank",
                    rel: "noreferrer",
                    children: "Discord community"
                  }
                ),
                "."
              ] }),
              !isSessionLoggedIn && /* @__PURE__ */ jsx34("p", { className: "rf-text-red-600", children: "You appear to be logged out. Please log in before reporting a bug or the upload will fail." }),
              errorMessage && /* @__PURE__ */ jsx34("p", { className: "rf-text-red-600", children: errorMessage })
            ] }) })
          ] }),
          /* @__PURE__ */ jsx34(AlertDialogFooter, { children: successState ? /* @__PURE__ */ jsx34(
            "button",
            {
              type: "button",
              className: buttonVariants(),
              onClick: () => {
                closeBugReportDialog();
              },
              children: "Close"
            }
          ) : /* @__PURE__ */ jsxs24(Fragment8, { children: [
            /* @__PURE__ */ jsx34(
              AlertDialogCancel,
              {
                disabled: isSubmitting,
                onClick: () => {
                  if (!isSubmitting) {
                    closeBugReportDialog();
                  }
                },
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx34(
              "button",
              {
                type: "button",
                className: clsx2(
                  buttonVariants(),
                  isSubmitting && "rf-opacity-70 rf-cursor-not-allowed"
                ),
                disabled: isSubmitting,
                onClick: (event) => {
                  event.preventDefault();
                  void handleConfirmBugReport();
                },
                children: isSubmitting ? "Reporting..." : "Upload & Report"
              }
            )
          ] }) })
        ] })
      },
      "bug-report-dialog"
    );
  }, [
    isOpen,
    isSubmitting,
    closeBugReportDialog,
    errorMessage,
    successState,
    bugReportFileCount,
    isSessionLoggedIn,
    handleConfirmBugReport
  ]);
  return {
    BugReportDialog,
    openBugReportDialog
  };
};

// lib/components/FileMenuLeftHeader.tsx
import { Fragment as Fragment9, jsx as jsx35, jsxs as jsxs25 } from "react/jsx-runtime";
var FileMenuLeftHeader = (props) => {
  const lastRunEvalVersion = useRunnerStore((s) => s.lastRunEvalVersion);
  const currentMainComponentPath = useRunFrameStore(
    (s) => s.currentMainComponentPath
  );
  const [snippetName, setSnippetName] = useState19(null);
  const [hasUnsavedChanges, setHasUnsavedChanges] = useState19(false);
  const [hasNeverBeenSaved, setHasNeverBeenSaved] = useState19(true);
  const [isSaving, setIsSaving] = useState19(false);
  const [requestToSaveSentAt, setRequestToSaveSentAt] = useState19(
    null
  );
  const [availableSnippets, setAvailableSnippets] = useState19(
    null
  );
  const [isSelectSnippetDialogOpen, setIsSelectSnippetDialogOpen] = useState19(false);
  const [notificationMessage, setNotificationMessage] = useState19(
    null
  );
  const [errorMessage, setErrorMessage] = useState19(null);
  const [isError, setIsError] = useState19(false);
  const [isExporting, setisExporting] = useState19(false);
  const orderDialog = useOrderDialogCli();
  const pushEvent = useRunFrameStore((state) => state.pushEvent);
  const recentEvents = useRunFrameStore((state) => state.recentEvents);
  const firstRenderTime = useMemo8(() => Date.now(), []);
  useEventHandler((event) => {
    if (new Date(event.created_at).valueOf() < firstRenderTime + 500) return;
    if (event.event_type === "FILE_UPDATED") {
      setHasUnsavedChanges(true);
      return;
    }
    if (event.event_type === "SNIPPET_SAVED") {
      setHasUnsavedChanges(false);
      setHasNeverBeenSaved(false);
      setNotificationMessage("Snippet saved successfully.");
      setIsError(false);
      return;
    }
    if (event.event_type === "REQUEST_EXPORT") {
      setisExporting(true);
      setNotificationMessage("Export processing...");
      setIsError(false);
    }
    if (event.event_type === "EXPORT_CREATED") {
      setNotificationMessage(`Export created: ${event.exportFilePath}`);
      setIsError(false);
      setisExporting(false);
    }
  });
  useEffect13(() => {
    if (!isSaving || requestToSaveSentAt === null) return;
    const eventsSinceRequestToSave = recentEvents.filter(
      (event) => new Date(event.created_at).valueOf() > requestToSaveSentAt
    );
    const saveFailedEvent = eventsSinceRequestToSave.find(
      (event) => event.event_type === "FAILED_TO_SAVE_SNIPPET"
    );
    const saveSuccessEvent = eventsSinceRequestToSave.find(
      (event) => event.event_type === "SNIPPET_SAVED"
    );
    if (saveFailedEvent) {
      setIsSaving(false);
      setRequestToSaveSentAt(null);
      setErrorMessage(
        saveFailedEvent.message ?? "Failed to save snippet. See console for error."
      );
      console.error(saveFailedEvent.message);
      setIsError(true);
      if (saveFailedEvent.error_code === "SNIPPET_UNSET" && saveFailedEvent.available_snippet_names) {
        setAvailableSnippets(saveFailedEvent.available_snippet_names);
        setIsSelectSnippetDialogOpen(true);
      }
    }
    if (saveSuccessEvent) {
      setIsSaving(false);
      setRequestToSaveSentAt(null);
      setNotificationMessage("Snippet saved successfully.");
      setIsError(false);
    }
  }, [recentEvents, isSaving]);
  const triggerSaveSnippet = async () => {
    setIsSaving(true);
    setRequestToSaveSentAt(Date.now());
    setNotificationMessage(null);
    setIsError(false);
    await pushEvent({
      event_type: "REQUEST_TO_SAVE_SNIPPET",
      snippet_name: snippetName
    });
  };
  const storeCircuitJson = useRunFrameStore((state) => state.circuitJson);
  const circuitJson = storeCircuitJson ?? props.circuitJson;
  const [isImportDialogOpen, setIsImportDialogOpen] = useState19(false);
  const [isAiReviewDialogOpen, setIsAiReviewDialogOpen] = useState19(false);
  const { BugReportDialog, openBugReportDialog } = useBugReportDialog();
  return /* @__PURE__ */ jsxs25(Fragment9, { children: [
    /* @__PURE__ */ jsxs25(DropdownMenu, { children: [
      /* @__PURE__ */ jsx35(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx35("div", { className: "rf-whitespace-nowrap rf-text-xs font-medium rf-p-2 rf-mx-1 rf-cursor-pointer rf-relative", children: "File" }) }),
      /* @__PURE__ */ jsxs25(DropdownMenuContent, { className: "rf-z-[101]", children: [
        !props.isWebEmbedded && /* @__PURE__ */ jsxs25(Fragment9, { children: [
          /* @__PURE__ */ jsx35(
            DropdownMenuItem,
            {
              className: "rf-text-xs",
              onSelect: triggerSaveSnippet,
              disabled: isSaving,
              children: isSaving ? "Saving..." : "Push"
            }
          ),
          parseInt(window.location.port) > 5e3 && /* @__PURE__ */ jsx35(
            DropdownMenuItem,
            {
              className: "rf-text-xs",
              onSelect: () => {
                orderDialog.open();
              },
              children: "Order"
            }
          ),
          /* @__PURE__ */ jsx35(
            DropdownMenuItem,
            {
              className: "rf-text-xs",
              onSelect: () => setIsImportDialogOpen(true),
              disabled: isSaving,
              children: "Import"
            }
          ),
          /* @__PURE__ */ jsx35(
            DropdownMenuItem,
            {
              className: "rf-text-xs",
              onSelect: () => {
                if (!hasRegistryToken()) {
                  toast.error("Requires tscircuit token");
                  return;
                }
                setIsAiReviewDialogOpen(true);
              },
              children: "AI Review"
            }
          )
        ] }),
        !props.isWebEmbedded && /* @__PURE__ */ jsx35(
          DropdownMenuItem,
          {
            className: "rf-text-xs",
            onSelect: () => {
              openBugReportDialog();
            },
            children: "Report Bug"
          }
        ),
        /* @__PURE__ */ jsxs25(DropdownMenuSub, { children: [
          /* @__PURE__ */ jsx35(
            DropdownMenuSubTrigger,
            {
              className: "rf-text-xs",
              disabled: isExporting,
              children: isExporting ? "Exporting..." : "Export"
            }
          ),
          /* @__PURE__ */ jsx35(DropdownMenuPortal, { children: /* @__PURE__ */ jsx35(DropdownMenuSubContent, { children: availableExports.map((exp, i) => /* @__PURE__ */ jsx35(
            DropdownMenuItem,
            {
              onSelect: () => {
                if (!circuitJson) {
                  toast.error("No Circuit JSON to export");
                  return;
                }
                let projectNameFromPath = "Untitled";
                if (currentMainComponentPath) {
                  const filename = currentMainComponentPath.split("/").pop();
                  if (filename) {
                    projectNameFromPath = filename.replace(/\.[^.]+$/, "");
                  }
                }
                exportAndDownload({
                  exportName: exp.name,
                  circuitJson,
                  projectName: props.projectName ?? snippetName ?? projectNameFromPath
                });
              },
              disabled: isExporting,
              children: /* @__PURE__ */ jsx35("span", { className: "rf-text-xs", children: exp.name })
            },
            i
          )) }) })
        ] }),
        !props.isWebEmbedded && /* @__PURE__ */ jsxs25(DropdownMenuSub, { children: [
          /* @__PURE__ */ jsx35(DropdownMenuSubTrigger, { className: "rf-text-xs", children: "Advanced" }),
          /* @__PURE__ */ jsx35(DropdownMenuPortal, { children: /* @__PURE__ */ jsxs25(DropdownMenuSubContent, { children: [
            /* @__PURE__ */ jsx35(DropdownMenuItem, { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsxs25("div", { className: "rf-flex rf-items-center rf-gap-2", children: [
              /* @__PURE__ */ jsx35(
                Checkbox,
                {
                  id: "load-latest-eval",
                  checked: props.shouldLoadLatestEval,
                  onCheckedChange: (checked) => {
                    props.onChangeShouldLoadLatestEval?.(checked === true);
                  }
                }
              ),
              /* @__PURE__ */ jsx35(
                "label",
                {
                  htmlFor: "load-latest-eval",
                  className: "rf-text-xs rf-cursor-pointer",
                  children: "Force Latest @tscircuit/eval"
                }
              )
            ] }) }),
            lastRunEvalVersion && /* @__PURE__ */ jsx35(DropdownMenuItem, { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsx35("div", { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsxs25("span", { className: "rf-text-xs", children: [
              "@tscircuit/eval@",
              lastRunEvalVersion
            ] }) }) }),
            /* @__PURE__ */ jsx35(DropdownMenuItem, { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsx35("div", { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsxs25("span", { className: "rf-text-xs", children: [
              "@tscircuit/runframe@",
              package_default.version
            ] }) }) }),
            /* @__PURE__ */ jsx35(
              DropdownMenuItem,
              {
                className: "rf-flex rf-items-center rf-gap-2",
                onClick: () => {
                  window.open("/api/admin", "_blank");
                },
                children: /* @__PURE__ */ jsx35("div", { className: "rf-flex rf-items-center rf-gap-2", children: /* @__PURE__ */ jsx35("span", { className: "rf-text-xs", children: "CLI Admin Panel" }) })
              }
            )
          ] }) })
        ] })
      ] }),
      /* @__PURE__ */ jsx35(AlertDialog, { open: isError, onOpenChange: setIsError, children: /* @__PURE__ */ jsxs25(AlertDialogContent, { children: [
        /* @__PURE__ */ jsxs25(AlertDialogHeader, { children: [
          /* @__PURE__ */ jsx35(AlertDialogTitle, { children: "Error Saving Snippet" }),
          /* @__PURE__ */ jsx35(AlertDialogDescription, { children: errorMessage })
        ] }),
        /* @__PURE__ */ jsx35(AlertDialogFooter, { children: /* @__PURE__ */ jsx35(AlertDialogCancel, { onClick: () => setIsError(false), children: "Dismiss" }) })
      ] }) }),
      /* @__PURE__ */ jsx35(
        SelectSnippetDialog,
        {
          snippetNames: availableSnippets ?? [],
          onSelect: async (name) => {
            setIsSaving(true);
            setRequestToSaveSentAt(Date.now());
            setSnippetName(name);
            await pushEvent({
              event_type: "REQUEST_TO_SAVE_SNIPPET",
              snippet_name: name
            });
            setIsSelectSnippetDialogOpen(false);
          },
          onCancel: () => setIsSelectSnippetDialogOpen(false),
          isOpen: isSelectSnippetDialogOpen
        }
      )
    ] }),
    BugReportDialog,
    /* @__PURE__ */ jsx35(
      ImportComponentDialogForCli,
      {
        isOpen: isImportDialogOpen,
        onClose: () => setIsImportDialogOpen(false)
      }
    ),
    /* @__PURE__ */ jsx35(
      AiReviewDialog,
      {
        isOpen: isAiReviewDialogOpen,
        onClose: () => setIsAiReviewDialogOpen(false),
        packageName: snippetName
      }
    ),
    /* @__PURE__ */ jsx35(
      Toaster,
      {
        position: "top-center",
        reverseOrder: false,
        containerStyle: { zIndex: 1e5 },
        toastOptions: {
          className: "rf-break-all",
          style: { zIndex: 1e5 }
        }
      }
    ),
    /* @__PURE__ */ jsx35(
      orderDialog.OrderDialog,
      {
        isOpen: orderDialog.isOpen,
        onClose: orderDialog.close,
        stage: orderDialog.stage,
        setStage: orderDialog.setStage
      }
    )
  ] });
};

// lib/components/CircuitJsonPreview/CircuitJsonPreview.tsx
import { jsx as jsx36, jsxs as jsxs26 } from "react/jsx-runtime";
var dropdownMenuItems = [
  "assembly",
  "pinout",
  "bom",
  "circuit_json",
  "errors",
  "render_log"
];
var CircuitJsonPreview = ({
  code,
  fsMap,
  onRunClicked = void 0,
  errorMessage,
  errorStack,
  circuitJson,
  autoroutingGraphics,
  showRightHeaderContent = true,
  showCodeTab = false,
  codeTabContent,
  showJsonTab = true,
  showRenderLogTab = true,
  onActiveTabChange,
  renderLog,
  showImportAndFormatButtons = true,
  className,
  headerClassName,
  leftHeaderContent,
  readOnly,
  isStreaming,
  autoroutingLog,
  onReportAutoroutingLog,
  isRunningCode,
  hasCodeChangedSinceLastRun,
  onEditEvent,
  editEvents,
  defaultActiveTab,
  defaultTab,
  availableTabs,
  autoRotate3dViewerDisabled,
  showSchematicDebugGrid = false,
  showToggleFullScreen = true,
  defaultToFullScreen = false,
  activeEffectName,
  allowSelectingVersion = true,
  showFileMenu = false,
  isWebEmbedded = false,
  projectName,
  onRerunWithDebug
}) => {
  useStyles();
  const {
    versions: evalVersions,
    latestVersion,
    lastRunEvalVersion,
    search: evalSearch,
    setSearch: setEvalSearch,
    selectVersion: selectEvalVersion
  } = useEvalVersions(allowSelectingVersion);
  const circuitJsonErrors = useMemo9(() => {
    if (!circuitJson) return null;
    return circuitJson.filter(
      (e) => e && "error_type" in e || e.type.includes("error")
    );
  }, [circuitJson]);
  const circuitJsonWarnings = useMemo9(() => {
    if (!circuitJson) return null;
    return circuitJson.filter(
      (e) => e && "warning_type" in e || e.type.includes("warning")
    );
  }, [circuitJson]);
  useErrorTelemetry({
    errorMessage,
    errorStack,
    circuitJsonErrors
  });
  const [activeTab, setActiveTabState] = useLocalStorageState(
    "runframe-active-tab",
    defaultActiveTab ?? defaultTab ?? availableTabs?.[0] ?? "pcb"
  );
  const [lastActiveTab, setLastActiveTab] = useState20(null);
  const [isFullScreen, setIsFullScreen] = useState20(defaultToFullScreen);
  useFullscreenBodyScroll(isFullScreen);
  const setActiveTab = useCallback9(
    (tab) => {
      setActiveTabState(tab);
      onActiveTabChange?.(tab);
    },
    [onActiveTabChange, setActiveTabState]
  );
  const toggleFullScreen = () => {
    setIsFullScreen(!isFullScreen);
  };
  useEffect14(() => {
    if (errorMessage) {
      if (activeTab !== "errors") {
        setLastActiveTab(activeTab);
      }
      setActiveTab("errors");
    }
  }, [errorMessage]);
  useEffect14(() => {
    if ((activeTab === "code" || activeTab === "errors") && circuitJson && !errorMessage) {
      setActiveTab(
        lastActiveTab ?? defaultActiveTab ?? defaultTab ?? availableTabs?.[0] ?? "pcb"
      );
    }
  }, [circuitJson]);
  const setCadViewerRef = useCallback9((value) => {
    window.TSCIRCUIT_3D_OBJECT_REF = value === null ? void 0 : value;
  }, []);
  return /* @__PURE__ */ jsx36(
    "div",
    {
      className: cn(
        "flex flex-col relative rf-overflow-x-hidden rf-h-full",
        className
      ),
      children: /* @__PURE__ */ jsx36(
        "div",
        {
          className: cn(
            "rf-md:sticky rf-md:top-2 rf-h-full",
            isFullScreen && "rf-fixed rf-top-0 rf-left-0 rf-w-full rf-h-full rf-bg-white rf-overflow-hidden"
          ),
          children: /* @__PURE__ */ jsxs26(
            Tabs,
            {
              value: activeTab,
              onValueChange: setActiveTab,
              className: "rf-flex-grow rf-flex rf-flex-col rf-h-full",
              children: [
                /* @__PURE__ */ jsxs26(
                  "div",
                  {
                    className: cn(
                      "rf-flex rf-items-center rf-gap-2 rf-p-2 rf-pb-0",
                      headerClassName
                    ),
                    children: [
                      leftHeaderContent,
                      showFileMenu && !leftHeaderContent && /* @__PURE__ */ jsx36(
                        FileMenuLeftHeader,
                        {
                          isWebEmbedded,
                          circuitJson,
                          projectName
                        }
                      ),
                      (leftHeaderContent || showFileMenu) && /* @__PURE__ */ jsx36("div", { className: "rf-flex-grow" }),
                      !leftHeaderContent && !showFileMenu && isRunningCode && /* @__PURE__ */ jsx36(Loader25, { className: "rf-w-4 rf-h-4 rf-animate-spin" }),
                      !leftHeaderContent && !showFileMenu && /* @__PURE__ */ jsx36("div", { className: "rf-flex-grow" }),
                      renderLog && renderLog.progress !== 1 && !errorMessage && /* @__PURE__ */ jsxs26("div", { className: "rf-flex rf-items-center rf-gap-2 rf-min-w-0 rf-max-w-xs", children: [
                        activeEffectName ? /* @__PURE__ */ jsx36(
                          "div",
                          {
                            className: "rf-text-xs rf-text-gray-500 rf-truncate rf-min-w-0",
                            title: activeEffectName,
                            children: activeEffectName
                          }
                        ) : renderLog.lastRenderEvent && /* @__PURE__ */ jsx36(
                          "div",
                          {
                            className: "rf-text-xs rf-text-gray-500 rf-truncate rf-min-w-0",
                            title: renderLog.lastRenderEvent?.phase ?? "",
                            children: renderLog.lastRenderEvent?.phase ?? ""
                          }
                        ),
                        /* @__PURE__ */ jsx36("div", { className: "rf-w-4 rf-h-4 rf-bg-blue-500 rf-opacity-50 rf-rounded-full rf-text-white rf-flex-shrink-0", children: /* @__PURE__ */ jsx36(LoaderCircleIcon, { className: "rf-w-4 rf-h-4 rf-animate-spin" }) }),
                        /* @__PURE__ */ jsxs26("div", { className: "rf-text-xs rf-font-bold rf-text-gray-700 rf-tabular-nums rf-flex-shrink-0", children: [
                          ((renderLog.progress ?? 0) * 100).toFixed(1),
                          "%"
                        ] })
                      ] }),
                      showRightHeaderContent && /* @__PURE__ */ jsxs26(TabsList, { children: [
                        showCodeTab && /* @__PURE__ */ jsx36(TabsTrigger, { value: "code", children: "Code" }),
                        !availableTabs || availableTabs.includes("pcb") ? /* @__PURE__ */ jsxs26(TabsTrigger, { value: "pcb", className: "rf-whitespace-nowrap", children: [
                          circuitJson && /* @__PURE__ */ jsx36(
                            "span",
                            {
                              className: cn(
                                "rf-inline-flex rf-items-center rf-justify-center rf-w-2 rf-h-2 rf-mr-1 rf-text-xs rf-font-bold rf-text-white rf-rounded-full",
                                !hasCodeChangedSinceLastRun ? "rf-bg-blue-500" : "rf-bg-gray-500"
                              )
                            }
                          ),
                          "PCB"
                        ] }) : null,
                        !availableTabs || availableTabs.includes("schematic") ? /* @__PURE__ */ jsxs26(
                          TabsTrigger,
                          {
                            value: "schematic",
                            className: "rf-whitespace-nowrap",
                            children: [
                              circuitJson && /* @__PURE__ */ jsx36(
                                "span",
                                {
                                  className: cn(
                                    "rf-inline-flex rf-items-center rf-justify-center rf-w-2 rf-h-2 rf-mr-1 rf-text-xs rf-font-bold rf-text-white rf-rounded-full",
                                    !hasCodeChangedSinceLastRun ? "rf-bg-blue-500" : "rf-bg-gray-500"
                                  )
                                }
                              ),
                              "Schematic"
                            ]
                          }
                        ) : null,
                        !availableTabs || availableTabs.includes("cad") ? /* @__PURE__ */ jsxs26(TabsTrigger, { value: "cad", children: [
                          circuitJson && /* @__PURE__ */ jsx36(
                            "span",
                            {
                              className: cn(
                                "inline-flex items-center justify-center w-2 h-2 mr-1 text-xs font-bold text-white rounded-full",
                                !hasCodeChangedSinceLastRun ? "rf-bg-blue-500" : "rf-bg-gray-500"
                              )
                            }
                          ),
                          "3D"
                        ] }) : null,
                        !["pcb", "cad", "schematic"].includes(activeTab) && /* @__PURE__ */ jsx36(TabsTrigger, { value: activeTab, children: capitalizeFirstLetters(activeTab) }),
                        /* @__PURE__ */ jsxs26(DropdownMenu, { children: [
                          /* @__PURE__ */ jsx36(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs26("div", { className: "rf-whitespace-nowrap rf-p-2 rf-mr-1 rf-cursor-pointer rf-relative", children: [
                            /* @__PURE__ */ jsx36(EllipsisIcon, { className: "rf-w-4 rf-h-4" }),
                            (circuitJsonErrors && circuitJsonErrors.length > 0 || errorMessage) && /* @__PURE__ */ jsx36("span", { className: "rf-inline-flex rf-absolute rf-top-[6px] rf-right-[4px] rf-items-center rf-justify-center rf-w-1 rf-h-1 rf-ml-2 rf-text-[8px] rf-font-bold rf-text-white rf-bg-red-500 rf-rounded-full" })
                          ] }) }),
                          /* @__PURE__ */ jsxs26(DropdownMenuContent, { className: "rf-*:text-xs rf-z-[101]", children: [
                            dropdownMenuItems.filter(
                              (item) => !availableTabs || availableTabs.includes(item)
                            ).map((item) => /* @__PURE__ */ jsxs26(
                              DropdownMenuItem,
                              {
                                onSelect: () => setActiveTab(item),
                                children: [
                                  activeTab !== item && /* @__PURE__ */ jsx36(Circle2, { className: "rf-w-3 rf-h-3 rf-opacity-30" }),
                                  activeTab === item && /* @__PURE__ */ jsx36(CheckIcon, { className: "rf-w-3 rf-h-3" }),
                                  /* @__PURE__ */ jsx36("div", { className: "rf-pr-2", children: capitalizeFirstLetters(item) }),
                                  item === "errors" && (circuitJsonErrors && circuitJsonErrors.length > 0 || errorMessage) && /* @__PURE__ */ jsx36("span", { className: "rf-inline-flex rf-items-center rf-justify-center rf-w-3 rf-h-3 rf-ml-2 rf-text-[8px] rf-font-bold rf-text-white rf-bg-red-500 rf-rounded-full", children: errorMessage ? 1 : circuitJsonErrors?.length })
                                ]
                              },
                              item
                            )),
                            /* @__PURE__ */ jsx36(
                              DropdownMenuItem,
                              {
                                disabled: true,
                                className: "rf-opacity-60 rf-cursor-default rf-select-none",
                                children: /* @__PURE__ */ jsxs26("div", { className: "rf-pr-2 rf-text-xs rf-text-gray-500", children: [
                                  "@tscircuit/runframe@",
                                  version.split(".").map(
                                    (part, i) => i === 2 ? parseInt(part) + 1 : part
                                  ).join(".")
                                ] })
                              }
                            ),
                            allowSelectingVersion ? /* @__PURE__ */ jsxs26(
                              DropdownMenuSub,
                              {
                                onOpenChange: (open) => !open && setEvalSearch(""),
                                children: [
                                  /* @__PURE__ */ jsx36(DropdownMenuSubTrigger, { className: "rf-text-xs rf-opacity-60", children: /* @__PURE__ */ jsxs26("div", { className: "rf-pr-2 rf-text-xs rf-text-gray-500", children: [
                                    "@tscircuit/eval@",
                                    lastRunEvalVersion ?? latestVersion ?? "latest"
                                  ] }) }),
                                  /* @__PURE__ */ jsx36(DropdownMenuPortal, { children: /* @__PURE__ */ jsxs26(DropdownMenuSubContent, { className: "rf-*:text-xs rf-w-40 rf-max-h-[200px] rf-overflow-y-auto", children: [
                                    /* @__PURE__ */ jsx36("div", { className: "rf-p-1", children: /* @__PURE__ */ jsx36(
                                      Input,
                                      {
                                        value: evalSearch,
                                        onChange: (e) => setEvalSearch(e.target.value),
                                        placeholder: "Search...",
                                        className: "rf-h-7 rf-text-xs"
                                      }
                                    ) }),
                                    /* @__PURE__ */ jsx36(DropdownMenuSeparator, {}),
                                    /* @__PURE__ */ jsx36(
                                      DropdownMenuItem,
                                      {
                                        onSelect: () => selectEvalVersion(null),
                                        children: latestVersion ? `${latestVersion} (latest)` : "latest"
                                      }
                                    ),
                                    evalVersions.map((v) => /* @__PURE__ */ jsx36(
                                      DropdownMenuItem,
                                      {
                                        onSelect: () => selectEvalVersion(v),
                                        children: v
                                      },
                                      v
                                    ))
                                  ] }) })
                                ]
                              }
                            ) : lastRunEvalVersion && /* @__PURE__ */ jsx36(
                              DropdownMenuItem,
                              {
                                disabled: true,
                                className: "rf-opacity-60 rf-cursor-default rf-select-none",
                                children: /* @__PURE__ */ jsxs26("div", { className: "rf-pr-2 rf-text-xs rf-text-gray-500", children: [
                                  "@tscircuit/eval@",
                                  lastRunEvalVersion
                                ] })
                              }
                            )
                          ] })
                        ] })
                      ] }),
                      showToggleFullScreen && /* @__PURE__ */ jsx36(Button, { onClick: toggleFullScreen, variant: "ghost", children: isFullScreen ? /* @__PURE__ */ jsx36(MinimizeIcon, { size: 16 }) : /* @__PURE__ */ jsx36(FullscreenIcon, { size: 16 }) })
                    ]
                  }
                ),
                showCodeTab && /* @__PURE__ */ jsx36(
                  TabsContent,
                  {
                    value: "code",
                    className: "rf-flex-grow rf-overflow-hidden",
                    children: /* @__PURE__ */ jsx36("div", { className: "rf-h-full", children: codeTabContent })
                  }
                ),
                (!availableTabs || availableTabs.includes("pcb")) && /* @__PURE__ */ jsx36(TabsContent, { value: "pcb", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-hidden",
                      isFullScreen ? "rf-h-[calc(100vh-52px)]" : "rf-h-full"
                    ),
                    children: /* @__PURE__ */ jsx36(
                      ErrorBoundary,
                      {
                        fallbackRender: ({ error }) => /* @__PURE__ */ jsx36("div", { className: "rf-mt-4 rf-bg-red-50 rf-rounded-md rf-border rf-border-red-200", children: /* @__PURE__ */ jsxs26("div", { className: "rf-p-4", children: [
                          /* @__PURE__ */ jsx36("h3", { className: "rf-text-lg rf-font-semibold rf-text-red-800 rf-mb-3", children: "Error loading PCB viewer" }),
                          /* @__PURE__ */ jsx36("p", { className: "rf-text-xs rf-font-mono rf-whitespace-pre-wrap rf-text-red-600 rf-mt-2", children: error?.message || "An unknown error occurred" })
                        ] }) }),
                        children: circuitJson ? /* @__PURE__ */ jsx36(
                          PcbViewerWithContainerHeight,
                          {
                            focusOnHover: false,
                            circuitJson,
                            debugGraphics: autoroutingGraphics,
                            containerClassName: cn(
                              "rf-h-full rf-w-full",
                              isFullScreen ? "rf-min-h-[calc(100vh-240px)]" : "rf-min-h-[620px]"
                            ),
                            onEditEventsChanged: (editEvents2) => {
                              if (onEditEvent) {
                                for (const e of editEvents2) {
                                  onEditEvent(e);
                                }
                              }
                            }
                          }
                        ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked })
                      }
                    )
                  }
                ) }),
                (!availableTabs || availableTabs.includes("assembly")) && /* @__PURE__ */ jsx36(TabsContent, { value: "assembly", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(ErrorBoundary, { fallback: /* @__PURE__ */ jsx36("div", { children: "Error loading Assembly" }), children: circuitJson ? /* @__PURE__ */ jsx36(
                      AssemblyViewer,
                      {
                        circuitJson,
                        containerStyle: {
                          height: "100%"
                        },
                        editingEnabled: true,
                        debugGrid: true
                      }
                    ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked }) })
                  }
                ) }),
                (!availableTabs || availableTabs.includes("pinout")) && /* @__PURE__ */ jsx36(TabsContent, { value: "pinout", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(
                      ErrorBoundary,
                      {
                        fallback: /* @__PURE__ */ jsx36("div", { children: "Error loading Pinout Viewer" }),
                        children: circuitJson ? /* @__PURE__ */ jsx36(
                          PinoutViewer,
                          {
                            circuitJson,
                            containerStyle: {
                              height: "100%"
                            }
                          }
                        ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked })
                      }
                    )
                  }
                ) }),
                (!availableTabs || availableTabs.includes("schematic")) && /* @__PURE__ */ jsx36(TabsContent, { value: "schematic", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto rf-bg-white",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(
                      ErrorBoundary,
                      {
                        fallbackRender: ({ error }) => /* @__PURE__ */ jsx36("div", { className: "rf-mt-4 rf-bg-red-50 rf-rounded-md rf-border rf-border-red-200", children: /* @__PURE__ */ jsxs26("div", { className: "rf-p-4", children: [
                          /* @__PURE__ */ jsx36("h3", { className: "rf-text-lg rf-font-semibold rf-text-red-800 rf-mb-3", children: "Error loading Schematic" }),
                          /* @__PURE__ */ jsx36("p", { className: "rf-text-xs rf-font-mono rf-whitespace-pre-wrap rf-text-red-600 rf-mt-2", children: error?.message || "An unknown error occurred" })
                        ] }) }),
                        children: circuitJson ? /* @__PURE__ */ jsx36(
                          SchematicViewer,
                          {
                            spiceSimulationEnabled: true,
                            circuitJson,
                            containerStyle: {
                              height: "100%"
                            },
                            editingEnabled: true,
                            onEditEvent: (ee) => {
                              onEditEvent?.(ee);
                            },
                            debugGrid: showSchematicDebugGrid
                          }
                        ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked })
                      }
                    )
                  }
                ) }),
                (!availableTabs || availableTabs.includes("cad")) && /* @__PURE__ */ jsx36(TabsContent, { value: "cad", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(ErrorBoundary, { FallbackComponent: ErrorFallback, children: circuitJson ? /* @__PURE__ */ jsx36(
                      CadViewer,
                      {
                        ref: setCadViewerRef,
                        circuitJson,
                        autoRotateDisabled: autoRotate3dViewerDisabled
                      }
                    ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked }) })
                  }
                ) }),
                (!availableTabs || availableTabs.includes("bom")) && /* @__PURE__ */ jsx36(TabsContent, { value: "bom", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(
                      ErrorBoundary,
                      {
                        fallbackRender: ({ error }) => /* @__PURE__ */ jsx36("div", { className: "rf-mt-4 rf-bg-red-50 rf-rounded-md rf-border rf-border-red-200", children: /* @__PURE__ */ jsxs26("div", { className: "rf-p-4", children: [
                          /* @__PURE__ */ jsx36("h3", { className: "rf-text-lg rf-font-semibold rf-text-red-800 rf-mb-3", children: "Error loading Bill of Materials" }),
                          /* @__PURE__ */ jsx36("p", { className: "rf-text-xs rf-font-mono rf-whitespace-pre-wrap rf-text-red-600 rf-mt-2", children: error?.message || "An unknown error occurred" })
                        ] }) }),
                        children: circuitJson ? /* @__PURE__ */ jsx36(BomTable, { circuitJson }) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked })
                      }
                    )
                  }
                ) }),
                (!availableTabs || availableTabs.includes("circuit_json")) && /* @__PURE__ */ jsx36(TabsContent, { value: "circuit_json", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-auto",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full  rf-min-h-[620px]"
                    ),
                    children: /* @__PURE__ */ jsx36(ErrorBoundary, { fallback: /* @__PURE__ */ jsx36("div", { children: "Error loading JSON viewer" }), children: circuitJson ? /* @__PURE__ */ jsx36(CircuitJsonTableViewer, { elements: circuitJson }) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked }) })
                  }
                ) }),
                (!availableTabs || availableTabs.includes("errors")) && /* @__PURE__ */ jsx36(TabsContent, { value: "errors", className: "rf-h-full", children: /* @__PURE__ */ jsx36(
                  "div",
                  {
                    className: cn(
                      "rf-overflow-hidden",
                      isFullScreen ? "rf-h-[calc(100vh-60px)]" : "rf-h-full rf-min-h-[620px]"
                    ),
                    children: errorMessage || circuitJsonErrors && circuitJsonErrors.length > 0 || circuitJson ? /* @__PURE__ */ jsx36(
                      ErrorTabContent,
                      {
                        code,
                        fsMap,
                        circuitJsonErrors,
                        circuitJsonWarnings,
                        errorMessage,
                        errorStack,
                        circuitJson,
                        evalVersion: lastRunEvalVersion,
                        autoroutingLog,
                        onReportAutoroutingLog
                      }
                    ) : /* @__PURE__ */ jsx36(PreviewEmptyState_default, { onRunClicked })
                  }
                ) }),
                showRenderLogTab && (!availableTabs || availableTabs.includes("render_log")) && /* @__PURE__ */ jsx36(TabsContent, { value: "render_log", children: /* @__PURE__ */ jsx36(
                  RenderLogViewer,
                  {
                    renderLog,
                    onRerunWithDebug
                  }
                ) })
              ]
            }
          )
        }
      )
    }
  );
};

// lib/preview.ts
import { CadViewer as CadViewer2 } from "@tscircuit/3d-viewer";
import { PCBViewer as PCBViewer2 } from "@tscircuit/pcb-viewer";
import { SchematicViewer as SchematicViewer2 } from "@tscircuit/schematic-viewer";

export {
  cn,
  Tabs,
  TabsList,
  TabsTrigger,
  TabsContent,
  Button,
  toast,
  linkify,
  BomTable,
  Input,
  PcbViewerWithContainerHeight,
  useStyles,
  useLocalStorageState,
  useRunnerStore,
  debug_default,
  API_BASE,
  useRunFrameStore,
  Dialog,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
  ImportComponentDialog2,
  ImportComponentDialogForCli,
  registryKy,
  useOrderDialogCli,
  useOrderDialog,
  FileMenuLeftHeader,
  CircuitJsonPreview,
  CadViewer2 as CadViewer,
  PCBViewer2 as PCBViewer,
  SchematicViewer2 as SchematicViewer
};
